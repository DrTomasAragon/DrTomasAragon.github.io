<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Dr. Tomás Aragón</title>
<link>https://drtomasaragon.github.io/index.html</link>
<atom:link href="https://drtomasaragon.github.io/index.xml" rel="self" type="application/rss+xml"/>
<description>Population Health Blog</description>
<generator>quarto-1.3.433</generator>
<lastBuildDate>Mon, 08 May 2023 07:00:00 GMT</lastBuildDate>
<item>
  <title>Lessons from the Covid Wars: An Investigative Report</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2023-05-08-lesson-from-the-covid-wars/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This is a book review in progress, and feedback is welcomed and appreciated.</p>
<p><a href="https://www.hachettebookgroup.com/titles/covid-crisis-group/lessons-from-the-covid-war/9781541703803/">Lessons from the Covid Wars: An Investigative Report</a>, by the <a href="https://covidcrisisgroup.org/">Covid Crisis Group</a>, was recently published by PublicAffairs <span class="citation" data-cites="Covid-Crisis-Group2023">[1]</span>. The cost is $19.</p>
<p>I have been involved in the Covid pandemic response since the beginning <span class="citation" data-cites="Aragon2021_doi:10.1097-phh.0000000000001292 pmid33566658 pmid33411328 pmid33308337 pmid32687150">[2–6]</span>. I enjoyed this <a href="https://covidcrisisgroup.org/members">34-author</a> book because it covered the key decisions, policies, and politics at the national level, and the implications for future global, state, and local preparedness and response. Because they interviewed 300+ people and reviewed many publications, they were able to take a complex historical event and weave it into a coherent story of how the United States Covid response was led and managed at the national level. The lead author was <a href="https://millercenter.org/experts/philip-zelikow">Philip Zelikow</a>, Professor of History at University of Virginia.</p>
<p>There are <strong>10 lessons</strong> which are presented at the beginning of a <a href="https://nam.edu/event/discussion-of-findings-from-the-covid-crisis-group/">5-hour webinar</a> sponsored by the National Academy of Medicine (NAM).<sup>1</sup></p>
<div style="text-align: center">
<iframe src="https://player.vimeo.com/video/819923414?h=fffe1cf100" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen="">
</iframe>
</div>
<p>For this book review/summary I viewed the following webinars</p>
<ul>
<li><a href="https://nam.edu/event/discussion-of-findings-from-the-covid-crisis-group/">Discussion of Findings from the Covid Crisis Group</a>, sponsored by the National Academy of Medicine, featuring Victor Dzau, Philip Zelikow, Richard Danzig, John Barry, Marc Lipsitch, Gary Edson, Ruth Faden, Margaret (Peggy) Hamburg, Mark McClellan, Melissa Harvey, James Lawler, Monique K. Mansoura, Richard Hatchett, Kendall Hoyt, Michael Callahan, and Michael McGinnis</li>
<li><a href="https://millercenter.org/news-events/events/lessons-covid-war-report-covid-crisis-group">Lessons from the Covid War: The report from the Covid Crisis Group</a>, sponsored by the University of Virginia Miller Center, featuring Danielle Allen, Carter Mecher, Philip Zelikow, and Guian McKee (moderator)</li>
<li><a href="https://www.commonwealthclub.org/events/2023-04-26/lessons-covid-war">Lessons from the Covid War</a>, sponsored by the Commonwealth Club, featuring Emily Silverman, David A. Relman, Robert Rodriguez, and Charity Dean</li>
<li><a href="https://www.washingtonpost.com/washington-post-live/2023/04/25/lessons-learned-us-covid-19-response/">Lessons learned from U.S. COVID-19 response</a>, sponsored by the Washington Post Live (Dan Diamond, interviewer), featuring Philip Zelikow and Charity Dean</li>
<li><a href="https://www.youtube.com/watch?v=6izIcDQQRNs">Philip Zelikow discusses “Lessons from the Covid War” with Richard J. Hatchett and Kendall Hoyt</a>, sponsored by the <a href="https://www.harvard.com/book/lessons_from_the_covid_war/">Harvard Book Store</a>.</li>
</ul>
<p>I recommend this book and hope this summary and review makes your reading of the book more productive. The book would have benefited by having an introductory chapter that summarized the 10 lessons, followed by the chapters in the same order.<sup>2</sup></p>
<p>Here are the <strong>Table of Contents</strong>:</p>
<ol type="1">
<li>From Tragedy to Possibility</li>
<li>Origins, Prevention, and Warning</li>
<li>The Defenders</li>
<li>Containment Fails; Mobilization Lags</li>
<li>Federal Crisis Management Collapses; Operation Warp Speed Begins</li>
<li>Communities Improvise with Few Tools</li>
<li>The Healthcare System Frays</li>
<li>Trust and Confidence Break Down</li>
<li>Fighting Back with Drugs and Vaccines</li>
<li>Strategy for a Global War</li>
<li>America the Competent?</li>
</ol>
</section>
<section id="the-10-lessons" class="level2">
<h2 class="anchored" data-anchor-id="the-10-lessons">The 10 Lessons</h2>
<p>The 10 lessons do not completely correspond to the chapters. In the coming days I will be highlighting under each lesson what I found interesting and informative.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson One (Chapter 1: From Tragedy to Possibility)
</div>
</div>
<div class="callout-body-container callout-body">
<p>The Covid war is a story of how our wondrous scientific knowledge has run far, far ahead of the organized human ability to apply that knowledge in practice.</p>
</div>
</div>
<p>The mindset required to respond to the Covid pandemic is to treat it like fighting a war. In a war we face four challenges (p.&nbsp;5):</p>
<ol type="1">
<li>“<strong>Prevent and warn</strong>. Size up the danger, engage citizens, and track the enemy.”</li>
<li>“<strong>Contain the attack</strong>. Keep the enemy out of the country or confine its spread.”</li>
<li>“<strong>Defend our communities</strong>. Protect not only lives, but also our way of life, with proper healthcare and non-medical measures.”</li>
<li>“<strong>Fight back</strong>. Develop and deploy medical countermeasures such as tests, medicines, and vaccines.”</li>
</ol>
<p>The United States did not have a war mindset. We were not prepared, and we did not respond with the urgency of fighting a war against a novel microbial threat. We had the knowledge—<strong>what</strong> we should do, but lacked <strong>how</strong> we should do it. And we lacked the national leadership in 2020 to ensure we tackle the four challenges.</p>
<p>Why? There are three main cultures in governance:</p>
<ol type="1">
<li>“culture of <strong>programs and process</strong>” (budget appropriation and administration).</li>
<li>“culture of <strong>research and investigation</strong>” (knowledge discovery).</li>
<li>“culture of <strong>operations</strong>” (knowledge deployment: implementing in the field at speed and at scale).</li>
</ol>
<p>“The challenge in the Covid war, as in any great emergency, is to meld all these cultures in practice.”</p>
<p>“The Covid war revealed a collective national incompetence in governance. The leaders of the United States could not apply their country’s vast assets effectively enough in practice. Trust and confidence in government—already low—further eroded. The most successful national program to wage the war to produce and distribute vaccines, Operation Warp Speed, ended up having to be run substantially by the Department of Defense.”</p>
<p><strong>My take:</strong> In general, I agree.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Two (Chapter 3: The Defenders)
</div>
</div>
<div class="callout-body-container callout-body">
<p>The United States met te 21st century pandemic with structures mainly built for 19th century problems.</p>
</div>
</div>
<p>Yes, this is absolutely true. Through international travel, the world is more connected now than ever. An novel infection in one part of the world can quickly spread to several continents. And, it’s well documented the health departments have been underinvested for decades and lack infrastructure for 21st century threats, this includes the Centers for Disease Control and Prevention.</p>
<p>The United States needs a new “National Health Security Enterprise” that provides “strategic-level governance” over, at least, the following:</p>
<ul>
<li>the <strong>public health community</strong> (CDC and the thousands of health departments);</li>
<li>the <strong>healthcare system</strong> (public and private); and</li>
<li>the <strong>biopharma system</strong> (public and private) for developing and deploying tests, drugs, and vaccines.</li>
</ul>
<p>The problems identified include:</p>
<ul>
<li>Public health governance and operational capabilities are decentralized across State, Tribal, Local, and Territorial health jurisdiction. Federal health agencies have limited influence.</li>
<li>The healthcare system is not a system; it is a fragmented connection of entities (payors, plans, providers, pharma, suppliers, etc.), many in transactional relationships to profit from sickness care. Healthcare has limited preparedness connections with public health except for small CDC grants.</li>
<li>The biopharma industry has little, if any, financial incentive to invest in infectious disease emergency preparedness and response.</li>
</ul>
<p>The new “National Health Security Enterprise” would reimagine and reorganize these relationships and invest in preparedness as if we are preparing for a war.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Three (in Chapter 6, p.&nbsp;156: Communities Improvise with Few Tools)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Partisan divisions over America’s Covid response were partly the result of policy failure, not its cause.</p>
</div>
</div>
<p>“To be clear: there is a common view that politics, a ‘Red response’ and a ‘Blue response’, were the main obstacle to protecting citizens, not competence and policy failures. We found, instead, that it was more the other way around. Incompetence and policy failures, including the failure of federal executive leadership, produced bad outcomes, flying blind, and resorting to blunt instruments. Those failures and tensions fed toxic politics that further divided the country in a crisis rather than bringing it together.”</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Four (Chapter 2, pp.&nbsp;27–28: Origins, Prevention, and Warning)
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is not enough evidence available from inside of China to come down hard on any theory of the origins of SARS-CaV-2. But what is already know drives two great agendas for the future.</p>
</div>
</div>
<p>This was one of my favorite chapters. It was very thoughtful and systematic.</p>
<p>How was SARS-CoV-2 introduced into the human population?</p>
<ol type="1">
<li>“… humans transported wild animals carrying the virus to Wuhan.”</li>
<li>“… humans transported their collected virus samples back to a lab in Wuhan and that the virus crossed over to humans in some part of the research process, from collection to experimentation.”</li>
<li>“The research process theory has two main hypotheses.”
<ul>
<li>“… a natural virus could have infected a human while collecting field samples in southern China, and this person traveled back to Wuhan before infecting others.”</li>
<li>“… laboratory staff used modern genetic engineering tools capable of making a bat coronavirus more transmissible among humans and such experiments may have led to the creation of SARS-CoV-2.”</li>
</ul></li>
<li>If SARS-CoV-2 was in a research laboratory, how did it get into the human population?
<ul>
<li>intentional release</li>
<li>laboratorian infected (from cell culture or animal)</li>
<li>failure of laboratory infection control safeguards</li>
</ul></li>
</ol>
<p>Bottom line: there is insufficient evidence to conclude with confidence which of these theories is the likely causal explanation.</p>
<p>How can we improve for the future?</p>
<p>“<strong>First</strong>, we believe governments must improve their intelligence about what is going on—their situation awareness. The past system relied on national governments like China to provide timely reporting of what was happening. That system decisively failed. We need to envision an alternative.”</p>
<p>“<strong>Second</strong>, we suggest a large, difficult multinational effort to regulate the most risky research. That includes biosafety, biosecurity, and dual use research of concern.”</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Five (Chapters 4 and 5: Containment Fails; Mobilization Lags &amp; Federal Crisis Management Collapses; Operation Warp Speed Begins)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Containment failed and federal crisis management collapsed under President Trump’s leadership. But Trump was a comorbidity.<sup>3</sup> Systemic problems existed before 2020, and continue to this day.</p>
</div>
</div>
<p>Chapter 4 chronicles the early months of 2020. “[T]he month of January 2020 was a month of warnings and early reactions. February was a month in which some nations mobilized and the United States did not.” The chapter summarized three key issues (p.&nbsp;113):</p>
<ol type="1">
<li>“the problems of overall <strong>policy design</strong>”</li>
<li>“the misjudgment about <strong>silent spread</strong> combined with weakness of <strong>biomedical surveillance</strong>”</li>
<li>“the limited <strong>availability of tests</strong>”</li>
</ol>
<p><strong>Policy design</strong>: The United States clearly underestimated, at multiple levels, its readiness to respond to a pandemic of a respiratory pathogen other than influenza. President Obama left President Trump a “todo” list of what should be done, but no road map of how to do it.<sup>4</sup> Previous microbial threats did not adequately test our response systems. We did not realize that responsing to a pandemic, like Covid, would be more like a fighting a war, requiring a whole-of-goverment response and a whole-of-society mobilization—like a fighting a war.</p>
<p><strong>Silent spread</strong>: The United States did not prepare for an airborne transmissible respiratory pathogen with a large proportion of asymptomatic infections. The mental model was influenza or SARS-1.</p>
<p><strong>Biomedical surveillance</strong>: pending</p>
<p><strong>Testing</strong>: pending</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Six (Chapter 7: The Healthcare System Frays)
</div>
</div>
<div class="callout-body-container callout-body">
<p>America’s uniquely fragmented healthcare system is unable to adequately respond in a national emergency. A new national health security enterprise is urgently needed.</p>
</div>
</div>
<p>“American healthcare economics disincentivize investment in preparedness.”</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Seven (Chapter 9: Fighting Back with Drugs and Vaccines)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Health security is part of national security. Investments in health security, including therapeutics and vaccines, should be judged and organized on a national security standard.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Eight (Chapter 10: Strategy for a Global War)
</div>
</div>
<div class="callout-body-container callout-body">
<p>The “America First” approach to vaccines backfired. Better global cooperation would have paid dividends for the United States and the world.</p>
</div>
</div>
<p>This chapter covers the global collaboration, financing, manufacturing, and distribution of Covid vaccines (Figure&nbsp;1). In spite of some good intentions, vaccine equity efforts failed. The bottom line is that in a pandemic, US leadership in global vaccine equity and distribution would have ultimately benefited the US at home and abroad.</p>
<div id="fig-p263" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2023-05-08-lesson-from-the-covid-wars/images/fig_p263_global_efort.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: (p.&nbsp;263): This diagram shows the sectors involved in global collaboration on the development and distribution of therapeutics and vaccines. Governments at all levels, non-governmental organizations, philanthropies, and the private biopharmaceutical industry all have important roles to play. During the Covid pandemic, emergency organizations like the Access to COVID-19 Tools (ACT) Accelerator were created to try to help coordinate these different sectors.</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Nine (Chapter 8: Trust and Confidence Break Down)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Communication in a crisis is a vital policy choice. In both the Trump and Biden administrations, poor communication aggravated the breakdown of public trust and confidence, and undermined efforts to combat misinformaion.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Lesson Ten (Chapter 11: America the Competent?)
</div>
</div>
<div class="callout-body-container callout-body">
<p>We must do better next time. Because there will be a next time.</p>
</div>
</div>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Covid-Crisis-Group2023" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">The Covid Crisis Group. Lessons from the covid war [Internet]. New York, NY: PublicAffairs; 2023. Available from: <a href="https://www.hachettebookgroup.com/titles/covid-crisis-group/lessons-from-the-covid-war/9781541703803/">https://www.hachettebookgroup.com/titles/covid-crisis-group/lessons-from-the-covid-war/9781541703803/</a></div>
</div>
<div id="ref-Aragon2021_doi:10.1097-phh.0000000000001292" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Aragón TJ, Cody SH, Farnitano C, Hernandez LB, Morrow SA, Pan ES, et al. <span class="nocase">Crisis Decision-Making at the Speed of <span>COVID</span>-19: Field Report on Issuing the First Regional Shelter-in-Place Orders in the United States</span>. Journal of Public Health Management and Practice [Internet]. 2021 Jan;27(1):S19–28. Available from: <a href="https://doi.org/10.1097/phh.0000000000001292">https://doi.org/10.1097/phh.0000000000001292</a></div>
</div>
<div id="ref-pmid33566658" class="csl-entry">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Degutis LC, Shoaf K, n TJ, Atchison C, Dyjack D, Hites L, et al. <span class="nocase"><span>T</span>he <span>U</span>rgent <span>N</span>eed for <span>P</span>ublic <span>H</span>ealth <span>P</span>reparedness <span>F</span>unding and <span>S</span>upport</span>. Am J Public Health [Internet]. 2021 Mar;111(3):363–5. Available from: <a href="https://doi.org/10.2105/AJPH.2020.306068">https://doi.org/10.2105/AJPH.2020.306068</a></div>
</div>
<div id="ref-pmid33411328" class="csl-entry">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Louie JK, Stoltey J, Scott HM, DuBois A, Golden L, Philip S, et al. <span class="nocase"><span>E</span>arly <span>C</span><span>O</span><span>V</span><span>I</span><span>D</span>-19 <span>S</span>uccesses in <span>S</span>killed <span>N</span>ursing <span>F</span>acilities in <span>S</span>an <span>F</span>rancisco</span>. J Am Geriatr Soc [Internet]. 2020 Dec;68(12):2744–5. Available from: <a href="https://doi.org/10.1111/jgs.16765">https://doi.org/10.1111/jgs.16765</a></div>
</div>
<div id="ref-pmid33308337" class="csl-entry">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Louie JK, Stoltey JE, Scott HM, Trammell S, Ememu E, Samuel MC, et al. <span class="nocase"><span>C</span>omparison of symptomatic and asymptomatic infections due to severe acute respiratory coronavirus virus 2 (<span>S</span><span>A</span><span>R</span><span>S</span>-<span>C</span>o<span>V</span>-2) in <span>S</span>an <span>F</span>rancisco long-term care facilities</span>. Infect Control Hosp Epidemiol [Internet]. 2022 Jan;43(1):123–4. Available from: <a href="https://doi.org/10.1017/ice.2020.1371">https://doi.org/10.1017/ice.2020.1371</a></div>
</div>
<div id="ref-pmid32687150" class="csl-entry">
<div class="csl-left-margin">6. </div><div class="csl-right-inline">Louie JK, Scott HM, DuBois A, Sturtz N, Lu W, Stoltey J, et al. <span class="nocase"><span>L</span>essons <span>F</span>rom <span>M</span>ass-<span>T</span>esting for <span>C</span>oronavirus <span>D</span>isease 2019 in <span>L</span>ong-<span>T</span>erm <span>C</span>are <span>F</span>acilities for the <span>E</span>lderly in <span>S</span>an <span>F</span>rancisco</span>. Clin Infect Dis [Internet]. 2021 Jun;72(11):2018–20. Available from: <a href="https://doi.org/10.1093/cid/ciaa1020">https://doi.org/10.1093/cid/ciaa1020</a></div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Dr.&nbsp;David Relman listed Lessons 1–5 on a Stanford University news web page: <a href="https://cisac.fsi.stanford.edu/news/lessons-covid-war-investigative-report" class="uri">https://cisac.fsi.stanford.edu/news/lessons-covid-war-investigative-report</a>↩︎</p></li>
<li id="fn2"><p>If I had not seen the NAM webinar I would not have known their top 10 lessons.↩︎</p></li>
<li id="fn3"><p>The phrase, “Trump was a comorbidity” also appears on p.&nbsp;7 of the book. The choice of words is unfortunate for a group that claims to be nonpartisan. This limits the reach of the book.↩︎</p></li>
<li id="fn4"><p>Also see <a href="https://www.nytimes.com/2020/03/19/us/politics/trump-coronavirus-outbreak.html" class="uri">https://www.nytimes.com/2020/03/19/us/politics/trump-coronavirus-outbreak.html</a>.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Book review</category>
  <category>COVID-19</category>
  <category>Pandemic</category>
  <category>Public health</category>
  <category>Preparedness</category>
  <category>SARS-CoV-2</category>
  <guid>https://drtomasaragon.github.io/posts/2023-05-08-lesson-from-the-covid-wars/index.html</guid>
  <pubDate>Mon, 08 May 2023 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2023-05-08-lesson-from-the-covid-wars/images/book_cover_lessons_from_the_covid_war_1024x633.png" medium="image" type="image/png" height="89" width="144"/>
</item>
<item>
  <title>Simple method to get criteria weights for decision making</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2023-03-31-criteria-weights-for-decisions/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>At the California Department of Public Health, we promote <a href="../2021-03-13-decision-intelligence01/index.html">decision intelligence</a> (DI)—improving how we make team decisions to find, select, and solve problems and to improve outcomes. A foundational component of DI is decision quality—the six requirements of good decision making. At a minimum, a decision quality checklist (DQ) (Table&nbsp;1) improves the quality of decisions at any stage of problem solving. A good decision is only as strong as its weakest link. (To learn more about DQ watch 3.5min video from the <a href="https://www.decisioneducation.org/">Decision Education Foundation</a>.)</p>
<div id="tbl-dqr1" class="anchored">
<table class="table">
<caption>Table&nbsp;1: Key questions to answer for decision quality (DQ)</caption>
<colgroup>
<col style="width: 4%">
<col style="width: 11%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th>No.</th>
<th>Requirement</th>
<th>Key question to ask</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Frame</td>
<td>Are we clear on the problem we are solving?</td>
</tr>
<tr class="even">
<td>2</td>
<td>Values</td>
<td>Have we identified what we truly want?</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Alternatives</td>
<td>Do we have a good set of alternatives?</td>
</tr>
<tr class="even">
<td>4</td>
<td>Information</td>
<td>Have we gathered the relevant information?</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Reasoning</td>
<td>How will we evaluate alternatives to find the one that gets us the most of what what we truly want?</td>
</tr>
<tr class="even">
<td>6</td>
<td>Commitment</td>
<td>Are we committed to follow through on our choice.</td>
</tr>
</tbody>
</table>
</div>
<p>Making higher quality decisions as a group can be challenging. Our brains prefer intuitive decision making. Deliberations are cognitively exhausting, especially in the face of competing objectives, uncertainty, and time constraints. That is why, unfortunately, decision-making is often deferred to an authority figure. It’s better to embrace team decision making but practice with simple tools and methods that promote group engagement, deliberation, and decision quality.</p>
</section>
<section id="making-single-and-multi-attribute-decisions" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="making-single-and-multi-attribute-decisions"><span class="header-section-number">2</span> Making single and multi-attribute decisions</h2>
<section id="single-attribute-decision" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="single-attribute-decision"><span class="header-section-number">2.1</span> Single-attribute decision</h3>
<p>Suppose our team needs to select from several alternatives and it will be based on a <strong>single attribute</strong>; for example, choosing one of five available colors to paint our office. That attribute—color—becomes our single criterion and we apply the ranking method illustrated below. In this example the single attribute (color) represents the alternatives (five colors to choose from).</p>
</section>
<section id="multi-attribute-decision" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="multi-attribute-decision"><span class="header-section-number">2.2</span> Multi-attribute decision</h3>
<p>However, more commonly, based on our <strong>frame</strong> (values, objectives, and key results), our team needs to select from among several <strong>alternatives</strong>, each of which has <strong>mutliple attributes</strong>. Selection examples include buying a smartphone, hiring an employee, or selecting a vendor. As individuals and as a group, we have preferences for these attributes based on what we know (<strong>information</strong>) and what consequences and impacts we care about (<strong>prospects</strong>). We need sound <strong>reasoning</strong> but it will not require a complex decision analysis. Engaging the team in fair and transparent deliberative decision making builds trust, consensus, and <strong>commitment</strong>.</p>
<p>Our main task is to (a) <strong>develop criteria</strong> based on these attributes, (b) <strong>weight the criteria</strong> based on importance to us (preference), and (c) <strong>rate the alternatives</strong> based on the criteria and evidence (data, community, experts, analysis). Ideally, the criteria should be weighted without any knowledge of the alternatives. This is to prevent evaluators from biasing the criteria weights in favor of their favorite alternative.</p>
<p>In this blog posting I show how to weight criteria using a simple ranking method. In a future blog post, I will show how to apply weighted criteria to rank and select alternatives. This first step, weighting criteria, is very powerful and practical. We will use a trivial example to nail down the concepts.</p>
<p>Now, suppose we wish to buy a car and our choices are a Honda Civic, and Subaru Impreza, or Toyota Corolla. We have data on the following attributes: safety (S), mileage (M), reliability (R), color (C), price (P), and resale value (V). Table&nbsp;2 summarizes the DQ requirements for buying our car.</p>
<div id="tbl-car" class="anchored">
<table class="table">
<caption>Table&nbsp;2: Decision quality requirements for buying a car</caption>
<colgroup>
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 56%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>No.</th>
<th>Requirement</th>
<th>Key question to ask</th>
<th>Answer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Frame</td>
<td>Are we clear on the problem we are solving?</td>
<td>Need personal transportion.</td>
</tr>
<tr class="even">
<td>2</td>
<td>Values</td>
<td>Have we identified what we truly want?</td>
<td>Car within my budget.</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Alternatives</td>
<td>Do we have a good set of alternatives?</td>
<td>Civic, Corolla, or Impreza</td>
</tr>
<tr class="even">
<td>4</td>
<td>Information</td>
<td>Have we gathered the relevant information?</td>
<td>Color, mileage, price, reliability, safety, resale value</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Reasoning</td>
<td>How will we evaluate alternatives to find the one that gets us the most of what what we truly want?</td>
<td>Ranking algorithm using weight calculations</td>
</tr>
<tr class="even">
<td>6</td>
<td>Commitment</td>
<td>Are we committed to follow through on our choice.</td>
<td>Yes, my spouse approves.</td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="calculating-criteria-weightsthe-easy-way" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="calculating-criteria-weightsthe-easy-way"><span class="header-section-number">3</span> Calculating criteria weights—the easy way</h2>
<p>Group deliberative decision-making is cognitively exhausting. So, anything you can do to make the process easier will keep team members engaged. Do not let “perfection become the enemy of the good”. The easiest way to generate criteria weights from a team of evaluators is to use a rank ordinal method <span class="citation" data-cites="Danielson2017_doi10.1007/978-3-319-52624-9_2">[1]</span>.</p>
<p>Give evaluators small pieces of paper with one criterion printed on on each. If we have five criteria, they get five small pieces of paper. Have them rank them from top to bottom. Once they have ranked them, tape their ranking onto an 8.5in x 11in paper and hand to the facilitator. This ranking is entered into the computer for analysis (see below).</p>
<section id="ratio-ordinal-method-in-julia" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="ratio-ordinal-method-in-julia"><span class="header-section-number">3.1</span> Ratio ordinal method in Julia</h3>
<p>I will demonstrate this method using the Julia language. This method can also be implemented using R, Python, or Microsoft Excel.</p>
<p>For rating the cars we have six criteria (attributes) for which we need to calculate weights:</p>
<ol type="1">
<li>Color (C)</li>
<li>Mileage (M)</li>
<li>Price (P)</li>
<li>Reliability (R)</li>
<li>Safety (S)</li>
<li>Value, resale (V)</li>
</ol>
<p>We have five evaluators that will rank the criteria based on their knowledge, experience, expertise, and wisdom. It is much better for them to rank the criteria independently and without thinking about specific cars, otherwise they may game (bias) the weighting.</p>
<p>Here are the steps:</p>
<ol type="1">
<li>Select a ranking method to calculate weights for a specific number of criteria, in this case we have six criteria. We will write and use a Julia function that implements the SR method from <span class="citation" data-cites="Danielson2017_doi10.1007/978-3-319-52624-9_2">[1]</span>.</li>
<li>Have each evaluator independently rank the criteria.</li>
<li>Use Julia to calculate the final criteria weights. We will use the <em>split-apply-combine</em> workflow that I introduced in a previous <a href="../2023-02-20-julia-for-data-analysis/index.html">blog post</a> and book review <span class="citation" data-cites="Kaminski2023-isbn978-1633439368">[2]</span>.</li>
</ol>
<section id="step-1-the-sr-method-for-generating-criteria-weights" class="level4" data-number="3.1.1">
<h4 data-number="3.1.1" class="anchored" data-anchor-id="step-1-the-sr-method-for-generating-criteria-weights"><span class="header-section-number">3.1.1</span> Step 1: The SR method for generating criteria weights</h4>
<p>Here is the formula where <img src="https://latex.codecogs.com/png.latex?N"> is the number of criteria, and <img src="https://latex.codecogs.com/png.latex?w_i%5E%7BSR%7D"> is the weight for the <img src="https://latex.codecogs.com/png.latex?i%5E%7Bth%7D"> criterion <span class="citation" data-cites="Danielson2017_doi10.1007/978-3-319-52624-9_2">[1]</span>.<sup>1</sup></p>
<p><img src="https://latex.codecogs.com/png.latex?%0Aw_i%5E%7BSR%7D%20=%20%5Cfrac%7B1/i%20+%20%5Cfrac%7BN+1-i%7D%7BN%7D%7D%7B%5Csum_%7Bj=1%7D%5EN%20(1/i%20+%20%5Cfrac%7BN+1-i%7D%7BN%7D)%7D%0A"></p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">DataFrames</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">StatsBase</span></span>
<span id="cb1-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_rank_weights</span>(n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int64</span>)</span>
<span id="cb1-4">    num <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zeros</span>(n)</span>
<span id="cb1-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n</span>
<span id="cb1-6">        num[i] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>i) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ( (n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> i) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> n )</span>
<span id="cb1-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb1-8">    wi <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> num <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(num)</span>
<span id="cb1-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> wi</span>
<span id="cb1-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb1-11">wi <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_rank_weights</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>6-element Vector{Float64}:
 0.3361344537815126
 0.22408963585434175
 0.1680672268907563
 0.12605042016806722
 0.0896358543417367
 0.05602240896358543</code></pre>
</div>
</div>
<p>The weights sum to 1, as expected.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(wi))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>1.0</code></pre>
</div>
</div>
</section>
</section>
<section id="step-2-evaluators-rank-the-criteria" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="step-2-evaluators-rank-the-criteria"><span class="header-section-number">3.2</span> Step 2: Evaluators rank the criteria</h3>
<p>Five evaluators rank the criteria based on their expertise.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1">eval1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mileage"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Color"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Price"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Safety"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reliability"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Value"</span>]</span>
<span id="cb5-2">eval2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mileage"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Color"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Safety"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reliability"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Value"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Price"</span>]</span>
<span id="cb5-3">eval3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Color"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Value"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Price"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mileage"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reliability"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Safety"</span>]</span>
<span id="cb5-4">eval4 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mileage"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Value"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Color"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Safety"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reliability"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Price"</span>]</span>
<span id="cb5-5">eval5 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Safety"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Price"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Color"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reliability"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mileage"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Value"</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>6-element Vector{String}:
 "Safety"
 "Price"
 "Color"
 "Reliability"
 "Mileage"
 "Value"</code></pre>
</div>
</div>
<p>Next, we organize the evaluator criteria rankings and the SR method criteria weights into a data frame with three columns:</p>
<ul>
<li>evaluators (optional)</li>
<li>evaluator_rankings (required)</li>
<li>weights (required)</li>
</ul>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1">ne <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>; <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of evaluators</span></span>
<span id="cb7-2">nc <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>; <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number for criteria</span></span>
<span id="cb7-3">evaluators <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">string</span>.(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>ne)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>], inner<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([nc]))</span>
<span id="cb7-4">evaluator_rankings <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vcat</span>( eval1, eval2, eval3, eval4, eval5 )</span>
<span id="cb7-5">weights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>( wi, ne )</span>
<span id="cb7-6">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DataFrame</span>(</span>
<span id="cb7-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hcat</span>(evaluators, evaluator_rankings, weights), </span>
<span id="cb7-8">    [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"evaluator"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"criteria"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weight"</span>]</span>
<span id="cb7-9">    )</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div class="data-frame"><p>30 rows × 3 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">evaluator</th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>eval1</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>eval1</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>eval1</td>
<td>Price</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>eval1</td>
<td>Safety</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>eval1</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>eval1</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>eval2</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>eval2</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>eval2</td>
<td>Safety</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>eval2</td>
<td>Reliability</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>eval2</td>
<td>Value</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>eval2</td>
<td>Price</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>eval3</td>
<td>Color</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>eval3</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>eval3</td>
<td>Price</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>eval3</td>
<td>Mileage</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>eval3</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>eval3</td>
<td>Safety</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>eval4</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>eval4</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>eval4</td>
<td>Color</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>eval4</td>
<td>Safety</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>eval4</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>eval4</td>
<td>Price</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>eval5</td>
<td>Safety</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>eval5</td>
<td>Price</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>eval5</td>
<td>Color</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>eval5</td>
<td>Reliability</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>eval5</td>
<td>Mileage</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>eval5</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="step-3-calculate-mean-criteria-weights" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="step-3-calculate-mean-criteria-weights"><span class="header-section-number">3.3</span> Step 3: Calculate mean criteria weights</h3>
<p>Calculate mean criteria weights using split-apply-combine workflow. In other words, stratifying by criterion, what is the mean weight for each criterion (attribute)?</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## split</span></span>
<span id="cb8-2">gdf <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">groupby</span>(df, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>criteria)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<p><b>GroupedDataFrame with 6 groups based on key: criteria</b></p><p><i>First Group (5 rows): criteria = "Mileage"</i></p><div class="data-frame">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">evaluator</th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>eval1</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>eval2</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>eval3</td>
<td>Mileage</td>
<td>0.12605</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>eval4</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>eval5</td>
<td>Mileage</td>
<td>0.0896359</td>
</tr>
</tbody>
</table>
<p>⋮</p>
<p><em>Last Group (5 rows): criteria = "Value"</em></p>
<div class="data-frame">
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">evaluator</th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>eval1</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>eval2</td>
<td>Value</td>
<td>0.0896359</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>eval3</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>eval4</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>eval5</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## combine and apply </span></span>
<span id="cb9-2">crit_weights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">combine</span>(gdf, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&gt;</span> mean)</span>
<span id="cb9-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort!</span>(crit_weights, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>weight_mean, rev <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div class="data-frame"><p>6 rows × 2 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight_mean</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Mileage</td>
<td>0.244818</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Safety</td>
<td>0.162465</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Price</td>
<td>0.134454</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Value</td>
<td>0.129972</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Reliability</td>
<td>0.104202</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>These are the final criteria weights and, as expected, they sum to 1.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(crit_weights.weight_mean))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>1.0</code></pre>
</div>
</div>
<p>In this example, mileage (M) has the highest weight (24.5%) and reliability (R) has the lowest weight (10.4%).</p>
<p>In a future blog, I will show how to score the alternatives (Honda Civic, Toyota Corolla, and Subaru Impreza) with these weighted criteria, and then making a final ranking of which car to select.</p>
</section>
</section>
<section id="appendix" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="appendix"><span class="header-section-number">4</span> Appendix</h2>
<section id="function-to-automate-calculating-mean-weights" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="function-to-automate-calculating-mean-weights"><span class="header-section-number">4.1</span> Function to automate calculating mean weights</h3>
<p>We created the <code>calculate_rank_weights</code> function to calculate the weights for <img src="https://latex.codecogs.com/png.latex?n"> criteria using the SR method. Then we used Julia to calculate the mean weights for five evaluators.</p>
<p>Now we create a final function to automate calculating the mean weights. This function will handle an arbitrary number of vectors with rankings, or a matrix created from those vectors beforehand. Notice that this new function will call our previous <code>calculate_rank_weights</code> function.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_mean_weights</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>)</span>
<span id="cb12-2">    x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hcat</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>)</span>
<span id="cb12-3">    ncrit, neval <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">size</span>(x, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">size</span>(x, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb12-4">    wts_i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_rank_weights</span>(ncrit)</span>
<span id="cb12-5">    weights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>( wts_i, neval )</span>
<span id="cb12-6">    evaluators <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>( </span>
<span id="cb12-7">        [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">string</span>.(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>neval)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>], </span>
<span id="cb12-8">        inner <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([ncrit])</span>
<span id="cb12-9">    )</span>
<span id="cb12-10">    evalvator_rankings <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reshape</span>(x, ncrit <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> neval)</span>
<span id="cb12-11">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DataFrame</span>( </span>
<span id="cb12-12">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hcat</span>(evaluators, evaluator_rankings, weights), </span>
<span id="cb12-13">        [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"evaluator"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"criteria"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weight"</span>] </span>
<span id="cb12-14">    )</span>
<span id="cb12-15">    gdf <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">groupby</span>(df, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>criteria)</span>
<span id="cb12-16">    mean_wts <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort!</span>(</span>
<span id="cb12-17">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">combine</span>(gdf, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&gt;</span> mean), </span>
<span id="cb12-18">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>weight_mean, rev <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb12-19">    )   </span>
<span id="cb12-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> (</span>
<span id="cb12-21">        weights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> mean_wts,</span>
<span id="cb12-22">        data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df</span>
<span id="cb12-23">    )</span>
<span id="cb12-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>calculate_mean_weights (generic function with 1 method)</code></pre>
</div>
</div>
<p>Here we test passing vectors as arguments to the <code>calculate_mean_weights</code> function.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1">r1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_mean_weights</span>(eval1, eval2, eval3, eval4, eval5);</span></code></pre></div>
</div>
<p>The results are saved in <code>r1</code> and the semi-colon (<code>;</code>) suppresses the output. We use <code>typeof</code> function to evaluate the type of <code>r1</code>.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">typeof</span>(r1)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>NamedTuple{(:weights, :data), Tuple{DataFrame, DataFrame}}</code></pre>
</div>
</div>
<p>We see that <code>r1</code> is a NamedTuple and it contains two data frames named <code>weights</code> and <code>data</code>. We can index each separately.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1">r1.weights</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div class="data-frame"><p>6 rows × 2 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight_mean</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Mileage</td>
<td>0.244818</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Safety</td>
<td>0.162465</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Price</td>
<td>0.134454</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Value</td>
<td>0.129972</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Reliability</td>
<td>0.104202</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1">r1.data</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div class="data-frame"><p>30 rows × 3 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">evaluator</th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>eval1</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>eval1</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>eval1</td>
<td>Price</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>eval1</td>
<td>Safety</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>eval1</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>eval1</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>eval2</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>eval2</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>eval2</td>
<td>Safety</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>eval2</td>
<td>Reliability</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>eval2</td>
<td>Value</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>eval2</td>
<td>Price</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>eval3</td>
<td>Color</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>eval3</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>eval3</td>
<td>Price</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>eval3</td>
<td>Mileage</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>eval3</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>eval3</td>
<td>Safety</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>eval4</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>eval4</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>eval4</td>
<td>Color</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>eval4</td>
<td>Safety</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>eval4</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>eval4</td>
<td>Price</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>eval5</td>
<td>Safety</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>eval5</td>
<td>Price</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>eval5</td>
<td>Color</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>eval5</td>
<td>Reliability</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>eval5</td>
<td>Mileage</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>eval5</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Next, we create the matrix of evaluator data and then pass it to the <code>calculate_mean_weights</code> function.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1">eval_rankings_tab <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hcat</span>(eval1, eval2, eval3, eval4, eval5)</span>
<span id="cb19-2">r2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_mean_weights</span>(eval_rankings_tab);</span></code></pre></div>
</div>
<p>The results are saved in <code>r</code> and the semi-colon (<code>;</code>) suppresses the output. We use <code>typeof</code> function to evaluate the type of <code>r2</code>.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">typeof</span>(r2)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>NamedTuple{(:weights, :data), Tuple{DataFrame, DataFrame}}</code></pre>
</div>
</div>
<p>We see that <code>r2</code> is a NamedTuple and it contains two data frames named <code>weights</code> and <code>data</code>. We can index each separately.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1">r2.weights</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div class="data-frame"><p>6 rows × 2 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight_mean</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Mileage</td>
<td>0.244818</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Safety</td>
<td>0.162465</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Price</td>
<td>0.134454</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Value</td>
<td>0.129972</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Reliability</td>
<td>0.104202</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1">r2.data</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div class="data-frame"><p>30 rows × 3 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">evaluator</th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>eval1</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>eval1</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>eval1</td>
<td>Price</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>eval1</td>
<td>Safety</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>eval1</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>eval1</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>eval2</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>eval2</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>eval2</td>
<td>Safety</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>eval2</td>
<td>Reliability</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>eval2</td>
<td>Value</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>eval2</td>
<td>Price</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>eval3</td>
<td>Color</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>eval3</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>eval3</td>
<td>Price</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>eval3</td>
<td>Mileage</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>eval3</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>eval3</td>
<td>Safety</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>eval4</td>
<td>Mileage</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>eval4</td>
<td>Value</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>eval4</td>
<td>Color</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>eval4</td>
<td>Safety</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>eval4</td>
<td>Reliability</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>eval4</td>
<td>Price</td>
<td>0.0560224</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>eval5</td>
<td>Safety</td>
<td>0.336134</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>eval5</td>
<td>Price</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>eval5</td>
<td>Color</td>
<td>0.168067</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>eval5</td>
<td>Reliability</td>
<td>0.12605</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>eval5</td>
<td>Mileage</td>
<td>0.0896359</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>eval5</td>
<td>Value</td>
<td>0.0560224</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The <code>calculate_mean_weights</code> function worked for both vectors or a matrix. This was possible because of the splat operator (<code>...</code>) as in the two lines below.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_mean_weights</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>)</span>
<span id="cb24-2">    x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hcat</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>)</span></code></pre></div>
</div>
</section>
<section id="review-of-selected-julia-code" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="review-of-selected-julia-code"><span class="header-section-number">4.2</span> Review of selected Julia code</h3>
<p>Did you know you can use tuples to bind variable names to values?</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1">x, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">33</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>(33, 99)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1">x</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>33</code></pre>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1">y</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>99</code></pre>
</div>
</div>
<p>This is super handy when we want to swap values between variables in one step.</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1">x, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> y, x</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>(99, 33)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1">x</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>99</code></pre>
</div>
</div>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1">y</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>33</code></pre>
</div>
</div>
<p>Here is how to prefill arrays:</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">zeros</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>2×3 Matrix{Float64}:
 0.0  0.0  0.0
 0.0  0.0  0.0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ones</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>2×3 Matrix{Float64}:
 1.0  1.0  1.0
 1.0  1.0  1.0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb41-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fill</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>2×3 Matrix{Int64}:
 1  1  1
 1  1  1</code></pre>
</div>
</div>
<p>The <code>reshape</code> function reshapes an array.</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb43-1">A <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Vector</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>16-element Vector{Int64}:
  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16</code></pre>
</div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reshape</span>(A, (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>4×4 Matrix{Int64}:
 1  5   9  13
 2  6  10  14
 3  7  11  15
 4  8  12  16</code></pre>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb47-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reshape</span>(A, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>2×8 Matrix{Int64}:
 1  3  5  7   9  11  13  15
 2  4  6  8  10  12  14  16</code></pre>
</div>
</div>
<p>Her is vertical concatenation (<code>vcat</code>): (<code>hcat</code>):</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb49-1">x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>]</span>
<span id="cb49-2">y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>]</span>
<span id="cb49-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vcat</span>(x, y)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>6-element Vector{Int64}:
 1
 2
 4
 4
 5
 6</code></pre>
</div>
</div>
<p>Here is horizontal concatenation (<code>hcat</code>):</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hcat</span>(x, y)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>3×2 Matrix{Int64}:
 1  4
 2  5
 4  6</code></pre>
</div>
</div>
<p>The <code>!</code> operator signifies mutating (permanently changing) an object:</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## combine and apply </span></span>
<span id="cb53-2">crit_weights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">combine</span>(gdf, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&gt;</span> mean)</span>
<span id="cb53-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort!</span>(crit_weights, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>weight_mean, rev <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">true</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<div class="data-frame"><p>6 rows × 2 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">criteria</th>
<th data-quarto-table-cell-role="th">weight_mean</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Any">Any</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Mileage</td>
<td>0.244818</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Color</td>
<td>0.22409</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Safety</td>
<td>0.162465</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Price</td>
<td>0.134454</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Value</td>
<td>0.129972</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Reliability</td>
<td>0.104202</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The <code>repeat</code> function repeat a pattern.</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb54-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>], <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>6-element Vector{Int64}:
 2
 5
 2
 5
 2
 5</code></pre>
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb56-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## equivalent to above</span></span>
<span id="cb56-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>], outer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>6-element Vector{Int64}:
 2
 5
 2
 5
 2
 5</code></pre>
</div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb58-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>], inner<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>6-element Vector{Int64}:
 2
 2
 2
 5
 5
 5</code></pre>
</div>
</div>
<p>Generating array of strings. Note how the splat (<code>...</code>) operator works.</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb60-1">[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">string</span>.(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>1-element Vector{Vector{String}}:
 ["eval1", "eval2", "eval3"]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb62" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb62-1">[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">string</span>.(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>3-element Vector{String}:
 "eval1"
 "eval2"
 "eval3"</code></pre>
</div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb64" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb64-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">string</span>.(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)], inner<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>2-element Vector{Vector{String}}:
 ["eval1", "eval2", "eval3"]
 ["eval1", "eval2", "eval3"]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb66" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb66-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eval"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">string</span>.(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>], inner<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repeat</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>6-element Vector{String}:
 "eval1"
 "eval1"
 "eval2"
 "eval2"
 "eval3"
 "eval3"</code></pre>
</div>
</div>



</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Danielson2017_doi10.1007/978-3-319-52624-9_2" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Danielson M, Ekenberg L. Trade-offs for ordinal ranking methods in multi-criteria decisions. In: Bajwa D, Koeszegi ST, Vetschera R, editors. Group decision and negotiation Theory, empirical evidence, and application [Internet]. Cham: Springer International Publishing; 2017. p. 16–27. Available from: <a href="https://doi.org/10.1007/978-3-319-52624-9_2">https://doi.org/10.1007/978-3-319-52624-9_2</a></div>
</div>
<div id="ref-Kaminski2023-isbn978-1633439368" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Kaminski B. Julia for data analysis. New York, NY: Manning Publications; 2023. </div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>The SR method was selected because it was the best performing.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Julia</category>
  <category>R</category>
  <category>Python</category>
  <category>Data science</category>
  <category>Programming</category>
  <category>Decision intelligence</category>
  <category>Scientific computing</category>
  <guid>https://drtomasaragon.github.io/posts/2023-03-31-criteria-weights-for-decisions/index.html</guid>
  <pubDate>Fri, 31 Mar 2023 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2023-03-31-criteria-weights-for-decisions/images/book_cover_julia_for_data_analysis_1400x865.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Showing “respect for people”</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2023-03-24-respect-for-people/index.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is part of the series <em><a href="https://drtomasaragon.github.io/#category=The%20CDPH%20Way">The CDPH Way—Becoming the best at getting better</a></em>.</p>
<p>For background, here is an <a href="https://app.box.com/s/qdkfdg6up953gin7zwj7ojtcomvu3725">overview slide set</a> and <a href="https://app.box.com/s/dy09jpugvognm8x3oz56mt379o6vygbo">lean reporting templates</a>.</p>
</div>
</div>
<p>At the California Department of Public Health (CDPH) we are on journey of lean transformation. <strong>Lean thinking and practice</strong> is “systematically developing people to solve problems and consuming the fewest possible resources while continuously improving processes to provide value to community members and prosperity to society”<sup>1</sup> The value pillars of lean are “respect for people” and “continuous improvement.” These two pillars, along with four additional components, make up the <strong>lean operating sytem</strong> at the CDPH:</p>
<ol type="1">
<li><strong>Respect for people</strong> (staff, community, client, patient, customer)</li>
<li><strong>Continuous improvement</strong> (<a href="https://www.lean.org/lexicon-terms/kata/">improvement kata</a>)</li>
<li><strong>Scientific thinking</strong>, <strong>problem solving</strong>, and <strong>innovation</strong> (<a href="https://www.lean.org/?s=a3+thinking">A3 thinking</a>)</li>
<li>Management by <strong>Objectives</strong> (goals) and <strong>Key Results</strong> (measures) (<a href="https://www.whatmatters.com/faqs/okr-meaning-definition-example">OKRs</a>)</li>
<li>Being <strong>agile</strong>, <strong>adaptive</strong>, and <strong>responsive</strong> to meet challenges and opportunities</li>
<li>Elimination of <strong>waste</strong> and <strong>undesired variability</strong> in inputs, processes, outputs, and outcomes</li>
</ol>
<p>To be a lean organization, these six components are required, and if one is missing, organizational effectiveness and mission will suffer. Every health organization should strive to be a lean organization, and it starts with “respect for people.”</p>
<p>However, what does it mean to respect people? What does it mean to give respect and to feel respected?<sup>2</sup></p>
<p>To be respectful, first we must understand the concept of “universal values.” <strong>Universal values</strong> are values that apply to everyone, everywhere and leaves no one behind, including our adversaries. I learned the concept of universal values from Dr.&nbsp;Monica Sharma, former director of leadership development at the United Nations, and author of <em>Radical Transformational Leadership: Strategic Action for Change Agents</em> <span class="citation" data-cites="Sharma2017_isbn978-1583948958">[1]</span>.</p>
<p>In tackling complex public health problems around the world, Dr.&nbsp;Sharma discovered that universal values enabled stakeholders to transcend differences, find common ground, and solve problems together. The universal values she discovered to be the most effective and robust are dignity, equity, and compassion. To this short list I added humility. With authenticity and integrity, we should strive to embody and promote universal values in every interaction and in every conversation.</p>
<p>The first universal value is <strong>humility</strong>. To be humble is to believe genuinely that you are not better or more important than any person you are engaging with regardless of their social or occupational status, wealth, or ability.</p>
<p>The second universal value is <strong>compassion</strong>. To understand compassion, we must distinguish it from sympathy and empathy. With sympathy I care about your suffering. With empathy I feel your suffering. With compassion I want to relieve your suffering. Be aware and mindful: because of our implicit (nonconscious) biases we are more likely to empathize with people “like us” (eg, tribalism). Instead, we endeavor to have empathy for those unlike us, and to have compassion towards those who are vulnerable or suffering even if we do not share values.</p>
<p>The third universal value is <strong>equity</strong>; that is, to treat everyone with fairness regardless of their social or occupational status, wealth, or ability. Fairness does not mean everyone is treated equally, but rather we are responsive to their needs. When we are humble, compassionate, and fair with others, especially when we differ by social or occupational status, wealth, or ability, then they will feel dignity — “the quality or state of being worthy, honored, or esteemed.”<sup>3</sup></p>
<p>The fourth universal value is <strong>dignity</strong>. When we engage others, and we embody and promote the universal values of humility, compassion, and equity (fairness), then they are more likely to experience dignity—and to feel respected. Dignity is also “the right of a person to be valued and respected for their own sake, and to be treated ethically.”<sup>4</sup></p>
<p>The universal values of humility, compassion, equity (fairness), and dignity apply to everyone, everywhere, including your adversaries. Universal values apply where you live, learn, work, play, and pray.</p>
<p>I started with humility because it is a very deep and powerful concept. There are different types of humility we should cultivate.</p>
<p><strong>General humility</strong> “is the noble choice to forgo your status, deploy your resources or use your influence for the good of others before yourself” <span class="citation" data-cites="Dickson2011_isbn978-0310328629">[2]</span>.</p>
<p><strong>Intellectual humility</strong> is a mindset<sup>5</sup> that involves recognizing and owning our intellectual limitations in service of pursuing deeper knowledge, truth, and understanding <span class="citation" data-cites="Porter2022_PMID35789951">[3]</span>.</p>
<p><strong>Cultural humility</strong> is committing to lifelong learning and critical self-reflection; realizing our power, privilege, and biases; redressing power imbalances for respectful partnerships; and for promoting institutional accountability (<a href="https://inclusion.uoregon.edu/what-cultural-humility-basics">learn more</a>).</p>
<p>Discovering and cultivating your ability to be humble will supercharge your learning, your relationships, and your effectiveness.</p>
<section id="chatgpt-query" class="level2">
<h2 class="anchored" data-anchor-id="chatgpt-query">ChatGPT query</h2>
<p>To get a consensus view on respect for people in the lean health care context, I queried ChatGPT which provided a very reasonable answer.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
From ChatGPT on 2023-03-23
</div>
</div>
<div class="callout-body-container callout-body">
<p>For lean in the health care context, what is the best way to show respect for people?</p>
<p>“Showing respect for people is a fundamental value in lean quality improvement, and it can be demonstrated in various ways. Here are some best ways to show respect for people:</p>
<ul>
<li><strong>Listen actively</strong>: Listening actively is an important part of showing respect for people. When someone is speaking, pay attention, show interest, and ask questions to clarify and better understand their perspective.</li>
<li><strong>Value diversity</strong>: Value the diversity of people’s backgrounds, experiences, and perspectives. Recognize that everyone brings unique knowledge and skills to the table.</li>
<li><strong>Encourage participation</strong>: Encourage everyone to participate and share their ideas. Create a safe and supportive environment where people feel comfortable expressing themselves.</li>
<li><strong>Provide training and development</strong>: Providing training and development opportunities shows that you value people’s knowledge, skills, and expertise. It also helps people grow and develop professionally.</li>
<li><strong>Recognize and appreciate contributions</strong>: Recognize and appreciate people’s contributions and successes. Celebrate achievements and milestones, and show gratitude for their hard work and dedication.</li>
<li><strong>Provide a healthy work environment</strong>: Provide a healthy work environment that promotes well-being and work-life balance. Recognize that employees have lives outside of work and respect their personal time.</li>
</ul>
<p>By showing respect for people, organizations can create a culture of trust, collaboration, and continuous improvement. This can lead to better outcomes for patients, increased employee satisfaction, and improved overall performance.”</p>
</div>
</div>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Sharma2017_isbn978-1583948958" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Sharma M. Radical transformational leadership: Strategic action for change agents. Berkeley, California: North Atlantic Books; 2017. </div>
</div>
<div id="ref-Dickson2011_isbn978-0310328629" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Dickson J. Humilitas: A lost key to life, love, and leadership. Zondervan; 2011. </div>
</div>
<div id="ref-Porter2022_PMID35789951" class="csl-entry">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Porter T, Elnakouri A, Meyers EA, Shibayama T, Jayawickreme E, Grossmann I. Predictors and consequences of intellectual humility. Nature Reviews Psychology [Internet]. 2022 Jun;1(9):524–36. Available from: <a href="https://doi.org/10.1038/s44159-022-00081-9">https://doi.org/10.1038/s44159-022-00081-9</a></div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://www.lean.org/the-lean-post/articles/public-service-leans-next-frontier/]↩︎</p></li>
<li id="fn2"><p>See Dr.&nbsp;James Womack’s take on “respect for people” in lean practice at https://www.lean.org/the-lean-post/articles/respect-for-people/↩︎</p></li>
<li id="fn3"><p>Source: https://www.merriam-webster.com/dictionary/dignity↩︎</p></li>
<li id="fn4"><p>Source: https://en.wikipedia.org/wiki/Dignity↩︎</p></li>
<li id="fn5"><p>Source: https://www.templeton.org/discoveries/intellectual-humility↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>CDPH Way</category>
  <category>The CDPH Way</category>
  <category>Lean</category>
  <category>Dignity</category>
  <category>Compassion</category>
  <category>Equity</category>
  <category>Humility</category>
  <category>Leadership</category>
  <category>Universal values</category>
  <category>Continuous improvement</category>
  <guid>https://drtomasaragon.github.io/posts/2023-03-24-respect-for-people/index.html</guid>
  <pubDate>Fri, 24 Mar 2023 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2023-03-24-respect-for-people/images/cultural-respect_1200x741.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>California State of Public Health</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2023-03-19-california-state-of-public-health/index.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>I presented the <strong>California State of Public Health</strong> to the California State Assembly on <a href="https://www.assembly.ca.gov/media/assembly-budget-subcommittee-no-1-health-and-human-services-20230306">March 6, 2023</a> (starting at 31:31min), and to the California State Senate on <a href="https://www.senate.ca.gov/media/senate-budget-subcommittee-3-20230316/video">March 16, 2023</a>.</p>
<p>Huge thanks to Julie Nagasako, director of CDPH’s new Office of Policy and Planning, and her amazing data team!!!</p>
</div>
</div>
<p>Good morning/afternoon, Chair, and members, I am Dr.&nbsp;Tomás Aragón, State Public Health Officer, and Director of the California Department of Public Health. It’s an honor to be here today to present on the State of Public Health in California.</p>
<p>At CDPH, our mission is “to advance the health and well-being of California’s diverse people and communities” with the vision that all Californians enjoy “healthy communities with thriving families and individuals.”</p>
<p>Health is not the absence of disease or injury—it’s a state of complete physical, mental, and social well-being. The Institute of Medicine defined public health as “what we, as a society, collectively do to assure the conditions in which people can be healthy.”</p>
<p>Public health is OUR collective endeavor to protect, promote, and improve the health of our communities.</p>
<p>Unfortunately, the field of public health is often misunderstood and sometimes confused with health care which is the provision of medical services to an enrolled population.<sup>1</sup></p>
<p>For comparison, here are the four pillars of the public health approach:</p>
<ol type="1">
<li>First, <strong>ecological-social</strong>—or “eco-social”—which is the relationship of people with their family and social networks, and with their neighborhood and environment; in other words, health happens where we live, learn, work, play, and pray. Think of COVID-19 pandemic and its widespread impacts. Think of the health impacts from climate change</li>
<li>Second, <strong>life course and inter-generational</strong> processes. Think of Adverse Childhood Experiences and toxic stress, and the inter-generational transmission of the social and biological effects of adversity and trauma</li>
<li>Third, <strong>equity and health equity</strong>. Think of low-income communities and essential workers with higher rates of COVID-19 exposure, illness, hospitalization, and death. Think of the disproportionate impacts of violence and mental illness on communities of color, especially Black/African Americans.</li>
<li>Fourth, <strong>prevention</strong> focus, especially <strong>primary prevention</strong>: Think of laws reducing availability of tobacco products and exposure to second-hand smoke. Think of Smarter Street designs, vehicle standards, seatbelts and child safety seats, and robust safe mobility options to reduce road fatalities.</li>
</ol>
<p>Well, what have we accomplished collectively? Over the last 20 years, public health has contributed to significant improvements in health and well-being for all groups in California. For example,</p>
<ul>
<li><p>The death rate for lung cancer has decreased by 57% since 2001,<span class="citation" data-cites="cdph2023-communityburden-web"><sup>1</sup></span> thanks to comprehensive tobacco control efforts creating a social and legal context in which tobacco is less desirable, acceptable, and accessible.<span class="citation" data-cites="cdph2020-tobacco-control-web"><sup>2</sup></span></p></li>
<li><p>The HIV death rate decreased by 71% between 2001 and 2021 for all groups, and by 73% for Black individuals (the group with the highest rate).</p></li>
<li><p>Birth rates among adolescents decreased by 78% between 2000 and 2020 due to improved access to public health prevention strategies, including comprehensive sexual health education, clinical services, and promotion of healthy relationships and communication practices.<span class="citation" data-cites="cdph2022-adolescent-births-dashboard-web"><sup>3</sup></span></p></li>
</ul>
<p>Despite declines in mortality for all groups in California, significant racial and ethnic health disparities continue. For example,</p>
<ul>
<li>Overall life expectancy is 10 to 12 years less for Black individuals (12.6 for males, 10.3 for females) compared to Asian individuals with the highest life expectancy.</li>
<li>The rate for alcohol-related deaths is the fourth leading cause of death for American Indian and Alaska Native individuals and is 14 times higher compared to Asian individuals.</li>
<li>The pregnancy-associated mortality rate is about 3.5 times higher among Black women than among white women.</li>
<li>The HIV/STD death rate is 11 times higher for Black individuals than for Asian individuals.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></li>
</ul>
<p>Public health works to reduce these disparities by informing policies that address the underlying social, environmental, and behavioral drivers of health, and by regulating selected sectors with high impacts on health; for example, we licensed, certify, and inspect over 10,000 health facilities across the state, including over 1200 skilled nursing facilities and over 400 hospitals.</p>
<p>Equity is a foundational guiding principle in public health. Based on need, every Californian should have the resources and opportunities to be healthy and thrive. This requires prioritizing investments in communities with continuing health inequities.</p>
<p>Today, California faces some of the toughest public health challenges in decades. These challenges include COVID-19, chronic diseases like cardiovascular disease and Alzheimer’s, mental illness and substance use disorder, firearm-related death and injury, and health impacts from climate change and extreme weather. CDPH is building capacity to tackle these public health priorities.</p>
<p>Climate change is a major force impacting the public’s health, affecting all aspects of our health and well-being—affecting access to clean air, food, water, shelter, and physical safety.</p>
<ul>
<li>Heat waves, droughts, wildfires and wildfire smoke, and floods result in illnesses, injuries, and deaths, as well as loss of livelihoods—contributing to unemployment, poverty, and housing instability.</li>
<li>Direct and indirect effects increase chronic and infectious diseases, mental health challenges, and heat- and smoke-related illnesses.</li>
<li>The impacts have the greatest toll on the health of those already experiencing health, social, and economic inequities.</li>
<li>Public health monitors population health impacts and partners with state and local government and private sectors to embed the public health approach in efforts to address these challenges.</li>
</ul>
<p>Life expectancy steadily increased for 20 years prior to 2020, but due to impacts of the COVID-19 pandemic, we experienced a sharp drop in life expectancy.</p>
<ul>
<li>In 2021, COVID-19 was the leading cause of death and years of life lost, with over 43,000 Californians losing their life to COVID-19.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></li>
<li>Millions more experienced severe illness, hospitalization, disruption to education and work, sometimes loss of jobs or housing.</li>
<li>COVID-19 highlighted and exacerbated existing health inequities. The COVID-19 death rate was significantly higher for Native Hawaiian and Pacific Islanders (409 per 100,000), Blacks (303 per 100,000), and Latinos (263 per 100,000) compared to the statewide rate (247 per 100K).<span class="citation" data-cites="cdph2023-age-race-ethnicity-data-web"><sup>5</sup></span> Low-income communities suffered disproportionately. They live in crowded conditions, work in essential frontline jobs, and had more exposure to COVID-19. They had less access to resources, creating gaps in health care, information, housing, and economic security.</li>
</ul>
<p>Through OUR collective actions we provided testing, vaccination, treatment, and public health guidance. This led to significant reductions in cases, hospitalizations, and deaths between 2020 and 2021. In 2022, COVID-19 dropped to the third leading cause of death.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span> Now in 2023 we have reached the lowest levels since the pre-pandemic period—enabling activities of daily life to resume more safely.</p>
<p>COVID-19 will remain with us for the foreseeable future, including the uncertain burden of “long COVID.” Using lessons learned from the pandemic, the California SMARTER plan enables us to manage COVID-19 today and prepare for future surges and variants, as well as respond to emerging infectious diseases.<span class="citation" data-cites="ca2022-smarter-plan"><sup>6</sup></span></p>
<p>Last year, CDPH leveraged the COVID response infrastructure and the SMARTER Plan to respond to the mpox outbreak. We were able to activate systems for surveillance, vaccination, and treatment to highly impacted communities.</p>
<ul>
<li>14-day average case rates have fallen from more than 90 per day in August 2022 to less than 1 case per day.<span class="citation" data-cites="cdph2023-ca-mpox-data-web"><sup>7</sup></span></li>
<li>CDPH distributed vaccine and antiviral treatment statewide, supported vaccination events, and provided disease prevention messaging.</li>
<li>Almost 300,000 vaccine doses have been administered to more than 180,000 people, with 116,000 persons receiving two doses.<span class="citation" data-cites="cdph2023-ca-mpox-data-web"><sup>7</sup></span></li>
</ul>
<p>Again, at the end of 2022, we leveraged the COVID response infrastructure to address the simultaneous surge of COVID-19, influenza, and RSV. We tracked disease levels and their real-time and projected impacts on the healthcare system. CDPH provided data to local partners and policymakers to guide the response to this “tripledemic.”</p>
<p>The Governor’s 2023 Budget Proposal continues investments to support the state’s efforts to protect against COVID-19 and other public health threats.</p>
<p>California’s population is growing older. By 2030, 1 in 4 Californians will be over 60 years old.<span class="citation" data-cites="cda2022-master-plan-for-aging-web"><sup>8</sup></span></p>
<p>Ischemic heart disease and Alzheimer’s disease continue to be the top leading causes of death for Californians.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></p>
<p>Cardiovascular diseases contributed to the most deaths in 2021. This condition group includes ischemic heart disease, stroke, and hypertensive heart disease, all of which are in the top five leading causes of death.</p>
<ul>
<li>During the pandemic period, rates of ischemic heart disease increased—countering a long-term trend of decline. Data for 2021 showed that the downward trend has returned, reaching an all-time low (37,903 deaths in 2021 compared with 53,577 in 2001).</li>
<li>Most cardiovascular conditions can be prevented by addressing behavioral risk factors such as tobacco use, unhealthy diet and obesity, physical inactivity, and harmful alcohol consumption. However, recognizing that deeply rooted social and economic inequities are the drivers of many health behaviors, public health informs policies that improve community conditions so all people can enjoy safe, walkable neighborhoods, access to healthy foods, and affordable housing.</li>
</ul>
<p>Deaths from Alzheimer’s disease have more than doubled since 2000, and about 1 in 10 adults in California experience subjective cognitive decline or memory loss.<span class="citation" data-cites="cdc2020-behavioral-risk-factor-survey-web"><sup>9</sup></span> CDPH collaborates with stakeholders to support the <strong>Master Plan for Aging</strong><span class="citation" data-cites="cda2022-master-plan-for-aging-web"><sup>8</sup></span> to prevent and prepare for the growing number of Alzheimer’s cases and forge a path forward for families. Several conditions other than COVID-19 show substantial increases in death rates over the past two years. These include deaths related to alcohol, road injury, and drug overdose. By far, drug overdose has caused the largest increase, with deaths increasing by over 200% between 2011 and 2021.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></p>
<ul>
<li>This began with a 63% increase in the pre-pandemic period.</li>
<li>This increase surged dramatically during the pandemic period, with an additional 79% increase in just two years, and over 10,000 deaths in 2021.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></li>
<li>In 2019, drug overdose deaths overtook ischemic heart disease as the top cause of years of life lost.</li>
<li>Between 2019 and 2021, there was also a 38% increase in homicides after many years of decreasing or level rates.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span> This was driven by an increase in firearm-related homicides.<span class="citation" data-cites="cdph2020-homicide-in-ca-web"><sup>10</sup></span></li>
<li>Exposure to gun violence traumatizes survivors and communities, impacting mental health and social well-being.</li>
</ul>
<p>Many public health challenges start early in life among children, youth, and young adults, impacting their life course trajectory of physical, mental, and emotional health and well-being. Children and youth are dealing with unprecedented challenges due to the COVID-19 pandemic. As of September 2022, almost 38,000 of California’s children under 18 had lost a parent or caregiver due to COVID-19.<span class="citation" data-cites="imperialcollege2023-children-covid19-web"><sup>11</sup></span> This type of loss has long-term health consequences and contributes to Adverse Childhood Experiences, or ACEs. Toxic stress over time from ACEs can alter brain development and affect the body’s response to stress. ACEs are linked to chronic health problems, mental health issues, and substance misuse in adulthood. In California, about 6 in 10 adults report experiencing at least one ACE before the age of 18. [cdphcdss2017-aces-in-ca-report-web]</p>
<p>Public Health works with the Department of Social Services and the Office of the Surgeon General to promote policies that prevent ACEs and build safe, stable, nurturing relationships and environments through programs like home visiting.</p>
<p>In the United States, mental health conditions affect more than half of people over their lifetime and contribute to worse overall health and risk of death by suicide.<span class="citation" data-cites="cdc2021-mental-health-web"><sup>12</sup></span></p>
<ul>
<li>In California, serious mental illness and substance use disorders have a significant impact on young adults, with mood disorders and schizophrenia as the first and third leading causes of hospitalization, respectively, for Californians aged 15 to 24.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></li>
<li>Mental health conditions are the second leading cause of years lived with disability for Californians, and the leading cause for children between the ages of 5 to 14, emphasizing the need to strengthen prevention, early identification, and compassionate care.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></li>
</ul>
<p>Untreated mental health problems or substance use and addiction can result in injury and premature death.</p>
<ul>
<li>In 2021, over 4,000 Californians died by suicide.<span class="citation" data-cites="cdph2023-communityburden-web"><sup>1</sup></span></li>
<li>The overall number of suicide deaths has decreased since 2018 because of decreases in older persons.</li>
<li>In contrast, suicide and self-harm are among the top five causes of death for ages 15 to 44 and rates have been rising in recent years among young Black and Latino Californians.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web cdph2022-suicide-youth-web"><sup>4,13</sup></span></li>
<li>Hospitalizations and emergency department visits for mental health-related conditions are higher among Black individuals than for any other race or ethnic group.<span class="citation" data-cites="cdph2023-state-assessment-core-module-web"><sup>4</sup></span></li>
</ul>
<p>The Governor’s proposed budget demonstrates steadfast commitment to advancing the health and well-being of all of California’s communities, while prioritizing the most vulnerable, through critical investments in the behavioral health system, social safety net programs, and the public health infrastructure.</p>
<ul>
<li>Recent public health efforts aim to prevent addiction and overdose through harm reduction strategies, public awareness and education, recovery, and support services, as well as innovative approaches to make naloxone and fentanyl test strips more widely available.</li>
<li>The California <strong>Child and Youth Behavioral Health Initiative</strong> (CYBHI)<span class="citation" data-cites="chhs2021_cybhi"><sup>14</sup></span> is an interdepartmental collaborative effort to transform the behavioral health system to be responsive to the current needs of our children and youth. CDPH is leading an educational campaign to normalize seeking support for mental health challenges, and to de-stigmatize behavioral health in communities.</li>
</ul>
<p>The Budget provides support for core public health infrastructure. Through the <strong>Future of Public Health Initiative</strong>,<span class="citation" data-cites="cdph2021-future-of-public-health-pdf"><sup>15</sup></span> the State invested $300 million to modernize state ($99.6M) and local ($200.4M) public health infrastructure and to transition to a more resilient system. Centered on equity, we are building our capacity and capabilities in long-term strategic planning and policy development; workforce development; data modernization, data science, and decision intelligence; emergency preparedness and response; health care partnerships to improve population health management; community engagement and partnerships; and recruitment and retention of a diverse workforce that reflects the communities we serve. This funding is already at work, with many new staff hired across the state to support this transformation.</p>
<p>CDPH is an agency with over 220 programs and 4000 staff, but PUBLIC HEALTH is what WE do collectively to ensure the conditions in which every Californian can be healthy and thrive.</p>
<p>Thank you for your leadership and support!!!</p>
<section id="acknowledgments" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgments">Acknowledgments</h2>
<p>Special thanks to Ms.&nbsp;Julie Nagasako, Director of the Office of Policy and Planning at the California Department of Public Health. Ms.&nbsp;Nagasako and her team prepared initial drafts and conducted all the analyses.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-cdph2023-communityburden-web" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Office of Policy and Planning. <em>California Community Burden of Disease Engine: A Toolset for Epidemiologic Analysis and Scientific Insight. VP3.0</em>. California Department of Public Health; 2023. <a href="https://www.cdph.ca.gov/Programs/CCDPHP/DCDIC/CTCB/CDPH%20Document%20Library/ResearchandEvaluation/FactsandFigures/30YearsOfSuccessAndInnovation.pdf">https://www.cdph.ca.gov/Programs/CCDPHP/DCDIC/CTCB/CDPH%20Document%20Library/ResearchandEvaluation/FactsandFigures/30YearsOfSuccessAndInnovation.pdf</a></div>
</div>
<div id="ref-cdph2020-tobacco-control-web" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">California Tobacco Control Program. <em>30 Years of Success and Innovation: Celebrating the Past, Present, and Future of Tobacco Control in California</em>. California Department of Public Health; 2020. <a href="https://www.cdph.ca.gov/Programs/CCDPHP/DCDIC/CTCB/CDPH%20Document%20Library/ResearchandEvaluation/FactsandFigures/30YearsOfSuccessAndInnovation.pdf">https://www.cdph.ca.gov/Programs/CCDPHP/DCDIC/CTCB/CDPH%20Document%20Library/ResearchandEvaluation/FactsandFigures/30YearsOfSuccessAndInnovation.pdf</a></div>
</div>
<div id="ref-cdph2022-adolescent-births-dashboard-web" class="csl-entry">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Center for Family Health, Maternal, Child, and Adolescent Health Division. <em>Adolescent Births Dashboard</em>. California Department of Public Health; 2022. <a href="https://www.cdph.ca.gov/Programs/CFH/DMCAH/surveillance/Pages/adolescent-births.aspx">https://www.cdph.ca.gov/Programs/CFH/DMCAH/surveillance/Pages/adolescent-births.aspx</a></div>
</div>
<div id="ref-cdph2023-state-assessment-core-module-web" class="csl-entry">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Office of Policy and Planning. <em>California State Health Assessment Core Module 2023 Update</em>. California Department of Public Health; 2023. <a href="https://skylab.cdph.ca.gov/communityBurden/_w_1454ffe8/SOPH/2023/Full%20Report.html">https://skylab.cdph.ca.gov/communityBurden/_w_1454ffe8/SOPH/2023/Full%20Report.html</a></div>
</div>
<div id="ref-cdph2023-age-race-ethnicity-data-web" class="csl-entry">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Center for Infectious Diseases, Division of Communicable Disease Control. <em>COVID-19 Age, Race and Ethnicity Data</em>. California Department of Public Health; 2023. <a href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/COVID-19/Age-Race-Ethnicity.aspx">https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/COVID-19/Age-Race-Ethnicity.aspx</a></div>
</div>
<div id="ref-ca2022-smarter-plan" class="csl-entry">
<div class="csl-left-margin">6. </div><div class="csl-right-inline">Office of Governor Gavin Newsom. <em>California SMARTER PLan: The Next Phase of California’s COVID-19 Response</em>. State of California; 2022. <a href="https://covid19.ca.gov/smarter/">https://covid19.ca.gov/smarter/</a></div>
</div>
<div id="ref-cdph2023-ca-mpox-data-web" class="csl-entry">
<div class="csl-left-margin">7. </div><div class="csl-right-inline">Center for Infectious Diseases, Division of Communicable Disease Control. <em>Mpox Data in California</em>. California Department of Public Health; 2023. <a href="https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/Mpox-Data.aspx">https://www.cdph.ca.gov/Programs/CID/DCDC/Pages/Mpox-Data.aspx</a></div>
</div>
<div id="ref-cda2022-master-plan-for-aging-web" class="csl-entry">
<div class="csl-left-margin">8. </div><div class="csl-right-inline">California Department for Aging. <em>Master Plan for Aging</em>. California Health; Human Services Agency; 2021. <a href="https://mpa.aging.ca.gov/">https://mpa.aging.ca.gov/</a></div>
</div>
<div id="ref-cdc2020-behavioral-risk-factor-survey-web" class="csl-entry">
<div class="csl-left-margin">9. </div><div class="csl-right-inline"><em>Alzheimer’s Disease and Healthy Aging Data Portal</em>. <span>Centers for Disease Control and Prevention</span> <a href="https://www.cdc.gov/aging/agingdata/index.html">https://www.cdc.gov/aging/agingdata/index.html</a></div>
</div>
<div id="ref-cdph2020-homicide-in-ca-web" class="csl-entry">
<div class="csl-left-margin">10. </div><div class="csl-right-inline">Center for Healthy Communities, Injury and Violence Prevention Branch. <em>Homicide in California: Trends in 2020</em>. California Department of Public Health; 2020. <a href="https://www.cdph.ca.gov/Programs/CCDPHP/DCDIC/SACB/CDPH%20Document%20Library/CA%20Violent%20Death%20Reporting%20System%20(CalVDRS)/CalVDRS_HomicidePandemicFactSheet2020.pdf">https://www.cdph.ca.gov/Programs/CCDPHP/DCDIC/SACB/CDPH%20Document%20Library/CA%20Violent%20Death%20Reporting%20System%20(CalVDRS)/CalVDRS_HomicidePandemicFactSheet2020.pdf</a></div>
</div>
<div id="ref-imperialcollege2023-children-covid19-web" class="csl-entry">
<div class="csl-left-margin">11. </div><div class="csl-right-inline">Global Reference Group for Children Affected by COVID-19. <em>COVID-19-Associated Orphanhood and Caregiver Death in the United States</em>. California Department of Public Health; 2023. <a href="https://imperialcollegelondon.github.io/orphanhood_USA">https://imperialcollegelondon.github.io/orphanhood_USA</a></div>
</div>
<div id="ref-cdc2021-mental-health-web" class="csl-entry">
<div class="csl-left-margin">12. </div><div class="csl-right-inline"><em>About Mental Health</em>. Centers for Disease Control; Prevention <a href="https://www.cdc.gov/mentalhealth/learn/index.htm">https://www.cdc.gov/mentalhealth/learn/index.htm</a></div>
</div>
<div id="ref-cdph2022-suicide-youth-web" class="csl-entry">
<div class="csl-left-margin">13. </div><div class="csl-right-inline">Center for Healthy Communities, Injury and Violence Prevention Branch. <em>Unpublished Analysis: Suicide Rates Among Youth (Ages 10-24) in California, 2011-2020, Based on Comprehensive Master Death File and DOF p-3 Population Projection File Data</em>. California Department of Public Health; 2022.</div>
</div>
<div id="ref-chhs2021_cybhi" class="csl-entry">
<div class="csl-left-margin">14. </div><div class="csl-right-inline"><em>Children and Youth Behavioral Health Initiative</em>. <span>California Health and Human Services</span> <a href="https://www.chhs.ca.gov/home/children-and-youth-behavioral-health-initiative/">https://www.chhs.ca.gov/home/children-and-youth-behavioral-health-initiative/</a></div>
</div>
<div id="ref-cdph2021-future-of-public-health-pdf" class="csl-entry">
<div class="csl-left-margin">15. </div><div class="csl-right-inline">Future of Public Health Work Group. <em>Investments and Capabilities Needed for the Future Public Health System</em>. <span>California Department of Public Health</span>; 2021. <a href="https://www.cdph.ca.gov/Programs/DO/CDPH%20Document%20Library/Future-of-Public-Health-Memo.pdf">https://www.cdph.ca.gov/Programs/DO/CDPH%20Document%20Library/Future-of-Public-Health-Memo.pdf</a></div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>In 1986, Congress enacted the Emergency Medical Treatment &amp; Labor Act (EMTALA) to ensure public access to emergency services regardless of ability to pay.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>California</category>
  <category>Public health</category>
  <category>State Assembly</category>
  <category>State Senate</category>
  <category>Budget hearing</category>
  <category>Health Officer</category>
  <category>CDPH Director</category>
  <guid>https://drtomasaragon.github.io/posts/2023-03-19-california-state-of-public-health/index.html</guid>
  <pubDate>Sun, 19 Mar 2023 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2023-03-19-california-state-of-public-health/images/state_of_public_health_assembly_hearing_1216x760.png" medium="image" type="image/png" height="90" width="144"/>
</item>
<item>
  <title>Julia for Data Analysis</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2023-02-20-julia-for-data-analysis/index.html</link>
  <description><![CDATA[ 




<section id="overview" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="overview"><span class="header-section-number">1</span> Overview</h2>
<p>Julia is an open source, general purpose programming language for scientific computing and is well suited for data science. I taught R programming for several years at the UC Berkeley School of Public Health. I recently posted a blog entry on why I switched from R to Julia (“<a href="../2023-01-14-my-journey-from-r-to-julia/index.html">My Journey from R to Julia</a>”). In this blog entry I review the book “<a href="https://www.manning.com/books/julia-for-data-analysis">Julia for Data Analysis</a>” by Bogumit Kaminski <span class="citation" data-cites="Kaminski2023-isbn978-1633439368">[1]</span>. In short, this is an outstanding book that I highly recommend without any reservations (5/5 stars). This review is a working blog that I will be updating with highlights from the book.</p>
<p>For data science, Julia is exploding in popularity and there are numerous outstanding <a href="https://julialang.org/learning/">resources for learning Julia</a>, including books, videos, and blog postings. I purchased the print and eBook option which includes an online “liveBook” which is easy to read. However, we cannot beat having a book in hand to read and markup. The author provides a GitHub <a href="https://github.com/bkamins/JuliaForDataAnalysis">repository</a> with code and data files.</p>
<p>The author, Bogumit Kaminski, is a core developer of the <a href="https://dataframes.juliadata.org/stable/">DataFrames.jl</a> package. He is an associate professor and head of the Decision Support and Analysis Unit at the SGH Warsaw School of Economics, as well as adjunct professor at the data science laboratory, Ryerson University, Toronto.</p>
<p>This book is perfect for population health data scientists already familiar with R or Python, or already have basic proficiency with Julia but need an in depth and systematic introduction to Julia for data science.</p>
<p>Here is the table of contents.</p>
<ol type="1">
<li>Introduction</li>
<li>Getting started with Julia</li>
<li>Julia’s support for scaling projects</li>
<li>Working with collections in Julia</li>
<li>Advanced topics on handling collections</li>
<li>Working with strings</li>
<li>Handling time-series data and missing values</li>
<li>First steps with data frames</li>
<li>Getting data from a data frame</li>
<li>Creating data frame objects</li>
<li>Converting and grouping data frames</li>
<li>Mutating and transforming data frames</li>
<li>Advanced transformations of data frames</li>
<li>Creating web services for sharing data analysis results</li>
</ol>
</section>
<section id="book-highlights" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="book-highlights"><span class="header-section-number">2</span> Book highlights</h2>
<section id="chapter-1-introduction" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="chapter-1-introduction"><span class="header-section-number">2.1</span> Chapter 1 Introduction</h3>
<p>My blog posting “<a href="../2023-01-14-my-journey-from-r-to-julia/index.html">My Journey from R to Julia</a>” is a good summary of what is covered in the Introduction. I will cover just one item—execution speed, and compare it to R.</p>
<p>We will construct a <code>for</code> loop summation of a random sequence of integers from 1 to 1,000,000,000 (1 billion) that are sampled without replacment.<sup>1</sup> Here is the correct answer as a reference:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## In Julia</span></span>
<span id="cb1-2">julia<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1_000_000_000</span>)</span>
<span id="cb1-3"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">500000000500000000</span></span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## In R</span></span>
<span id="cb1-6"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">options</span>(digits<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb1-7"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>)</span>
<span id="cb1-8">[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.000000005e+17</span></span></code></pre></div>
</div>
<p>By default, R would give the wrong answer (not shown) because it uses 64-bit floating point numbers.<sup>2</sup> To get the correct answer we need 64-bit integers. For this I used the <code>bit64</code> R package to get the correct answer (below).</p>
<!--
require("bit64")
n = 100;
samp = sample(1:n, n, replace=FALSE);
sum_n = function(x){
    s = as.integer64(0)
    for (i in x){
        s = s + i
    }
    s
}
system.time(x <- sum_n(samp))
x
####
options(digits=20)
sum_n = function(n){
    s = 0
    for (i in 1:n){
        s = s + i
    }
    s
}
system.time(x <- sum_n(1000000000))
x
-->
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bit64"</span>)</span>
<span id="cb2-2"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span></span>
<span id="cb2-3"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> samp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, n, replace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>FALSE)</span>
<span id="cb2-4"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> sum_n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x){</span>
<span id="cb2-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>     s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> as.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">integer64</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb2-6"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>     <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> x){</span>
<span id="cb2-7"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>         s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> i</span>
<span id="cb2-8"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>     }</span>
<span id="cb2-9"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>     s</span>
<span id="cb2-10"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> }</span>
<span id="cb2-11"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> system.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">time</span>(x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_n</span>(samp))</span>
<span id="cb2-12">     user    system   elapsed </span>
<span id="cb2-13"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">11094.792</span>   <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">101.378</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">11201.145</span> </span>
<span id="cb2-14"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> x</span>
<span id="cb2-15">integer64</span>
<span id="cb2-16">[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">500000000500000000</span></span></code></pre></div>
</div>
<p>To get the correct answer in R, the execution time was about <strong>11,095 seconds</strong>. Okay, let’s try Julia.</p>
<!--
using StatsBase, BenchmarkTools
n = 1_000_000_000;
samp = sample(1:n, n, replace=false);
function sum_n(x)
    s = 0
    for i in x
        s = s + i
    end
    return s
end
@btime sum_n(samp)
-->
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1">julia<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">StatsBase</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">BenchmarkTools</span></span>
<span id="cb3-2">julia<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1_000_000_000</span>;</span>
<span id="cb3-3">julia<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> samp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>n, n, replace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">false</span>);</span>
<span id="cb3-4">julia<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_n</span>(x)</span>
<span id="cb3-5">           s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-6">               <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> x</span>
<span id="cb3-7">                   s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> i</span>
<span id="cb3-8">               <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-9">               <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> s</span>
<span id="cb3-10">       <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb3-11">sum_n (generic <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> with <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> method)</span>
<span id="cb3-12"></span>
<span id="cb3-13">julia<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">@btime</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum_n</span>(samp)</span>
<span id="cb3-14">  <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">158.118</span> ms (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> allocation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span> bytes)</span>
<span id="cb3-15"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">500000000500000000</span></span></code></pre></div>
</div>
<p>In Julia, it took about <strong>158 milliseconds</strong>. R is about <strong>70,168 times slower</strong> than Julia!<sup>3</sup></p>
<p>Conclusion: Compared to R, Julia can handle large <code>for</code> loops for summation and give an accurate answer fast. To add integers correctly using a <code>for</code> loop, R requires using the <code>bit64</code> package but is 70,168 time slower than Julia. With R, we are taught to avoid <code>for</code> loops — now you know why. However, a <code>for</code> loop is a workhorse tool that we want available to us; hence, this a huge advantage of Julia.</p>
<p>To see more benchmarks visit <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/index.html">Which programming language is fastest?</a>.</p>
</section>
<section id="getting-started-with-julia" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="getting-started-with-julia"><span class="header-section-number">2.2</span> 2 Getting started with Julia</h3>
<section id="basic-data-types" class="level4" data-number="2.2.1">
<h4 data-number="2.2.1" class="anchored" data-anchor-id="basic-data-types"><span class="header-section-number">2.2.1</span> Basic data types</h4>
<p>If you are familar with R or Python, you will feel comfortable with Julia. Here is a <strong>character</strong>:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## character; notice single quotation marks</span></span>
<span id="cb4-2"><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">'a'</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>'a': ASCII/Unicode U+0061 (category Ll: Letter, lowercase)</code></pre>
</div>
</div>
<p>A <strong>string</strong> is a collection of characters:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## string; notice double quotation marks</span></span>
<span id="cb6-2"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hello World"</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>"Hello World"</code></pre>
</div>
</div>
<p>An <strong>array</strong> is a collection in brackets. A <strong>vector</strong> is a 1-dimensional array. Commas are used to create a vector. By default, the vector is displayed vertically, but it is not a “column vector”.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## vector</span></span>
<span id="cb8-2">[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>3-element Vector{Int64}:
 1
 2
 3</code></pre>
</div>
</div>
<p>To display horizontally use the <code>show</code> function.<sup>4</sup></p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## vector</span></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">show</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3]</code></pre>
</div>
</div>
<p>A <strong>matrix</strong> is a two-dimensional array. Numbers separated by spaces create one row of a <strong>matrix</strong>. This is not a vector.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## matrix</span></span>
<span id="cb12-2">[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>1×4 Matrix{Int64}:
 1  2  3  4</code></pre>
</div>
</div>
<p>Matrix rows separated by a semi-colon creates a multi-row matrix:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## matrix</span></span>
<span id="cb14-2">[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>; <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>2×4 Matrix{Int64}:
 1  2  3  4
 6  7  8  9</code></pre>
</div>
</div>
<p>The <code>size</code> function returns the dimensions of an array. Previously, we learned that a vector is a 1-dimensional array.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">size</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>(3,)</code></pre>
</div>
</div>
<p>We see this vector is 1-dimensional (<code>(3,)</code>); in contrast,</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">size</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>(1, 3)</code></pre>
</div>
</div>
<p>this is a <code>(1, 3)</code> matrix or 2-dimensional.</p>
<p>A <strong>tuple</strong> is a collection in parentheses, and commas separate the elements. Above, the <code>size</code> function returned a tuple. Tuples are immutable; their elements cannot be changed. Immutable objects increase computational speed.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## tuple</span></span>
<span id="cb20-2">(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>(1, 2, 3)</code></pre>
</div>
</div>
<p>Tuple elements can be named.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## named tuple</span></span>
<span id="cb22-2">(four <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, five <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, six <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>(four = 4, five = 5, six = 6)</code></pre>
</div>
</div>
<p>The assigment operation (<code>=</code>) is used to <strong>bind</strong> data <em>values</em> to a <strong>variable</strong>. Binding in Julia is similar to binding in Python, but not in R.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1">x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb24-2">y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> x</span>
<span id="cb24-3">y</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>2-element Vector{Int64}:
 1
 2</code></pre>
</div>
</div>
<p>If we change an element in <code>x</code>, the same change occurs in <code>y</code> because same array was binded to the variables <code>x</code> and <code>y</code>.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1">x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span></span>
<span id="cb26-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## notice that y changes also</span></span>
<span id="cb26-3">y</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>2-element Vector{Int64}:
  1
 99</code></pre>
</div>
</div>
<p>This is not the case in R:</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb28-2"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> x</span>
<span id="cb28-3"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span></span>
<span id="cb28-4"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> x</span>
<span id="cb28-5">[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]  <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span></span>
<span id="cb28-6"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> y</span>
<span id="cb28-7">[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span></code></pre></div>
</div>
<p>To replicate the R experience in Julia we assign a copy of <code>x</code> to <code>y</code>.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1">x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb29-2">y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">copy</span>(x)</span>
<span id="cb29-3">x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span></span>
<span id="cb29-4">x</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>2-element Vector{Int64}:
  1
 99</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1">y</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>2-element Vector{Int64}:
 1
 2</code></pre>
</div>
</div>
</section>
<section id="basic-functions" class="level4" data-number="2.2.2">
<h4 data-number="2.2.2" class="anchored" data-anchor-id="basic-functions"><span class="header-section-number">2.2.2</span> Basic functions</h4>
<p>In my blog posting “<a href="../2023-01-14-my-journey-from-r-to-julia/index.html">My Journey from R to Julia</a>” I demonstrated how to create a simple function to calculate the odds ratio using 3 methods with multiple dispatch.<sup>5</sup> I will use the function that calculates the odds ratio using the cross-product of 4 integers, and build a more useful function to illustrate some features of Julia.</p>
<p>For an appropriately structured table, for example,</p>
<table class="table">
<thead>
<tr class="header">
<th>Exposure</th>
<th style="text-align: center;">Disease</th>
<th style="text-align: center;">No disease</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Yes</td>
<td style="text-align: center;">a</td>
<td style="text-align: center;">b</td>
</tr>
<tr class="even">
<td>No</td>
<td style="text-align: center;">c</td>
<td style="text-align: center;">d</td>
</tr>
</tbody>
</table>
<p>the odds ratio is the cross-product:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AOR%20=%20%5Cfrac%7Ba%20d%7D%7Bb%20c%7D%0A"></p>
<p>Here is a simple Julia function to calculate the odds ratio:</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(a, b, c, d)</span>
<span id="cb33-2">    or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c)</span>
<span id="cb33-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> or</span>
<span id="cb33-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> </span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>oddsratio (generic function with 1 method)</code></pre>
</div>
</div>
<p>Because this is a simple function, it can also be created in an abbreviated form:</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(a, b, c, d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>oddsratio (generic function with 1 method)</code></pre>
</div>
</div>
<p>Here is data from a case-control study <span class="citation" data-cites="Aragon2003_pmid12515584">[2]</span>:</p>
<table class="table">
<thead>
<tr class="header">
<th>Exposure</th>
<th style="text-align: right;">Case</th>
<th style="text-align: right;">Control</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Highest</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td>Lowest</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">29</td>
</tr>
</tbody>
</table>
<p>Let’s test the <code>oddsratio</code> function by passing four integers from our 2x2 table.</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>29.0</code></pre>
</div>
</div>
<p>The function <em>arguments</em>, <code>a</code>, <code>b</code>, <code>c</code>, and <code>d</code> are called <strong>positional</strong> arguments and are always required in the correct order.</p>
<p>We now add a <strong>keyword</strong> argument which is optional. Keyword arguments are separated from the positional arguments by a semicolon (;). Any argument, positional or keyword, can be assigned a default value. We’ll create <code>oddsratio2</code>function to calculate a confidence interval using the Normal approximation. The keyword argument will have a default confidence level of 0.95.</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Distributions </span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># to access standard normal distribution </span></span>
<span id="cb39-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio2</span>(a, b, c, d; level <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>)</span>
<span id="cb39-3">    zv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quantile</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Normal</span>(), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">*</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> level))</span>
<span id="cb39-4">    est <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c)</span>
<span id="cb39-5">    log_or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(est)</span>
<span id="cb39-6">    se_log_or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>((<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>a) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>b) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>c) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>d))</span>
<span id="cb39-7">    lcl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(log_or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> zv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> se_log_or)</span>
<span id="cb39-8">    ucl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(log_or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> zv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> se_log_or)</span>
<span id="cb39-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> (</span>
<span id="cb39-10">        or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> est, </span>
<span id="cb39-11">        confint <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (lcl, ucl), </span>
<span id="cb39-12">        level <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> level</span>
<span id="cb39-13">    )</span>
<span id="cb39-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> </span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>oddsratio2 (generic function with 1 method)</code></pre>
</div>
</div>
<p>By default, <code>oddsratio2</code> will calculate the 95% confidence interval:</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb41-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio2</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>(or = 29.0, confint = (5.110695577009899, 164.55685675804662), level = 0.95)</code></pre>
</div>
</div>
<p>I can also calculate 99% confidence intervals:</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb43-1">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio2</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>; level <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.99</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>(or = 29.0, confint = (2.9619778898301936, 283.93189661797715), level = 0.99)</code></pre>
</div>
</div>
<p>And we can index elements of the named tuple.</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1">results.confint</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>(2.9619778898301936, 283.93189661797715)</code></pre>
</div>
</div>
</section>
<section id="anonymous-functions" class="level4" data-number="2.2.3">
<h4 data-number="2.2.3" class="anchored" data-anchor-id="anonymous-functions"><span class="header-section-number">2.2.3</span> Anonymous functions</h4>
<p>Functions can be arguments to functions. For example, we will create a <code>times_two</code> function and past it to other functions.</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb47-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">times_two</span>(x) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x</span>
<span id="cb47-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(times_two, [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>3-element Vector{Int64}:
  2
  4
 16</code></pre>
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb49-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(times_two, [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>22</code></pre>
</div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">StatsBase</span></span>
<span id="cb51-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(times_two, [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>7.333333333333333</code></pre>
</div>
</div>
<p>Alternatively, we can pass the <code>times_two</code> function as an anonymous function; that is, a function without a name.</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x, [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>3-element Vector{Int64}:
  2
  4
 16</code></pre>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb55" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x, [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>22</code></pre>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb57" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb57-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x, [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>7.333333333333333</code></pre>
</div>
</div>
<p>We can even calculate the odds ratio as an anonymous function.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb59" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb59-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>((a, b, c, d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c), (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>29.0</code></pre>
</div>
</div>
<p>Notice I used a trick. By default, the <code>map</code> function maps and executes a function with elements of a collection (eg, <code>[1 ,2, 8]</code>). However, for the odds ratio calcuation, I need to map the arguments <code>(a, b, c, d)</code> to their values <code>(12, 6, 2, 29)</code>, <em>then</em> calculate the odds ratio. Therefore, I used the splat operator (<code>...</code>) to break up the collection of values so that they could be mapped to their arguments first. Although I used a tuple <code>(12, 6, 2, 29)</code>, an array also works <code>[12, 6, 2, 29]</code>.</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb61-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>((a, b, c, d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c), [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">...</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>29.0</code></pre>
</div>
</div>
<p>The splat operator (<code>...</code>) converts <code>[12, 6, 2, 29]</code> to <code>12, 6, 2, 29</code> which is very convenient if the vector is very large. In this case, with only four integers, I could have passed the integers without the splat operator.</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb63" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb63-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>((a, b, c, d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>29.0</code></pre>
</div>
</div>
<p>Chapter 1 also covers other topics including loops, conditional expressions, and scoping. Chapters 3 to 7 cover practical tools for processing and managing data in Julia. I will focus the remainder of this book review on data frames.</p>
</section>
</section>
<section id="chapters-813-working-with-data-frames" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="chapters-813-working-with-data-frames"><span class="header-section-number">2.3</span> Chapters 8–13: Working with data frames</h3>
<p>The author is a lead developer of the <a href="https://dataframes.juliadata.org/stable/"><code>DataFrames.jl</code></a> Julia package. So in these chapters he covers this package thoroughly and you will not be disappointed. I will over cover the following:</p>
<ul>
<li>Downloading a CSV data file from a website</li>
<li>Reading a CSV file into a data frame</li>
<li>Conducting a common analytic workflows</li>
</ul>
<p>The data set we will use is from National Health and Nutrition Examination Survey Data I Epidemiologic Follow-up Study (NHEFS). The version of the NHEFS data set we will use in from Professor Migual Hernan’s textbook “<a href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">Causal Inference — What if</a>.”</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb65" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb65-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Downloads</span></span>
<span id="cb65-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">CSV</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">DataFrames</span></span>
<span id="cb65-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Downloads</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">download</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www.hsph.harvard.edu/miguel-hernan/wp-content"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb65-4">                   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/uploads/sites/1268/2019/03/nhefs.csv"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nhefs.csv"</span>)</span>
<span id="cb65-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readlines</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nhefs.csv"</span>)[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>6-element Vector{String}:
 "seqn,qsmk,death,yrdth,modth,dad" ⋯ 465 bytes ⋯ "ax71,tax82,price71_82,tax71_82"
 "233,0,0,,,,175,96,0,42,1,19,2,7" ⋯ 172 bytes ⋯ "0977,0.4437866211,0.6403808594"
 "235,0,0,,,,123,80,0,36,0,18,2,9" ⋯ 169 bytes ⋯ "994141,0.5493164063,0.79296875"
 "244,0,0,,,,115,75,1,56,1,15,3,1" ⋯ 170 bytes ⋯ "5488,0.0561981201,0.3202514648"
 "245,0,1,85,2,14,148,78,0,68,1,1" ⋯ 174 bytes ⋯ "7031,0.0547943115,0.3049926758"
 "252,0,0,,,,118,77,0,40,0,18,2,1" ⋯ 168 bytes ⋯ "994141,0.5493164063,0.79296875"</code></pre>
</div>
</div>
<p>We are using the <code>Download</code>, <code>CSV</code>, and <code>Dataframes</code> modules.<sup>6</sup></p>
<p>The data file has a header (variable names). If there is no header see p.&nbsp;191 of book.</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb67-1">nhefs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nhefs.csv"</span>, DataFrame)</span>
<span id="cb67-2">nhefs[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<div class="data-frame"><p>6 rows × 64 columns (omitted printing of 53 columns)</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">seqn</th>
<th data-quarto-table-cell-role="th">qsmk</th>
<th data-quarto-table-cell-role="th">death</th>
<th data-quarto-table-cell-role="th">yrdth</th>
<th data-quarto-table-cell-role="th">modth</th>
<th data-quarto-table-cell-role="th">dadth</th>
<th data-quarto-table-cell-role="th">sbp</th>
<th data-quarto-table-cell-role="th">dbp</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">race</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Union{Missing, Int64}">Int64?</th>
<th data-quarto-table-cell-role="th" title="Union{Missing, Int64}">Int64?</th>
<th data-quarto-table-cell-role="th" title="Union{Missing, Int64}">Int64?</th>
<th data-quarto-table-cell-role="th" title="Union{Missing, Int64}">Int64?</th>
<th data-quarto-table-cell-role="th" title="Union{Missing, Int64}">Int64?</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>233</td>
<td>0</td>
<td>0</td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td>175</td>
<td>96</td>
<td>0</td>
<td>42</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>235</td>
<td>0</td>
<td>0</td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td>123</td>
<td>80</td>
<td>0</td>
<td>36</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>244</td>
<td>0</td>
<td>0</td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td>115</td>
<td>75</td>
<td>1</td>
<td>56</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>245</td>
<td>0</td>
<td>1</td>
<td>85</td>
<td>2</td>
<td>14</td>
<td>148</td>
<td>78</td>
<td>0</td>
<td>68</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>252</td>
<td>0</td>
<td>0</td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td>118</td>
<td>77</td>
<td>0</td>
<td>40</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>257</td>
<td>0</td>
<td>0</td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td><em>missing</em></td>
<td>141</td>
<td>83</td>
<td>1</td>
<td>43</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>To see all the variable names we will take the vector of 64 names and reshape them into a 16 by 4 matrix for display purposes.</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb68" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb68-1">vn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(nhefs)</span>
<span id="cb68-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reshape</span>(vn, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>16×4 Matrix{String}:
 "seqn"       "wt71"               "hayfever"        "hbpmed"
 "qsmk"       "wt82"               "diabetes"        "boweltrouble"
 "death"      "wt82_71"            "polio"           "wtloss"
 "yrdth"      "birthplace"         "tumor"           "infection"
 "modth"      "smokeintensity"     "nervousbreak"    "active"
 "dadth"      "smkintensity82_71"  "alcoholpy"       "exercise"
 "sbp"        "smokeyrs"           "alcoholfreq"     "birthcontrol"
 "dbp"        "asthma"             "alcoholtype"     "pregnancies"
 "sex"        "bronch"             "alcoholhowmuch"  "cholesterol"
 "age"        "tb"                 "pica"            "hightax82"
 "race"       "hf"                 "headache"        "price71"
 "income"     "hbp"                "otherpain"       "price82"
 "marital"    "pepticulcer"        "weakheart"       "tax71"
 "school"     "colitis"            "allergies"       "tax82"
 "education"  "hepatitis"          "nerves"          "price71_82"
 "ht"         "chroniccough"       "lackpep"         "tax71_82"</code></pre>
</div>
</div>
</section>
<section id="the-split-apply-combine-workflow" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="the-split-apply-combine-workflow"><span class="header-section-number">2.4</span> The split-apply-combine workflow</h3>
<p>We will apply a common workflow (Figure&nbsp;1):</p>
<ol type="1">
<li><strong>split</strong> (stratify) the data by one or more variables</li>
<li><strong>apply</strong> a function to each strata</li>
<li><strong>combine</strong> the results into a table</li>
</ol>
<div id="fig-split" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2023-02-20-julia-for-data-analysis/images/phds_split_apply_combine_workflow.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: The split-apply-combine is a common workflow in data science.</figcaption>
</figure>
</div>
<p>For split-apply-combine we will conduct the following analysis:</p>
<ul>
<li>Stratified by sex and race, what is the proportion of deaths?</li>
<li>Stratified by sex and race, what is the mean age?</li>
</ul>
<p>We start by creating smaller data set with these four variables, and describing them.</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb70" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb70-1">nhefs4 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nhefs[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>,[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>death,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>sex,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>age,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>race]]</span>
<span id="cb70-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">describe</span>(nhefs4)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<div class="data-frame"><p>4 rows × 7 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">variable</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">median</th>
<th data-quarto-table-cell-role="th">max</th>
<th data-quarto-table-cell-role="th">nmissing</th>
<th data-quarto-table-cell-role="th">eltype</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Symbol">Symbol</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="DataType">DataType</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>death</td>
<td>0.195212</td>
<td>0</td>
<td>0.0</td>
<td>1</td>
<td>0</td>
<td>Int64</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>sex</td>
<td>0.509515</td>
<td>0</td>
<td>1.0</td>
<td>1</td>
<td>0</td>
<td>Int64</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>age</td>
<td>43.9153</td>
<td>25</td>
<td>44.0</td>
<td>74</td>
<td>0</td>
<td>Int64</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>race</td>
<td>0.131983</td>
<td>0</td>
<td>0.0</td>
<td>1</td>
<td>0</td>
<td>Int64</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>For “split” we use the <code>groupby</code> function, and for “apply” and “combine” we use the <code>combine</code> function. I also insert a column with description of strate (eg, “white female”).</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb71-1">gdf <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">groupby</span>(nhefs4, [<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>sex, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>race])</span>
<span id="cb71-2">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">combine</span>(gdf,</span>
<span id="cb71-3">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>death <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&gt;</span> mean,</span>
<span id="cb71-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>age <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&gt;</span> mean)</span>
<span id="cb71-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">insertcols!</span>(results, </span>
<span id="cb71-6">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>strata <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&gt;</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white male"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black male"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white female"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black female"</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div class="data-frame"><p>4 rows × 5 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">death_mean</th>
<th data-quarto-table-cell-role="th">age_mean</th>
<th data-quarto-table-cell-role="th">strata</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th data-quarto-table-cell-role="th" title="String">String</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0</td>
<td>0</td>
<td>0.239716</td>
<td>44.5262</td>
<td>white male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>0</td>
<td>1</td>
<td>0.276596</td>
<td>45.0638</td>
<td>black male</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>1</td>
<td>0</td>
<td>0.141044</td>
<td>43.3808</td>
<td>white female</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>1</td>
<td>1</td>
<td>0.190083</td>
<td>42.595</td>
<td>black female</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Conclusions:</p>
<ul>
<li>In 1971, the mean age of males was slightly higher than the mean age of females.</li>
<li>By 1992, a higher proportion of males died.</li>
<li>By 1992, within sex strata, a higher proportion of Blacks died compared to whites.</li>
</ul>
</section>
</section>
<section id="appendix-data-dictionary-for-nhefs-data-file" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="appendix-data-dictionary-for-nhefs-data-file"><span class="header-section-number">3</span> Appendix: Data dictionary for NHEFS data file</h2>
<p>Download data dictionary which is an Microsoft Excel XLSX file.</p>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb72" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb72-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Downloads</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">download</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www.hsph.harvard.edu/miguel-hernan/wp-content"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb72-2">                   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/uploads/sites/1268/2012/10/NHEFS_Codebook.xls"</span>,</span>
<span id="cb72-3">                   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NHEFS_Codebook.xls"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>"NHEFS_Codebook.xls"</code></pre>
</div>
</div>
<p>Then, open up in you MS Excel and manually save as a CSV file. Although the Julia <code>XLSX.jl</code> package can read <code>.xlsx</code> files, it cannot read old <code>.xls</code> file (yet). So this is a work around.</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb74" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb74-1">cb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CSV.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NHEFS_Codebook.csv"</span>, DataFrame)</span>
<span id="cb74-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">insertcols!</span>(cb, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>row <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">64</span>)</span>
<span id="cb74-3">cb[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<div class="data-frame"><p>20 rows × 3 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">row</th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Description</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="String31">String31</th>
<th data-quarto-table-cell-role="th" title="String">String</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>1</td>
<td>active</td>
<td>IN YOUR USUAL DAY, HOW ACTIVE ARE YOU? IN 1971, 0:very active, 1:moderately active, 2:inactive</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>2</td>
<td>age</td>
<td>AGE IN 1971</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>3</td>
<td>alcoholfreq</td>
<td>HOW OFTEN DO YOU DRINK? IN 1971 0: Almost every day, 1: 2-3 times/week, 2: 1-4 times/month, 3: &lt; 12 times/year, 4: No alcohol last year, 5: Unknown</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>4</td>
<td>alcoholhowmuch</td>
<td>WHEN YOU DRINK, HOW MUCH DO YOU DRINK? IN 1971</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>5</td>
<td>alcoholpy</td>
<td>HAVE YOU HAD 1 DRINK PAST YEAR? IN 1971, 1:EVER, 0:NEVER; 2:MISSING</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>6</td>
<td>alcoholtype</td>
<td>WHICH DO YOU MOST FREQUENTLY DRINK? IN 1971 1: BEER, 2: WINE, 3: LIQUOR, 4: OTHER/UNKNOWN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>7</td>
<td>allergies</td>
<td>USE ALLERGIES MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>8</td>
<td>asthma</td>
<td>DX ASTHMA IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>9</td>
<td>bithcontrol</td>
<td>BIRTH CONTROL PILLS PAST 6 MONTHS? IN 1971 1:YES, 0:NO, 2:MISSING</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>10</td>
<td>birthplace</td>
<td>CHECK STATE CODE - SECOND PAGE</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>11</td>
<td>boweltrouble</td>
<td>USE BOWEL TROUBLE MEDICATION IN 1971, 1:EVER, 0:NEVER, ; 2:MISSING</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>12</td>
<td>bronch</td>
<td>DX CHRONIC BRONCHITIS/EMPHYSEMA IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>13</td>
<td>cholesterol</td>
<td>SERUM CHOLESTEROL (MG/100ML) IN 1971</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>14</td>
<td>chroniccough</td>
<td>DX CHRONIC COUGH IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>15</td>
<td>colitis</td>
<td>DX COLITIS IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>16</td>
<td>dadth</td>
<td>DAY OF DEATH</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>17</td>
<td>dbp</td>
<td>DIASTOLIC BLOOD PRESSURE IN 1982</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>18</td>
<td>death</td>
<td>DEATH BY 1992, 1:YES, 0:NO</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>19</td>
<td>diabetes</td>
<td>DX DIABETES IN 1971, 1:EVER, 0:NEVER, 2:MISSING</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>20</td>
<td>education</td>
<td>AMOUNT OF EDUCATION BY 1971: 1: 8TH GRADE OR LESS, 2: HS DROPOUT, 3: HS, 4:COLLEGE DROPOUT, 5: COLLEGE OR MORE</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb75" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb75-1">cb[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<div class="data-frame"><p>20 rows × 3 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">row</th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Description</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="String31">String31</th>
<th data-quarto-table-cell-role="th" title="String">String</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>21</td>
<td>exercise</td>
<td>IN RECREATION, HOW MUCH EXERCISE? IN 1971, 0:much exercise,1:moderate exercise,2:little or no exercise</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>22</td>
<td>hayfever</td>
<td>DX HAY FEVER IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>23</td>
<td>hbp</td>
<td>DX HIGH BLOOD PRESSURE IN 1971, 1:EVER, 0:NEVER, 2:MISSING</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>24</td>
<td>hbpmed</td>
<td>USE HIGH BLOOD PRESSURE MEDICATION IN 1971, 1:EVER, 0:NEVER, ; 2:MISSING</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>25</td>
<td>headache</td>
<td>USE HEADACHE MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>26</td>
<td>hepatitis</td>
<td>DX HEPATITIS IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>27</td>
<td>hf</td>
<td>DX HEART FAILURE IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>28</td>
<td>hightax82</td>
<td>LIVING IN A HIGHLY TAXED STATE IN 1982, High taxed state of residence=1, 0 otherwise</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>29</td>
<td>ht</td>
<td>HEIGHT IN CENTIMETERS IN 1971</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>30</td>
<td>income</td>
<td>TOTAL FAMILY INCOME IN 1971 11:&lt;$1000, 12: 1000-1999, 13: 2000-2999, 14: 3000-3999, 15: 4000-4999, 16: 5000-5999, 17: 6000-6999, 18: 7000-9999, 19: 10000-14999, 20: 15000-19999, 21: 20000-24999, 22: 25000+</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>31</td>
<td>infection</td>
<td>USE INFECTION MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>32</td>
<td>lackpep</td>
<td>USELACK OF PEP MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>33</td>
<td>marital</td>
<td>MARITAL STATUS IN 1971 1: Under 17, 2: Married, 3: Widowed, 4: Never married, 5: Divorced, 6: Separated, 8: Unknown</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>34</td>
<td>modth</td>
<td>MONTH OF DEATH</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>35</td>
<td>nerves</td>
<td>USE NERVES MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>36</td>
<td>nervousbreak</td>
<td>DX NERVOUS BREAKDOWN IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>37</td>
<td>otherpain</td>
<td>USE OTHER PAINS MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>38</td>
<td>pepticulcer</td>
<td>DX PEPTIC ULCER IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>39</td>
<td>pica</td>
<td>DO YOU EAT DIRT OR CLAY, STARCH OR OTHER NON STANDARD FOOD? IN 1971 1:EVER, 0:NEVER; 2:MISSING</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>40</td>
<td>polio</td>
<td>DX POLIO IN 1971, 1:EVER, 0:NEVER</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb76" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb76-1">cb[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">41</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">64</span>,<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<div class="data-frame"><p>24 rows × 3 columns</p>
<table class="data-frame table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">row</th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">Description</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th data-quarto-table-cell-role="th" title="String31">String31</th>
<th data-quarto-table-cell-role="th" title="String">String</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>41</td>
<td>pregnancies</td>
<td>TOTAL NUMBER OF PREGNANCIES? IN 1971</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>42</td>
<td>price71</td>
<td>AVG TOBACCO PRICE IN STATE OF RESIDENCE 1971 (US$2008)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>43</td>
<td>price71_82</td>
<td>DIFFERENCE IN AVG TOBACCO PRICE IN STATE OF RESIDENCE 1971-1982 (US$2008)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>44</td>
<td>price82</td>
<td>AVG TOBACCO PRICE IN STATE OF RESIDENCE 1982 (US$2008)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>45</td>
<td>qsmk</td>
<td>QUIT SMOKING BETWEEN 1ST QUESTIONNAIRE AND 1982, 1:YES, 0:NO</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>46</td>
<td>race</td>
<td>0: WHITE 1: BLACK OR OTHER IN 1971</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>47</td>
<td>sbp</td>
<td>SYSTOLIC BLOOD PRESSURE IN 1982</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>48</td>
<td>school</td>
<td>HIGHEST GRADE OF REGULAR SCHOOL EVER IN 1971</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>49</td>
<td>seqn</td>
<td>UNIQUE PERSONAL IDENTIFIER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>50</td>
<td>sex</td>
<td>0: MALE 1: FEMALE</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>51</td>
<td>smokeintensity</td>
<td>NUMBER OF CIGARETTES SMOKED PER DAY IN 1971</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>52</td>
<td>smkintensity 82_71</td>
<td>INCREASE IN NUMBER OF CIGARETTES/DAY BETWEEN 1971 and 1982</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>53</td>
<td>smokeyrs</td>
<td>YEARS OF SMOKING</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>54</td>
<td>tax71</td>
<td>TOBACCO TAX IN STATE OF RESIDENCE 1971 (US$2008)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>55</td>
<td>tax71_82</td>
<td>DIFFERENCE IN TOBACCO TAX IN STATE OF RESIDENCE 1971-1982 (US$2008)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>56</td>
<td>tax82</td>
<td>TOBACCO TAX IN STATE OF RESIDENCE 1971 (US$2008)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>57</td>
<td>tb</td>
<td>DX TUBERCULOSIS IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>58</td>
<td>tumor</td>
<td>DX MALIGNANT TUMOR/GROWTH IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>59</td>
<td>weakheart</td>
<td>USE WEAK HEART MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>60</td>
<td>wt71</td>
<td>WEIGHT IN KILOGRAMS IN 1971</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>61</td>
<td>wt82</td>
<td>WEIGHT IN KILOGRAMS IN 1982</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>62</td>
<td>wt82_71</td>
<td>WEIGHT CHANGE IN KILOGRAMS</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>63</td>
<td>wtloss</td>
<td>USE WEIGHT LOSS MEDICATION IN 1971, 1:EVER, 0:NEVER</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>64</td>
<td>yrdth</td>
<td>YEAR OF DEATH</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="updates-from-book-author" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="updates-from-book-author"><span class="header-section-number">4</span> Updates from book author</h2>
<ol type="1">
<li>What is new in DataFrames.jl 1.5. Mar 24, 2023. Available from: <a href="https://bkamins.github.io/julialang/2023/03/24/df15.html">https://bkamins.github.io/julialang/2023/03/24/df15.html</a></li>
<li>Hunting for bugs in Julia for Data Analysis. Medium. March 3, 2023. Available from: <a href="https://medium.com/bkamins/hunting-for-bugs-in-julia-for-data-analysis-ed6f4d1ce6bd">https://medium.com/bkamins/hunting-for-bugs-in-julia-for-data-analysis-ed6f4d1ce6bd</a></li>
<li>Errata and source code for book is available from <a href="https://github.com/bkamins/JuliaForDataAnalysis">https://github.com/bkamins/JuliaForDataAnalysis</a></li>
</ol>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Kaminski2023-isbn978-1633439368" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Kaminski B. Julia for data analysis. New York, NY: Manning Publications; 2023. </div>
</div>
<div id="ref-Aragon2003_pmid12515584" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Aragón TJ, Novotny S, Enanoria W, Vugia DJ, Khalakdina A, Katz MH. Endemic cryptosporidiosis and exposure to municipal tap water in persons with acquired immunodeficiency syndrome (<span>AIDS</span>): A case-control study. <span>BMC</span> Public Health [Internet]. 2003 Jan;3(1). Available from: <a href="https://doi.org/10.1186/1471-2458-3-2">https://doi.org/10.1186/1471-2458-3-2</a></div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Used Rstudio on 2021 MacBook Pro M1 Max with 32 GB RAM under Ventura 13.2.1↩︎</p></li>
<li id="fn2"><p>“The reason for the difference is that Julia uses 64-bit integers and R uses 64-bit floats by default to do these computations.” Source: https://twitter.com/BogumilKaminski/status/1629968902456311818↩︎</p></li>
<li id="fn3"><p>Notice that in Julia I can use <code>1000000000</code> or <code>1_000_000_000</code> for the number 1 billion.↩︎</p></li>
<li id="fn4"><p>In the Pluto.jl package, vectors are displayed horizontally.↩︎</p></li>
<li id="fn5"><p>To learn more visit <a href="https://freecontent.manning.com/using-multiple-dispatch-in-julia/">https://freecontent.manning.com/using-multiple-dispatch-in-julia/</a>.↩︎</p></li>
<li id="fn6"><p>https://stackoverflow.com/questions/27086159/what-is-the-difference-between-using-and-import-in-julia-when-building-a-mod↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Book review</category>
  <category>Julia</category>
  <category>R</category>
  <category>Python</category>
  <category>Data science</category>
  <category>Programming</category>
  <category>Epidemiology</category>
  <category>Scientific computing</category>
  <guid>https://drtomasaragon.github.io/posts/2023-02-20-julia-for-data-analysis/index.html</guid>
  <pubDate>Mon, 20 Feb 2023 08:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2023-02-20-julia-for-data-analysis/images/book_cover_julia_for_data_analysis_1400x865.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>My journey from R to Julia</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2023-01-14-my-journey-from-r-to-julia/index.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Also read <a href="../2023-02-20-julia-for-data-analysis/index.html">Julia for Data Analysis</a>.</p>
</div>
</div>
<section id="my-history-with-r" class="level2">
<h2 class="anchored" data-anchor-id="my-history-with-r">My history with R</h2>
<p>For 15 years, as volunteer adjunct faculty, I taught “Applied Epidemiology using R” at the UC Berkeley School of Public Health. I started teaching this course in the early 2000s when most people were not interested in <a href="https://www.r-project.org/">R</a>. Eventually R’s popularity grew, and so did my course enrollment. I taught basic R programming applied to epidemiologic concepts. Students worked on a project of their choosing. Because I had students from multiple disciplines, their projects were often very innovative and I learned a lot from them.</p>
<p>Over the 15 years I witnessed the emergence of “data science” and students’ ingenuity and creativeness in their projects. Naturally, the course evolved too. I introduced <a href="https://escholarship.org/uc/item/8000r5m5">Bayesian networks</a> as a unifying framework to introduce probablistic dependence, causal graphs, and decision networks (for decision analysis) <span class="citation" data-cites="Aragon2018_PopHealthThinking">[1]</span>.</p>
<p>I started dabbling in Python. Unfortunately, the COVID-19 pandemic interrupted my teaching because I was the health officer of San Francisco and director of the Population Health Division. Working on the pandemic response left me little time to conduct analyses or to learn Python.<sup>1</sup></p>
<p>I cannot remember when, but eventually I discovered <a href="https://julialang.org/">Julia</a>—a programming language designed for scientific computing with the intuition of Python or R, but with the speed of C++. I fell in love with Julia and I gave up on learning Python. I did not, and do not, have the time to maintain core competency in more than 1.5 programming languages.<sup>2</sup> As I learned more Julia, I became convinced, that for me, learning Julia was a better long term investment than sticking with R.</p>
<p>I use programming to explore or test my epidemiologic intuition, to learn new methods, and to visualize and analyze data. I have a personal interest in Bayesian networks, decision networks, causal inference, Markov decision processes, and agent-based modeling.<sup>3</sup></p>
<p>Here are some key Julia features that I believe epidemiologists will value:</p>
<ul>
<li>multiple dispatch (see below)</li>
<li><a href="https://docs.julialang.org/en/v1/manual/types/#Composite-Types">composite types</a></li>
<li>just-in-time compiling</li>
<li>speed (very very fast)</li>
<li>community (mostly computer science, mathematics, engineering)</li>
<li>1-based indexing like R and MATLAB (Python is 0-based indexing)</li>
<li>Capabilities similar to dpylr in R <sup>4</sup><sup>,</sup> <sup>5</sup></li>
<li><a href="https://www.datacamp.com/tutorial/pipe-r-tutorial">Pipe operator similar to %&gt;% in R</a></li>
<li>general programming language (like Python)</li>
</ul>
<p>Julia enables more intuitive programming. For example, in R, we try to avoid loops because they are very inefficient. In Julia, loops are efficient because they compile before execution. This promotes programming that is more natural.</p>
<p>Below I demonstrate <strong>multiple dispatch</strong> with a trivial example. R is single dispatch.</p>
</section>
<section id="multiple-dispatch-example-in-julia" class="level2">
<h2 class="anchored" data-anchor-id="multiple-dispatch-example-in-julia">Multiple dispatch example in Julia</h2>
<p>I was the founding developer of the R ‘epitools’ package.<sup>6</sup> I developed functions for basic epidemiologic analyses (eg, 2x2 tables), several from Rothman’s “Modern Epidemiology” textbook. For example, if I wanted to create a function to calculate an odds ratio for a 2x2 contingency table, the data could be provided in several ways:</p>
<ul>
<li>four integer counts,</li>
<li>two proportions, or</li>
<li>a 2x2 table (matrix)</li>
<li>two vectors with categorical data</li>
</ul>
<p>If I wanted to write one function to handle these possible data types as arguments, I would have to do a lot of processing and checking of data types in order to call the next function (nested or external). This requires much more work than is necessary. Let’s do this is Julia using multiple dispatch.</p>
<p>In 2003, we published a study that provided evidence that drinking unfiltered municipal tap water was associated with developing cryptosporidiosis among patients with advanced HIV disease <span class="citation" data-cites="Aragon2003_pmid12515584">[2]</span>. Here is a contingency table from this paper.</p>
<table class="table">
<thead>
<tr class="header">
<th>Exposure</th>
<th style="text-align: right;">Case</th>
<th style="text-align: right;">Control</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Highest</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td>Intermediate</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">64</td>
</tr>
<tr class="odd">
<td>Lowest</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">29</td>
</tr>
</tbody>
</table>
<p>Let’s calculate the unadjusted odds ratio comparing the highest exposure category to the lowest exposure category. Here is the 2x2 table for this calculation.</p>
<table class="table">
<thead>
<tr class="header">
<th>Exposure</th>
<th style="text-align: right;">Case</th>
<th style="text-align: right;">Control</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Highest</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td>Lowest</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">29</td>
</tr>
</tbody>
</table>
<p>For an appropriately structured table, for example,</p>
<table class="table">
<thead>
<tr class="header">
<th>Exposure</th>
<th style="text-align: right;">Case</th>
<th style="text-align: right;">Control</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Highest</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">b</td>
</tr>
<tr class="even">
<td>Lowest</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">d</td>
</tr>
</tbody>
</table>
<p>the odds ratio is the cross-product:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AOR%20=%20%5Cfrac%7Ba%20d%7D%7Bb%20c%7D%0A"></p>
<p>For a case-control design, the odds ratio is the ratio of the exposure odds.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AOR%20=%20%5Cfrac%7Bp_1/(1%20-%20p_1)%7D%7Bp_0/(1%20-%20p_0)%7D%0A"></p>
<p>We will create three functions that can receive three different types of arguments to calculate an odds ratio.</p>
<ul>
<li>four integer counts,</li>
<li>two proportions, or</li>
<li>a 2x2 table (matrix)</li>
</ul>
<p>The catch is that the three functions will have the same name: <code>oddsratio</code>. This is possible in Julia because of multiple dispatch. In contrast, R is single dispatch.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Function 1</span></span>
<span id="cb1-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>, b<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>, c<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>, d<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>)</span>
<span id="cb1-3">    or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c)</span>
<span id="cb1-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> or</span>
<span id="cb1-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> </span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>oddsratio (generic function with 1 method)</code></pre>
</div>
</div>
<p>Let’s test the <code>oddsratio</code> function by passing four integers from our 2x2 table.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>29.0</code></pre>
</div>
</div>
<p>Here is the second function to handle arguments that are proportions; for example, the exposure odds comparing cases to controls.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Function 2</span></span>
<span id="cb5-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(p1<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Float64</span>, p0<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Float64</span>)</span>
<span id="cb5-3">    or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ((p1)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> p1)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> ((p0)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> p0))</span>
<span id="cb5-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> or</span>
<span id="cb5-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>oddsratio (generic function with 2 methods)</code></pre>
</div>
</div>
<p>Let’s test the <code>oddsratio</code> function by passing two proportions from our 2x2 table.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1">prop1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probability of exposure among cases</span></span>
<span id="cb7-2">prop0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probability of exposure among controls</span></span>
<span id="cb7-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(prop1, prop0)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>28.999999999999982</code></pre>
</div>
</div>
<p>Finally, here is the third function to handle an argument that is a 2x2 table (matrix).</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Function 3</span></span>
<span id="cb9-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Matrix{Int}</span>)</span>
<span id="cb9-3">    or <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb9-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> or</span>
<span id="cb9-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>oddsratio (generic function with 3 methods)</code></pre>
</div>
</div>
<p>Let’s test the <code>oddsratio</code> function by passing our 2x2 table.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1">tab <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>; <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>2×2 Matrix{Int64}:
 12   6
  2  29</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(tab)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>29.0</code></pre>
</div>
</div>
<p>This is called multiple dispatch. The <code>oddsratio</code> function has three methods and can handle multiple data types. Notice how easy that was.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">methods</span>(oddsratio)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
# 3 methods for generic function <b>oddsratio</b> from [35mMain[39m:<ul><li> oddsratio(a::<b>Int64</b>, b::<b>Int64</b>, c::<b>Int64</b>, d::<b>Int64</b>) in Main at In[2]:2</li> <li> oddsratio(p1::<b>Float64</b>, p0::<b>Float64</b>) in Main at In[4]:2</li> <li> oddsratio(x::<b>Matrix{Int64}</b>) in Main at In[6]:2</li> </ul>
</div>
</div>
<p>Wow! Now anyone, including me, can add new methods to the <code>oddsratio</code> function without disrupting previous methods. This is very powerful. Other languages accomplish this using object-oriented programming. Julia is not an object-oriented programming lanuage.</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>In this blog entry I summarized why I switched from R to Julia. I illustrated how multiple dispatch works with functions. Notice how easy it was for me to create an <code>oddsratio</code> function with three methods to handle different argument data types (integer counts, proportions, and a matrix).</p>
<p>I enjoy Julia and you will too. You can also run R or Python from Julia without skipping a beat.</p>
<p>I will be posting simple examples that highlight Julia features applied to basic epidemiology or epidemiologic programming.</p>
</section>
<section id="appendix" class="level2">
<h2 class="anchored" data-anchor-id="appendix">Appendix</h2>
<p>Julia is very flexible in the creation of functions. Here are the same three functions in an abbreviated form.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Function 1</span></span>
<span id="cb16-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>, b<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>, c<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>, d<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Int</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> d) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> c)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>oddsratio (generic function with 3 methods)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Function 2</span></span>
<span id="cb18-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(p1<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Float64</span>, p0<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Float64</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ((p1)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> p1)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> ((p0)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> p0))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>oddsratio (generic function with 3 methods)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## Function 3</span></span>
<span id="cb20-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">oddsratio</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Matrix{Int}</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x[<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>oddsratio (generic function with 3 methods)</code></pre>
</div>
</div>
<p>From my biased perspective, Julia has a simplicity and elegance that is lacking in R.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Aragon2018_PopHealthThinking" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Aragón TJ. Population health thinking using <span>B</span>ayesian networks. University of California, eScholarship [Internet]. 2018; Available from: <a href="https://escholarship.org/uc/item/8000r5m5">https://escholarship.org/uc/item/8000r5m5</a></div>
</div>
<div id="ref-Aragon2003_pmid12515584" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Aragón TJ, Novotny S, Enanoria W, Vugia DJ, Khalakdina A, Katz MH. Endemic cryptosporidiosis and exposure to municipal tap water in persons with acquired immunodeficiency syndrome (<span>AIDS</span>): A case-control study. <span>BMC</span> Public Health [Internet]. 2003 Jan;3(1). Available from: <a href="https://doi.org/10.1186/1471-2458-3-2">https://doi.org/10.1186/1471-2458-3-2</a></div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>I did not enjoy Python.↩︎</p></li>
<li id="fn2"><p>I still use R occassionally; that is the “.5”.↩︎</p></li>
<li id="fn3"><p>The more I study the more I am humbled by the enormous talent out there. I am only stratching the surface.↩︎</p></li>
<li id="fn4"><p>See https://bkamins.github.io/julialang/2020/07/03/dplyr-vs-df.html↩︎</p></li>
<li id="fn5"><p>See https://juliadata.github.io/DataFramesMeta.jl/stable/dplyr/↩︎</p></li>
<li id="fn6"><p>See <a href="https://cran.r-project.org/web/packages/epitools/index.html" class="uri">https://cran.r-project.org/web/packages/epitools/index.html</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Julia</category>
  <category>R</category>
  <category>Python</category>
  <category>Data science</category>
  <category>Programming</category>
  <category>Epidemiology</category>
  <category>Scientific computing</category>
  <guid>https://drtomasaragon.github.io/posts/2023-01-14-my-journey-from-r-to-julia/index.html</guid>
  <pubDate>Sat, 14 Jan 2023 08:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2023-01-14-my-journey-from-r-to-julia/images/julia-programming-language-mit-00.png" medium="image" type="image/png" height="96" width="144"/>
</item>
<item>
  <title>Becoming the best at getting better</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2022-12-10-becoming-the-best-at-getting-better/index.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is part of the series <em><a href="https://drtomasaragon.github.io/#category=The%20CDPH%20Way">The CDPH Way—Becoming the best at getting better</a></em>.</p>
<p>For background, here is an <a href="https://app.box.com/s/qdkfdg6up953gin7zwj7ojtcomvu3725">overview slide set</a> and <a href="https://app.box.com/s/dy09jpugvognm8x3oz56mt379o6vygbo">lean reporting templates</a>.</p>
</div>
</div>
<section id="the-cdph-waybecoming-the-best-at-getting-better" class="level2">
<h2 class="anchored" data-anchor-id="the-cdph-waybecoming-the-best-at-getting-better">The CDPH Way—“Becoming the Best at Getting Better”</h2>
<p>As part of <a href="https://phaboard.org/">public health accreditation</a> the <a href="https://cdph.ca.gov/">California Department of Public Health</a> (CDPH) deploys a continuous improvement framework to deliver on strategic priorities. The CDPH directorate (leadership) has established three strategic priorities to drive CDPH’s lean transformation:</p>
<ol type="1">
<li>Become a <strong>learning, healing, and impactful organization</strong>
<ul>
<li>Deploy <a href="https://www.lean.org/">lean</a> with <a href="https://www.whatmatters.com/faqs/okr-meaning-definition-example">Objectives and Key Results</a> (Figure&nbsp;1)<sup>1</sup></li>
<li>Become trauma informed and responsive</li>
<li>Promote equity, antiracism and health equity</li>
</ul></li>
<li>Develop <strong>our people</strong>
<ul>
<li>Ensure core public health competencies</li>
<li>Support personal professional development</li>
</ul></li>
<li>Tackle key <strong>public health challenges</strong>
<ul>
<li>The Future of Public Health Initiative</li>
<li>Behavioral health promotion (especially youth)</li>
<li>Community and Population Health Improvement</li>
<li>Emergency readiness and pandemic recovery</li>
<li>Climate action and community resilience</li>
</ul></li>
</ol>
<p>At CDPH, we envision having 4000+ problem solvers focused on incremental and breakthrough continuous improvement and innovation using lean thinking and practice. <strong>Lean thinking and practice</strong> is “systematically developing people to solve problems and consuming the fewest possible resources <em>while</em> continuously improving processes to provide value to community members and prosperity to society.”<sup>2</sup></p>
<p><em>Every health organization, program, and team should be lean</em>. These six elements make up the <em>CDPH lean operating system</em>:</p>
<ol type="1">
<li><strong>Respect for people</strong> (staff, community, client, patient, customer)</li>
<li><strong>Continuous improvement</strong> (<a href="https://www.lean.org/lexicon-terms/kata/">improvement kata</a>)</li>
<li><strong>Scientific thinking</strong>, <strong>problem solving</strong>, and <strong>innovation</strong> (<a href="https://www.lean.org/?s=a3+thinking">A3 thinking</a>)</li>
<li>Management by <strong>Objectives</strong> (goals) and <strong>Key Results</strong> (measures) (<a href="https://www.whatmatters.com/faqs/okr-meaning-definition-example">OKRs</a>)</li>
<li>Being <strong>agile</strong>, <strong>adaptive</strong>, and <strong>responsive</strong> to meet challenges and opportunities</li>
<li>Elimination of <strong>waste</strong> and <strong>undesired variability</strong> in inputs, processes, outputs, and outcomes</li>
</ol>
<p>These six components are required and if one is missing organizational effectiveness and mission will suffer.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Every health organization, program, and team should be a lean. … These six components are required and if one is missing organizational effectiveness and mission will suffer.</p>
</div>
</div>
<p>For this blog posting I am highlighting <strong>Objectives and Key Results</strong> (Figure&nbsp;1). Before reading further, watch this 4 minute video:</p>
<div style="text-align: center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/Neu4aCB3378" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</div>
<div id="fig-okrs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2022-12-10-becoming-the-best-at-getting-better/images/okrs_coursera_what-are-okrs-okr-definition-with-diagram_orig_cropped.jpg" class="img-fluid figure-img" style="width:95.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: OKRs or Objectives and Key Results is a best practice for setting, tracking, and achieving audacious goals. OKRs was popularized by John Doerr’s best-selling book “Measure What Matters: How Google, Bono, and the Gates Foundation Rock the World with OKRs.”</figcaption>
</figure>
</div>
</section>
<section id="do-not-confuse-okrs-with-activities" class="level2">
<h2 class="anchored" data-anchor-id="do-not-confuse-okrs-with-activities">Do not confuse OKRs with Activities!</h2>
<p>A very common mistake I see is the confusion of activities (or tasks) with OKRs—they are not the same. We have</p>
<ol type="1">
<li>Objectives (goals or subgoals)</li>
<li>Key Results (measures of progress and success)</li>
<li>Activities (tasks; project management milestones)</li>
</ol>
<p>By intention, <em>OKRs focuses on the first two</em>. Obviously, activities are critical and important; that is why <em>project management</em> is essential to completing a project on time, within budget, and with high quality.</p>
<p><em>Completing a project is not the same as accomplishing your goals—do not confuse them</em>. A good project manager makes these distinctions and incorporates good goal-setting (OKRs) into project management practice.</p>
<p>Here is an acronym to help you remember: <strong>OKRA</strong> (like the vegetable!).</p>
<ul>
<li><strong>O</strong> = Objectives (goals—desired future states)</li>
<li><strong>KR</strong> = Key Results (metrics—measures of progress and success)</li>
<li><strong>A</strong> Activities (tasks—project management)</li>
</ul>
<p>When you are asked to provide OKRs, provide the OKRs and not only a long list of current and completed activities. For example, a project management milestone (“building a bridge”) is not the same as an Objective (“goal of improving commute transportation”) and Key Results (lowering commuting costs, reducing commute times, improving commuting experience, etc.).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Project management milestones are not OKRs unless they are explicitly designed to be OKRs. See next section.</p>
</div>
</div>
</section>
<section id="objectives-and-key-results-okrs-in-detail" class="level2">
<h2 class="anchored" data-anchor-id="objectives-and-key-results-okrs-in-detail">Objectives and Key Results (OKRs) in detail</h2>
<p><strong>Goal setting and tracking</strong> are at the center of all performance or improvement frameworks (eg, planning, project management, lean, Results-Based Accountability [RBA], Incident Command System [ICS]). Because of its central importance, we are using a best practice for goal setting and tracking called <strong>Objectives and Key Results</strong> (Figure&nbsp;1). OKRs is an updated version of “<a href="https://en.wikipedia.org/wiki/Management_by_objectives">management by objectives</a>” (around since the 1950s) and is used by organizations like Google, the Gates Foundation, and many others.</p>
<p>For your top priorities, answer two questions:</p>
<ol type="1">
<li><strong>What</strong> do we want to <strong>accomplish</strong>? (Objectives). Good Objectives are significant, concrete, action-oriented, and inspirational.</li>
<li><strong>How</strong> do we <strong>measure progress and success</strong>? (Key Results). Good Key Results are specific and time-bound, aggressive yet realistic, and measurable and verifiable.</li>
</ol>
<p>That’s it! Then, meet at a regular cadence to track progress on Key Results, and adjust activities to achieve your Objectives. To learn more, see <a href="https://www.whatmatters.com/get-started">https://www.whatmatters.com/get-started</a>.</p>
<p>Key Results are always connected to specific Objectives. Key Results are <em>necessary</em> and <em>sufficient</em> to accomplish the Objective. Objectives are the WHAT and Key Results are the HOW.</p>
<div style="text-align:center">
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart RL
  kr1.1([Key Result 1.1]) --&gt; o1(Objective 1)
  kr1.2([Key Result 1.2]) --&gt; o1
  kr2.1([Key Result 2.1]) --&gt; o2(Objective 2)
  kr2.2([Key Result 2.2]) --&gt; o2
</pre>
</div>
</div>
</div>
</div>
</div>
<p><em>OKRs <strong>do not replace</strong> other frameworks</em>. OKRs is a <strong>goal setting best practice</strong>, and goal setting is part of all planning, implementation, and improvement frameworks (Figure&nbsp;2).</p>
<div id="fig-leanrba" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2022-12-10-becoming-the-best-at-getting-better/images/okrs_how_it_relates_to_lean_rba_etc_v2.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Goal setting is core to all planning, implementation, and improvement frameworks. OKRs or Objectives and Key Results is a best practice for setting, tracking, and achieving your most important goals. OKRs was popularized by John Doerr’s best-selling book “Measure What Matters: How Google, Bono, and the Gates Foundation Rock the World with OKRs.”</figcaption>
</figure>
</div>
<p><em>Goal-setting</em> is at the core of many frameworks:</p>
<ul>
<li>Results-Based Accountability (RBA)</li>
<li>Incident Command System (ICS)</li>
<li>Lean management system</li>
<li>Project management</li>
<li>Policy development</li>
<li>Collective Impact</li>
<li>Planning</li>
</ul>
<p>OKRs supercharge your ability to set and achieve audacious goals by accelerating your <strong>FACTS</strong>:</p>
<ul>
<li><strong>F</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Focus</li>
<li><strong>A</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Alignment</li>
<li><strong>C</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Commitment</li>
<li><strong>T</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Tracking</li>
<li><strong>S</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Stretching</li>
</ul>
<section id="three-kinds-of-okrs" class="level3">
<h3 class="anchored" data-anchor-id="three-kinds-of-okrs">Three Kinds of OKRs</h3>
<p>OKRs are a communication tool that describe what success looks like. To reach your Objective, what do you need to accomplish? And how far do you need to stretch your efforts this cycle to get there?</p>
<p>OKRs are one of three types:</p>
<ul>
<li><strong>Committed OKR</strong>: Though still a stretch, we must achieve 100% in the next cycle.</li>
<li><strong>Aspirational OKR</strong>: A significant stretch in the next cycle; typically only 70% of these KRs will be met.</li>
<li><strong>Learning OKR</strong>: What you want to learn in the next cycle.</li>
</ul>
</section>
<section id="what-is-a-good-objective" class="level3">
<h3 class="anchored" data-anchor-id="what-is-a-good-objective">What is a good Objective?</h3>
<p>A good Objective is</p>
<ul>
<li>significant,</li>
<li>concrete,</li>
<li>action-oriented,</li>
<li>inspirational.</li>
</ul>
<p>It does not have metrics; it is your destination! Here are additional questions to ask:</p>
<ol type="1">
<li>Is the Objective a <em>meaningful</em> change?</li>
<li>Is the Objective an <em>inspiring</em> change?</li>
<li>Is the Objective an <em>audacious</em> change?</li>
<li>Is each one <em>specific</em> enough, articulating a clear <em>direction</em>?</li>
<li>Do they <em>inspire action</em> with verbs and avoid passive language?</li>
<li>Are they all <em>concise</em>? Or could you say them in a simpler way?</li>
</ol>
</section>
<section id="what-are-good-key-results" class="level3">
<h3 class="anchored" data-anchor-id="what-are-good-key-results">What are good Key Results?</h3>
<p>Good Key Results are</p>
<ul>
<li>specific and time-bound,</li>
<li>aggressive yet realistic, and</li>
<li>measurable and verifiable.</li>
</ul>
<p>Phrase each of your Key Results as an <em>input</em>, <em>process</em>, <em>output</em>, or <em>outcome</em>.</p>
<ul>
<li><strong>Inputs</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> financial, material, or human resources</li>
<li><strong>Processes</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> activities that transform inputs into outputs</li>
<li><strong>Outputs</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> delivery of products or services</li>
<li><strong>Outcomes</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> change in knowledge, behaviors, skills, conditions, etc.</li>
</ul>
<p>We have control of inputs, processes, and outputs, but usually only influence on outcomes.</p>
<p>Key Results based on outcomes are more meaningful, but more difficult to measure and track.</p>
<p>Look for <em>leading</em> indicators are predictive and provide early warning of trouble.</p>
<p>Pair <em>quantity</em> KRs with <em>quality</em> KRs</p>
<p>Determine if your KR is a <em>hold</em>, an <em>increment</em>, or a <em>leap</em></p>
<ol type="1">
<li><strong>Hold</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Keep getting the same results.</li>
<li><strong>Increment</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Improve what’s working today.</li>
<li><strong>Leap</strong> <img src="https://latex.codecogs.com/png.latex?%5Crightarrow"> Make a big step forward.</li>
</ol>
<p>The Figure&nbsp;3 (Table) summarizes Key Results and includes the Results-Based Accountability (RBA) framework. RBA is an epidemiologic framework that distinguishes program versus population results and is commonly used for collective impact approaches.</p>
<div id="fig-okrstable" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2022-12-10-becoming-the-best-at-getting-better/images/okrs_lean_rba_table_capto.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Key Results are metrics that are specific and time-bound, aggressive yet realistic, and measurable and verifiable.</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Objectives and Key Results (OKRs)</strong></p>
<p>For your top priorities, answer two questions:</p>
<ol type="1">
<li><strong>What</strong> do we want to <strong>accomplish</strong>? (Objectives). Good Objectives are significant, concrete, action-oriented, and inspirational.</li>
<li><strong>How</strong> do we <strong>measure progress and success</strong>? (Key Results). Good Key Results are specific and time-bound, aggressive yet realistic, and measurable and verifiable.</li>
</ol>
<p>That’s it! Then, meet at a regular cadence to track progress on Key Results, and adjust activities to achieve your Objectives.</p>
</div>
</div>
</section>
</section>
<section id="examples-of-okrs" class="level2">
<h2 class="anchored" data-anchor-id="examples-of-okrs">Examples of OKRs</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Send me examples of public health OKRs
</div>
</div>
<div class="callout-body-container callout-body">
<p>Please send examples to <a href="mailto:tomas.aragon@cdph.ca.gov">tomas.aragon@cdph.ca.gov</a>.</p>
</div>
</div>
<section id="sports" class="level3">
<h3 class="anchored" data-anchor-id="sports">Sports</h3>
<p><strong>Objective</strong>: Win the Super Bowl for the 2023 season, as measured by</p>
<ul>
<li><strong>KR.1</strong>: Recruiting franchise quarterback by April, 2023 (input: human resource)</li>
<li><strong>KR.2</strong>: Recruiting highly ranked defensive coordinator by April, 2023 (input: human resource)</li>
<li><strong>KR.3</strong>: Implementing accredited sports psychology program by May, 2023 (process).</li>
<li><strong>KR.4</strong>: Winning the Division title by December 31, 2023 (outcome).</li>
<li><strong>KR.5</strong>: Winning the Conference title by January 30, 2024 (outcome).</li>
<li><strong>KR.6</strong>: Winning the Super Bowl title by February 15, 2024 (outcome).</li>
</ul>
</section>
<section id="personal" class="level3">
<h3 class="anchored" data-anchor-id="personal">Personal</h3>
<p><strong>Objective</strong>: Improve and sustain my physical, mental, and emotional well-being, as measured by</p>
<ul>
<li><strong>KR.1</strong>: Consume two cups of oatmeal and avoid added sugars (daily)</li>
<li><strong>KR.2</strong>: Get at least 8 hours of sleep (nightly)</li>
<li><strong>KR.3</strong>: Walk or jog 12 miles every weekend (weekly).</li>
<li><strong>KR.4</strong>: Spend every weekend home with family (weekly).</li>
<li><strong>KR.5</strong>: Measure weight (at least weekly) and maintain BMI between 24 and 25 (normal BMI is 18.5-24.9)</li>
</ul>
</section>
<section id="public-health" class="level3">
<h3 class="anchored" data-anchor-id="public-health">Public health</h3>
<section id="covid-19-vaccine-equity" class="level4">
<h4 class="anchored" data-anchor-id="covid-19-vaccine-equity">COVID-19 vaccine equity</h4>
<p>Strategic COVID-19 vaccine equity statement: “All communities in California enjoy racial, socioeconomic, and geographic equity in vaccine-related community immunity, health outcomes, and socioeconomic impacts.”</p>
<p>There are four <strong>Objectives</strong> (Key Results not shown, except for Objective 4 below)</p>
<ol type="1">
<li>Achieve high and equitable access to COVID-19 vaccines across California, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Achieve high and equitable acceptance to COVID-19 vaccines across California, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Achieve high quality and equitable administration of COVID-19 vaccines across California, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Achieve equitable community immunity against COVID-19 across California, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
</ol>
<p><strong>Objective 4</strong>: Achieve equitable community immunity against COVID-19 across California, as measured by</p>
<ul>
<li><strong>KR 4.1</strong>: Vaccine coverage is &gt;= 80% for persons 50 years or older, stratified by Healthy Places Index, and race/ethnicity by INSERT DATE.</li>
<li><strong>KR 4.2</strong>: COVID-19 case rates are below TARGET, stratified by Healthy Places Index, and race/ethnicity by INSERT DATE.</li>
<li><strong>KR 4.3</strong>: COVID-19 hospitalization rates are below TARGET, stratified by Healthy Places Index, and race/ethnicity by INSERT DATE.</li>
<li><strong>KR 4.4</strong>: COVID-19 death rates are below TARGET, stratified by Healthy Places Index, and race/ethnicity by INSERT DATE.</li>
</ul>
</section>
<section id="substance-addiction-and-prevention-sapb-branch" class="level4">
<h4 class="anchored" data-anchor-id="substance-addiction-and-prevention-sapb-branch">Substance, Addiction, and Prevention (SAPB) Branch</h4>
<p>SAPB strategic <strong>Objectives</strong> (Key Results are pending)</p>
<ol type="1">
<li>Improve CDPH and state agency coordination between primary, secondary, and tertiary prevention efforts, including evidence-based/informed and emerging practices and interventions, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Improve state and local surveillance, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Promote protective factors and reduce risk factors to support individual and community resiliency, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Increase public awareness and education, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Expand naloxone access, saturation, and education, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Promote treatment and reduce stigma, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
<li>Promote harm reduction and drug checking services, as measured by <img src="https://latex.codecogs.com/png.latex?%5Cldots"></li>
</ol>
</section>
</section>
<section id="more-examples-from-whatmatters.com" class="level3">
<h3 class="anchored" data-anchor-id="more-examples-from-whatmatters.com">More examples from whatmatters.com</h3>
<p>For more examples, visit <a href="https://www.whatmatters.com/get-examples">https://www.whatmatters.com/get-examples</a>.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>To learn about OKRs visit <a href="https://www.whatmatters.com/faqs/okr-meaning-definition-example">https://www.whatmatters.com/faqs/okr-meaning-definition-example</a>.↩︎</p></li>
<li id="fn2"><p>See <a href="https://www.lean.org/the-lean-post/articles/public-service-leans-next-frontier/">https://www.lean.org/the-lean-post/articles/public-service-leans-next-frontier/</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>CDPH Way</category>
  <category>The CDPH Way</category>
  <category>Lean</category>
  <category>OKRs</category>
  <category>Leadership</category>
  <category>Continuous improvement</category>
  <category>Objectives and Key Results</category>
  <guid>https://drtomasaragon.github.io/posts/2022-12-10-becoming-the-best-at-getting-better/index.html</guid>
  <pubDate>Sat, 10 Dec 2022 08:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2022-12-10-becoming-the-best-at-getting-better/images/okrs_coursera_what-are-okrs-okr-definition-with-diagram_orig_cropped.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Decision intelligence books</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2022-08-20-decision-intelligence-books/index.html</link>
  <description><![CDATA[ 




<div id="fig-decintell" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2022-08-20-decision-intelligence-books/images/tja_book_decision_intelligence_venn_V04.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Decision intelligence is using ethics, science, and technology to improve individual and team decisions for finding and solving problems, and achieving objectives and key results in challenging, environments, including volatile, uncertain, complex, or ambiguous (VUCA) environments.</figcaption>
</figure>
</div>
<p><strong>Decision-making</strong> is our most important activity. “A decision is a choice between two or more alternatives that involves an irrevocable allocation of resources” <span class="citation" data-cites="Howard2015_isbn978-0132336246">[1]</span>. Decisions drive vision, strategy, policy, and transformational change. Every decision has causal assumptions, predictions, trade-offs, and an opportunity cost—the lost benefit of the better option(s) not chosen or not considered.</p>
<p>Most decisions are quick or automatic and are influenced by intuition. Occasionally, we slow down to deliberate (often in teams) and we are influenced by our intuition, non-conscious cognitive processes, group psychology, power dynamics, and politics.</p>
<p><strong>Decision intelligence</strong> is using ethics, science, and technology to improve individual and team decisions for finding and solving problems, and achieving objectives and key results in challenging, environments, including volatile, uncertain, complex, or ambiguous (VUCA) environments.</p>
<p>In spite of the importance of decision making, few are trained on how to make better decisions. I am often asked what are my favorite decision books. To promote better decision making I list several here in their primary category.</p>
<p>Please <a href="mailto:taragonmd@gmail.com">send me</a> your favorite decision book recommendations and why you like them.</p>
<section id="prerequisites" class="level2">
<h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
<p>These foundational books are about improving how we process information from the external world (exteroception) and our bodies (interoception), how we think and feel (cognition and emotions), and how we believe and behave. Without awareness of human beings’ limitations and pitfalls in these areas, we are bound to make poor decisions, even against our best interests.</p>
<ol type="1">
<li>Hess E and Ludwig K. <a href="https://www.amazon.com/Humility-New-Smart-Rethinking-Excellence/dp/1626568758/">Humility is the New Smart: Rethinking Human Excellence in the Smart Machine Age</a>. Berrett-Koehler Publishers, a BK Business Book; 2017. <em>Introduction to the critical importance of humility, especially intellectual humility, having self-awareness, receiving accurate feedback, listening, learning, improving, and building trust</em>.</li>
<li>Grant A. <a href="https://www.amazon.com/Think-Again-Power-Knowing-What/dp/1984878107/">Think Again: The Power of Knowing What You Don’t Know</a>. Viking (February 2, 2021) <em>“Think Again is a must-read for anyone who wants to create a culture of learning and exploration, whether at home, at work, or at school… In an increasingly divided world, the lessons in this book are more important than ever.” —Bill and Melinda Gates</em></li>
<li>Galef J. <a href="https://www.amazon.com/Scout-Mindset-Perils-Defensive-Thinking/dp/0735217556/">The Scout Mindset: Why Some People See Things Clearly and Others Don’t</a>. Portfolio (April 13, 2021) <em>“We know a lot about how flawed human reasoning is, but surprisingly little about how to repair it in our daily lives. Thankfully, Julia Galef is here to change that. With insights that are both sharp and actionable, her book picks up where Predictably Irrational left off. Reading it will teach you to think more clearly, see yourself more accurately, and be wrong a little less often.” —Adam Grant, psychology professor”</em></li>
<li>Barrett LF. <a href="https://www.amazon.com/Seven-Half-Lessons-About-Brain/dp/035864559X">Seven And A Half Lessons About the Brain</a>. Mariner Books (October 26, 2021). <em>Brilliant short read that demystifies the brain and emotions. This is a great introduction to modern neuroscience. For a more comprehensive introduction read “<a href="https://www.amazon.com/How-Emotions-Made-Lisa-Barrett/dp/1328915433">How Emotions Are Made: The Secret Life of the Brain</a>” by the same author.</em></li>
<li>Haidt J. <a href="https://www.amazon.com/Righteous-Mind-Divided-Politics-Religion/dp/0307455777">The Righteous Mind: Why Good People Are Divided by Politics and Religion</a>. Knopf Doubleday Publishing Group; Reprint edition (February 12, 2013) <em>“Drawing on his twenty-five years of groundbreaking research on moral psychology, Jonathan Haidt shows how moral judgments arise not from reason but from gut feelings. He shows why liberals, conservatives, and libertarians have such different intuitions about right and wrong, and he shows why each side is actually right about many of its central concerns.”</em></li>
</ol>
</section>
<section id="behavioral-economics-focus" class="level2">
<h2 class="anchored" data-anchor-id="behavioral-economics-focus">Behavioral economics focus</h2>
<ol type="1">
<li>Sibony O. <a href="https://www.amazon.com/Youre-About-Make-Terrible-Mistake/dp/0316494984/">You’re About to Make a Terrible Mistake: How Biases Distort Decision-Making and What You Can Do to Fight Them</a>. Little, Brown Spark (July 14, 2020). <em>Covers nine common decision-making traps – and learn practical tools for avoiding them – in this “masterful,” research-based guide from a professor of strategic thinking</em></li>
<li>Sunstein C. <a href="https://www.amazon.com/Wiser-Getting-Beyond-Groupthink-Smarter/dp/1422122999/">Wiser: Getting Beyond Groupthink to Make Groups Smarter</a>. Harvard Business Review Press; First Edition (December 23, 2014). <em>How to use behavioral economics to improve team decisions</em>.</li>
<li>Kahneman D. <a href="https://www.amazon.com/Thinking-Fast-Slow-Daniel-Kahneman/dp/0374533555/">Thinking, Fast and Slow</a>. Farrar, Straus and Giroux; 1st edition (March 1, 2013). <em>Classic, transformational book from a pioneer in behavioral economics.</em></li>
</ol>
</section>
<section id="structured-decision-making" class="level2">
<h2 class="anchored" data-anchor-id="structured-decision-making">Structured decision making</h2>
<ol type="1">
<li>Duke A. <a href="https://www.amazon.com/How-Decide-Simple-Making-Choices/dp/0593418484/">How to Decide: Simple Tools for Making Better Choices</a>. Portfolio; Illustrated edition (October 13, 2020). <em>Brilliant, practical introduction to decision making that integrates cognitive psychology, probability, and practical tools</em></li>
<li>Duke A. <a href="https://www.amazon.com/Thinking-Bets-Making-Smarter-Decisions/dp/0735216371/">Thinking in Bets: Making Smarter Decisions When You Don’t Have All the Facts</a>. Portfolio; Reprint edition (May 7, 2019). <em>This is the original book on decision making by Anne Duke.</em></li>
<li>Hammond JS, Keeney RL, Raiffa H. <a href="https://www.amazon.com/Smart-Choices-Practical-Making-Decisions/dp/1633691047/">Smart Choices: A Practical Guide to Making Better Decisions</a>. Crown Business; 2002. <em>Classic book on making better decisions when faced with multiple competing objectives and trade-offs</em>.</li>
<li>Keeney R. <a href="https://www.amazon.com/Give-Yourself-Nudge-Personal-Decisions/dp/1108715621/">Give Yourself a Nudge: Helping Smart People Make Smarter Personal and Business Decisions</a>. Cambridge University Press; 2020. <em>This book extends the Hammond book and includes how to influence others’ decisions that impact you</em>.</li>
</ol>
</section>
<section id="decision-making-under-deep-uncertainty-including-in-crises" class="level2">
<h2 class="anchored" data-anchor-id="decision-making-under-deep-uncertainty-including-in-crises">Decision making under deep uncertainty (including in crises)</h2>
<ol type="1">
<li>Roberto MA. <a href="https://www.amazon.com/Great-Leaders-Dont-Take-Answer/dp/0134392787/">Why Great Leaders Don’t Take Yes for an Answer: Managing for Conflict and Consensus</a>. FT Press; 2nd edition (September 25, 2015). How leaders can build consensus and make decisions in the face of disasters. <em>Reviews catastrophic decisions and how to avoid them</em>.</li>
<li>Marcus LJ, McNulty EJ, Henderson JM, Dorn BC. <a href="https://www.amazon.com/Youre-Crisis-Change-Lead-Matters/dp/1541768043/">You’re It: Crisis, Change, and How to Lead When It Matters Most</a>. PublicAffairs (March 16, 2021). <em>Comprehensive framework for how to lead during disasters. Based on empirical research during actual disasters</em>.</li>
<li>Sunstein CR. <a href="https://www.amazon.com/Averting-Catastrophe-Decision-Potential-Disasters/dp/1479808482/">Averting Catastrophe: Decision Theory for COVID-19, Climate Change, and Potential Disasters of All Kinds</a>. NYU Press (April 27, 2021)</li>
<li>Kay J and King M. <a href="https://www.amazon.com/Radical-Uncertainty-Decision-Making-Beyond-Numbers/dp/0393541983/">Radical Uncertainty: Decision-Making Beyond the Numbers</a>. WW Norton &amp; Company (September 7, 2021). <em>“The limits of certainty demonstrate the power of human judgment over artificial intelligence. In most critical decisions there can be no forecasts or probability distributions on which we might sensibly rely. Instead of inventing numbers to fill the gaps in our knowledge, we should adopt business, political, and personal strategies that will be robust to alternative futures and resilient to unpredictable events.”</em></li>
</ol>
</section>
<section id="decision-analysis" class="level2">
<h2 class="anchored" data-anchor-id="decision-analysis">Decision analysis</h2>
<section id="introductory" class="level3">
<h3 class="anchored" data-anchor-id="introductory">Introductory</h3>
<ol type="1">
<li>Spetzler C, Winter H, Meyer J. <a href="https://www.amazon.com/Decision-Quality-Creation-Business-Decisions/dp/1119144671/">Decision Quality: Value creation from Better Business Decisions</a>. Wiley; 2016. <em>Covers the basics of decision analysis including how to avoid cognitive biases</em>.</li>
</ol>
</section>
<section id="intermediate" class="level3">
<h3 class="anchored" data-anchor-id="intermediate">Intermediate</h3>
<ol type="1">
<li>Sox HC, Higgins MC, Owens DK. <a href="https://www.amazon.com/Medical-Decision-Making-Harold-Sox/dp/0470658665/">Medical Decision Making</a>. Publisher : Wiley-Blackwell; 2nd edition (July 29, 2013). <em>Classic book in clinical decision analysis</em></li>
<li>Myriam Hunink, MG. <a href="https://www.amazon.com/Decision-Making-Health-Medicine-Integrating/dp/1107690471/">Decision Making in Health and Medicine</a>. Cambridge University Press; 2nd edition (October 16, 2014). <em>Classic book in clinical decision analysis</em></li>
</ol>
</section>
<section id="advanced" class="level3">
<h3 class="anchored" data-anchor-id="advanced">Advanced</h3>
<ol type="1">
<li>Peterson M. <a href="https://www.amazon.com/Introduction-Decision-Cambridge-Introductions-Philosophy/dp/1316606201/">An Introduction to Decision Theory</a>. Cambridge University Press; 2nd edition (April 4, 2017) <em>An introduction to decision theory is both accessible and comprehensive, covering topics including decision making under ignorance and risk, the foundations of utility theory, the debate over subjective and objective probability, Bayesianism, causal decision theory, game theory, and social choice theory.</em></li>
<li>Abbas AE, Howard RA. <a href="https://www.amazon.com/Foundations-Decision-Analysis-Global-Howard-dp-129207969X/dp/129207969X/">Foundations of Decision Analysis</a>. Pearson; 1st edition (March 19, 2015). <em>Serious introduction to decision analysis from a pioneer in the field (Ronald A. Howard).</em></li>
<li>Fenton N, Neil M. <a href="https://www.amazon.com/Assessment-Decision-Analysis-Bayesian-Networks/dp/1138035114/">Risk Assessment and Decision Analysis with Bayesian Networks</a>. Chapman and Hall/CRC; 2nd edition (September 12, 2018) <em>Introduction to decision analysis using Bayesian networks. For background see <a href="https://escholarship.org/uc/item/8000r5m5">Population health thinking with Bayesian networks</a>.</em></li>
<li>Kochenderfer MJ, Wheeler TA, Wray KH. <a href="https://algorithmsbook.com/">Algorithms for Decision Making</a>. The MIT Press (2022).</li>
</ol>
</section>
</section>
<section id="decision-intelligence" class="level2">
<h2 class="anchored" data-anchor-id="decision-intelligence">Decision intelligence</h2>
<p>“Decision intelligence is an engineering discipline that augments data science with theory from social science, decision theory, and managerial science. Its application provides a framework for best practices in organizational decision-making and processes for applying machine learning at scale. The basic idea is that decisions are based on our understanding of how actions lead to outcomes. Decision intelligence is a discipline for analyzing this chain of cause and effect, and decision modeling is a visual language for representing these chains.”<sup>1</sup></p>
<ol type="1">
<li>Pratt L. Link: Link: <a href="https://www.amazon.com/Link-Decision-Intelligence-Connects-Outcomes/dp/1787696545/">How Decision Intelligence Connects Data, Actions, and Outcomes for a Better World</a>. Emerald Publishing (September 16, 2019). <em>``Pratt tells the stories of decision intelligence pioneers worldwide, along with examples of their work in areas that include government budgeting, space exploration, emerging democracy conflict resolution, banking, leadership, and much more.’’</em></li>
</ol>
</section>
<section id="additional-relevant-books" class="level2">
<h2 class="anchored" data-anchor-id="additional-relevant-books">Additional relevant books</h2>
<ol type="1">
<li>Edmondson AC. <a href="https://www.amazon.com/Fearless-Organization-Psychological-Workplace-Innovation/dp/1119477247/">The Fearless Organization: Creating Psychological Safety in the Workplace for Learning, Innovation, and Growth</a>. Wiley; 2018. <em>Reviews the science of psychological safety and its critical role in decision-making, learning, and continuous improvement</em>.*</li>
<li>Pearl J, Mackenzie D. <a href="https://www.amazon.com/Book-Why-Science-Cause-Effect/dp/1541698967/">The Book of Why: The New Science of Cause and Effect</a>. Basic Books; Reprint Edition (August 25, 2020), ISBN-13: 978-1541698963. Conceptual intro- duction to causal thinking, reasoning, and inference. <em>This book should be required reading for all public health and medical professionals</em>.</li>
</ol>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Howard2015_isbn978-0132336246" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Howard RA, Abbas AE. Foundations of decision analysis. 1st ed. Pearson; 2015. </div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Decision intelligence. Available from https://en.wikipedia.org/wiki/Decision_intelligence↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Book recommendations</category>
  <category>Decision intelligence</category>
  <category>Behavioral economics</category>
  <category>Decision analysis</category>
  <guid>https://drtomasaragon.github.io/posts/2022-08-20-decision-intelligence-books/index.html</guid>
  <pubDate>Sat, 20 Aug 2022 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2022-08-20-decision-intelligence-books/images/tja_book_decision_intelligence_venn_V04.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Congratulations UC Berkeley School of Public Health Class of 2021!</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2021-05-22-congrats-ucb-sph-class-of-2021/index.html</link>
  <description><![CDATA[ 




<section id="virtual-commencement" class="level2">
<h2 class="anchored" data-anchor-id="virtual-commencement">Virtual Commencement</h2>
<p>This is the 75th graduating class! Here is the <a href="https://publichealth.berkeley.edu/student-life/commencement/">Virtual Commencement</a> (and below) and <a href="https://publichealth.berkeley.edu/wp-content/uploads/2021/05/BPH_commencement_program_2021_FINAL_5_20.pdf">program</a>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/brGUev-LJ0U" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
</section>
<section id="alum-of-the-year" class="level2">
<h2 class="anchored" data-anchor-id="alum-of-the-year">Alum of the Year</h2>
<p>I was very honored and humbled to be selected the <em>2021 Alumnus of the Year</em>. Below are my comments delivered at the commencement and thanks to the SPH community.</p>
<section id="commencement-comments-starts-at-5857" class="level3">
<h3 class="anchored" data-anchor-id="commencement-comments-starts-at-5857">Commencement comments (starts at 58:57)</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/brGUev-LJ0U?start=3537" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
<p>I want to express my enormous gratitude to the UC Berkeley SPH community for selecting me as the “2021 Alumnus of the Year.” For me, this is a tremendous honor. The SPH has a very special place in my heart</p>
<p>I graduated in 2000 with a Doctor of Public Health degree. From 2003 to 2010, at the SPH I directed a CDC center on infectious disease emergency preparedness and response. Of course, the Feds cut all our funding, so in 2011, I became the Health Officer of San Francisco.</p>
<p>On January 9, 2020, the WHO announced a mysterious coronavirus pneumonia in Wuhan, China. On January 21st, I activated our public health emergency response, and the same day the CDC confirmed the first coronavirus case in the US. On Sunday, March 15th, I woke up not realizing that the very next day, March 16th, I, along with six Bay Area health officers, would be issuing the first regional stay-at-home orders in the United States. California followed on March 19th, and New York City on March 22nd.</p>
<p>That decision, came together with lightning speed because we had developed a relationship based on trust, respect, and universal values. <a href="https://www.radicallytransform.org/about2">Dr.&nbsp;Monica Sharma</a>, former director of leadership development at the United Nations, defines universal values as values that apply to every person on earth, leaving no one behind. She learned that embodying and promoting the values of dignity, equity, compassion, and humility were the most effective: they enabled people to come together, transcend differences, find common ground, and solve complex problems—in our case—could we dodge a public health catastrophe through swift public health action?</p>
<p>Our team had embraced what Dr.&nbsp;Sharma calls radical transformational leadership—leading change from the universal values of dignity, equity, compassion, and humility to transform self, people, systems and cultures towards equity, antiracism, and sustainable results.</p>
<p>Embodying humility opens your heart and mind to listening deeply to opposing points of view; it accelerates group learning and problem solving. With humility you come to appreciate and value multiple truths. You embrace curiosity over certainty, inquiry before advocacy, and discernment over judgment.</p>
<p>Today, as you embark on your public health careers, I hope you will become radical transformational leaders, and embody and promote the universal values of dignity, equity, compassion, and humility in every interaction, in every conversation, and in every decision.</p>
<p>Thank you!</p>
</section>
</section>
<section id="letter-of-gratitude-to-sph-community" class="level2">
<h2 class="anchored" data-anchor-id="letter-of-gratitude-to-sph-community">Letter of gratitude to SPH community</h2>
<p>March 28, 2021</p>
<p>Dear UC Berkeley SPH family,</p>
<p>I want to express my enormous gratitude for selecting me as the 2021 Alum of the Year. For me, this is a tremendous honor. UC Berkeley SPH has a very special place in my heart. I grew up in San Francisco’s Mission District. My family immigrated from Nicaragua in the 1950s. My father completed high school and my mother completed sixth grade. He worked as a cook and dishwasher and she as a seamstress. When I was 5 my mom became a single parent raising four children. She became my role model and moral compass.</p>
<p>I was accepted to UC Berkeley at the age of 17 through the Affirmative Action and Education Opportunity Programs. Unfortunately, I dropped out after two quarters because I was struggling academically. I did not have the academic preparation of other students. I enrolled in SF State, improved my study skills, got my grades up and returned to UC Berkeley in 1981 to study molecular biology. As an undergraduate I enrolled in a SPH course on cancer epidemiology. I was hooked! I knew that public health and epidemiology would always be a part of my career.</p>
<p>In medical school, I received my MPH degree. After my primary care internal medicine residency and infectious disease fellowship at UCSF, I received my Doctor of Public Health (DrPH) from the UC Berkeley School of Public Health. I had the privilege to learn from the best epidemiology and biostatistics professors in the nation. I studied everything from advanced biostatistics to mathematical demography and modeling.</p>
<p>Since 2003 I have been a voluntary lecturer at the UCB SPH teaching “Applied Epidemiology Using R,” even after I became health officer of San Francisco in 2011. When I started teaching this course few were interested in R. I had the privilege to see firsthand computational thinking and data science explode in innovation. Through their innovative class projects, my students were teaching me more than I was teaching them. I experienced what I call “population health data science” (descriptive, predictive, causal inference, modeling, and optimization methods). I get to bring all of this innovation into my public health practice!</p>
<p>As public health officials we make daily decisions in the face of uncertainty, time constraints, competing objectives, and limited information. This culminated with the Bay Area health officers issuing shelter-in-place orders on March 16, 2020. All of my public health decisions and public health orders have been influenced by the UC Berkeley School of Public Health.</p>
<p>I am indebted to you all—students, professors, and staff! You have had a real hand in my public health career and actions.</p>
<p>That is why being selected the 2021 University of California, Berkeley School of Public Health Alum of the Year is the most valued honor I could ever receive.</p>
<p>Thank you! Thank you! Thank you!</p>
<p>With tremendous gratitude,</p>
<p>Tomás Aragón</p>
<p>UC Berkeley Class of 1983 (AB, Molecular Biology)</p>
<p>UC Berkeley School of Public Health, Class of 2000 (DrPH, Epidemiology)</p>


</section>

 ]]></description>
  <category>Award</category>
  <category>Graduation</category>
  <guid>https://drtomasaragon.github.io/posts/2021-05-22-congrats-ucb-sph-class-of-2021/index.html</guid>
  <pubDate>Sat, 22 May 2021 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2021-05-22-congrats-ucb-sph-class-of-2021/images/feature.png" medium="image" type="image/png" height="96" width="144"/>
</item>
<item>
  <title>Embodying cultural humility</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2021-05-15-embodying-cultural-humility/index.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is part of the series <em><a href="https://drtomasaragon.github.io/#category=The%20CDPH%20Way">The CDPH Way—Becoming the best at getting better</a></em>.</p>
<p>For background, here is an <a href="https://app.box.com/s/qdkfdg6up953gin7zwj7ojtcomvu3725">overview slide set</a> and <a href="https://app.box.com/s/dy09jpugvognm8x3oz56mt379o6vygbo">lean reporting templates</a>.</p>
</div>
</div>
<p>In 1998, Melanie Tervalon and Jann Murray-García published a groundbreaking article that challenged the concept of “cultural competency” with the concept of “cultural humility” <span class="citation" data-cites="Tervalon1998_pmid10073197 Foronda2015_pmid26122618">[1,2]</span>.<br>
<strong>Cultural humility</strong> is committing to lifelong learning, critical self-reflection, and personal and institutional transformation. Accepting cultural humility means accepting that we can never be fully culturally competent. Cultural humility is the foundation for establishing trust and respectful relationships, and for managing differences and conflict. Cultural humility means</p>
<ol type="1">
<li>committing to <strong>lifelong learning</strong> and <strong>critical self-reflection</strong>;</li>
<li>realizing our <strong>power</strong>, <strong>privilege</strong>, and <strong>prejudices</strong> (biases) (includes conscious and non-conscious [implicit] biases);</li>
<li>redressing <strong>power imbalances</strong> for <strong>respectful partnerships</strong>; and</li>
<li>promoting <strong>institutional accountability</strong>.</li>
</ol>
<p><strong>Power</strong> is <em>the capacity or ability to direct or influence the behavior of others, the course of events, or the allocation of resources</em>. Power comes from positional, moral, or relational authority. Authority is granted by appointment or earned by trust and credibility. It is exercised by embodying universal values (humility, compassion, equity, dignity), or by persuasion, manipulation, or deceit. The dynamics and impacts of power are multi-dimensional, context dependent, cumulative, and can be subtle. For example, the mere presence of a boss can unintentionally shut down subordinates.</p>
<p><strong>Privilege</strong> is <em>a form of unearned power that comes from social advantage</em>. All of us have some form of privilege. Privilege exists because of sociopolitical systems and cultural norms that create, reinforce, and amplify power inequities, explicitly or implicitly. For example, in the US, if you are like me: male, heterosexual, cisgender, or have lighter skin color, you have more privilege. You do not choose privilege, but you can acknowledge it, and, more importantly, you can make “the noble choice to forgo your status, [and to] use your influence for the good of others before yourself” — this is humility.</p>
<p>For our purposes, <strong>biases</strong> are preferences, cognitive processes, or inferences that shape our mental models, knowledge, attitudes, beliefs, and behaviors in ways that cause or contribute to inequities in power, privilege, opportunities, or outcomes for ourselves and/or others. Biases can be known to you and others (<em>open</em>), known to you and not others (<em>hidden</em>), known to others but not you (<em>blind spot</em>), or not known to you and others (<em>unknown</em>).<sup>1</sup></p>
<p><strong>Implicit biases</strong> account for the unknown and blind spot biases, and are the most challenging type of bias because we all have them, and they are difficult to identify, measure, and mitigate. For example, ambiguous hiring criteria are susceptible to implicit biases. Without unambiguous, objective criteria, hiring someone you “trust” is driven, unintentionally, by implicit biases.<sup>2</sup></p>
<p>Learn more about cultural humility from the following outstanding videos.</p>
<section id="cultural-humility-video-edited-to-6-min" class="level3">
<h3 class="anchored" data-anchor-id="cultural-humility-video-edited-to-6-min">Cultural Humility video (edited to 6 min)</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/16dSeyLSOKw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
</section>
<section id="cultural-humility-video-complete-30-min" class="level3">
<h3 class="anchored" data-anchor-id="cultural-humility-video-complete-30-min">Cultural Humility video (complete 30 min)</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/SaSHLbS1V4w" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Tervalon1998_pmid10073197" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Tervalon M, Murray-Garcia J. Cultural humility versus cultural competence: A critical distinction in defining physician training outcomes in multicultural education. J Health Care Poor Underserved [Internet]. 1998 May;9(2):117–25. Available from: <a href="https://www.ncbi.nlm.nih.gov/pubmed/10073197">https://www.ncbi.nlm.nih.gov/pubmed/10073197</a></div>
</div>
<div id="ref-Foronda2015_pmid26122618" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Foronda C, Baptiste DL, Reinholdt MM, Ousman K. Cultural humility. Journal of Transcultural Nursing [Internet]. 2015 Jun;27(3):210–7. Available from: <a href="https://doi.org/10.1177/1043659615592677">https://doi.org/10.1177/1043659615592677</a></div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>To learn more study “JoHari Window in Interpersonal Communication”: Video lecture by Dr.&nbsp;Lori Zakel, Professor and Chair of the Communication Department at Sinclair College, Dayton, Ohio. Available at <a href="https://youtu.be/-7FhcvoVK8s" class="uri">https://youtu.be/-7FhcvoVK8s</a>.↩︎</p></li>
<li id="fn2"><p>To learn more study “JoHari Window in Interpersonal Communication”: Video lecture by Dr.&nbsp;Lori Zakel, Professor and Chair of the Communication Department at Sinclair College, Dayton, Ohio. Available at <a href="https://youtu.be/-7FhcvoVK8s" class="uri">https://youtu.be/-7FhcvoVK8s</a>.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>CDPH Way</category>
  <category>The CDPH Way</category>
  <category>Antiracism</category>
  <category>Equity</category>
  <category>Humility</category>
  <category>Implicit bias</category>
  <category>Leadership</category>
  <category>Team skills</category>
  <category>Trust</category>
  <guid>https://drtomasaragon.github.io/posts/2021-05-15-embodying-cultural-humility/index.html</guid>
  <pubDate>Sat, 15 May 2021 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2021-05-15-embodying-cultural-humility/images/tree-hands_275x183.png" medium="image" type="image/png" height="96" width="144"/>
</item>
<item>
  <title>The 8 principles for building trust (updated Nov 27 2022)</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2021-05-01-seven-principles-for-building-trust/index.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is part of the series <em><a href="https://drtomasaragon.github.io/#category=The%20CDPH%20Way">The CDPH Way—Becoming the best at getting better</a></em>.</p>
<p>For background, here is an <a href="https://app.box.com/s/qdkfdg6up953gin7zwj7ojtcomvu3725">overview slide set</a> and <a href="https://app.box.com/s/dy09jpugvognm8x3oz56mt379o6vygbo">lean reporting templates</a>.</p>
</div>
</div>
<p><em>“Leadership is getting results in a way that inspires trust.”</em> … Stephen MR Covey <span class="citation" data-cites="Covey2008_isbn978-1416549000">[1]</span></p>
<section id="building-trust" class="level2">
<h2 class="anchored" data-anchor-id="building-trust">Building trust</h2>
<p>In organizations with high trust levels staff engage in honest, vigorous deliberations about important and sensitive topics, including strategy, budget cuts, ethics, equity, racism, discrimination, power, privilege, prejudice, interpersonal conflict, etc <span class="citation" data-cites="Feltman2021-isbn978-0988953864">[2]</span>.</p>
<p>The word trust is used often but rarely defined. The word is thrown around as if everyone understands exactly what we mean. We attend countless meetings where “building trust” is emphasized. Building and restoring trust requires a thoughtful, systematic approach. To understand trust we must define it precisely. Trust is an aspect of relationships; it varies within and across relationships. Organizational trust researcher, Roger Mayer, defines <strong>trust</strong> as follows:</p>
<blockquote class="blockquote">
<p>“Trust is the willingness of a party [trustor] to be vulnerable to the actions of another party [trustee] based on the expectation that the other party will perform a particular action important to the trustor, irrespective of the ability to monitor or control that other party. … Making oneself vulnerable is taking a risk. Trust is not taking a risk <em>per se</em>, but rather it is a <em>willingness</em> to take risk” <span class="citation" data-cites="Mayer2006_inbook-isbn978-0199288502">[3]</span>.</p>
</blockquote>
<p>In short, <em>trust is the willingness to be vulnerable to another party</em>. Therefore, trust is <em>a state of readiness to take risk in a relationship</em>. Trust is the willingness to <em>assume</em> risk; <em>behavioral trust</em> (or a trusting action) is the assuming of risk. Our focus is on trust as a state of readiness (“willingness”). <em>An organizational culture of trust is a culture where staff feel safe to tackle and vigorously debate the most challenging, sensitive topics in service of the organizational purpose</em>.</p>
<p>Not appreciated by many is that trust is an intuitive or deliberative decision. As an intuitive (gut) decision we experience trust as a feeling of safety. As a deliberative decision we experience trust as a confidence in our decision.</p>
<p>Additionally, we want others to trust us. Assuming good intentions, our general objective is to influence others to trust us, our teams, and our organization. Therefore, our job as managers is</p>
<ol type="1">
<li>to <em>be trustworthy</em>,</li>
<li>to <em>behave in ways that inspire trust</em>, and</li>
<li>to <em>design systems that promote a culture of trust</em>.</li>
</ol>
<p>Building a culture of trust inspires better team collaboration, decision-making, execution, accountability, and performance. Here are <strong>The 8 Principles of Building Trust</strong>—these behaviors apply always, with anyone, and in any situation (think <strong>“CCCHARTS”</strong>):</p>
<ol type="1">
<li>Have <strong>Character</strong>: with integrity, be ethical, honest, sincere, loyal</li>
<li>Be <strong>Caring</strong>: be compassionate; ensure equity and dignity; be kind</li>
<li>Be <strong>Competent</strong>: be capable, consistent, and continuously improving; seek frank and honest feedback from trusted critics</li>
<li>Be <strong>Humble</strong>: cultivate general, intellectual, and cultural humility</li>
<li>Be <strong>Accountable</strong>: own your influence and responsibilities; own your mistakes and failures, apologize and make amends</li>
<li>Be <strong>Reliable</strong>: keep promises and commitments, and be on time</li>
<li>Be <strong>Transparent</strong> (clarity): communicate intent [what], motive [why], agend [how: who, when, where], and expectations</li>
<li>Ensure <strong>Safety</strong> (psychological, physical, and emotional): listen mindfully, respect boundaries, assume good intent, risk vulnerability, be curious—not judgmental</li>
</ol>
<p><strong><em>Cool tip:</em></strong> <em>Fastest way to build trust</em> <span class="citation" data-cites="Hurley2011_isbn978-1118072646">[4]</span></p>
<blockquote class="blockquote">
<p>If you need a fast, foolproof method <strong>to accelerate building trust</strong> with someone (e.g., your boss as the potential trustor), try this with genuine integrity and humility: “It’s really important to me that I earn your trust <em>and</em> confidence. Please tell me <em>exactly</em> what you need from me.” Ask for specifics and what success looks like. Write it down and review it with your potential trustor. Confirm mutual goals and expectations. Use the 8 Principles to deliver on your commitment(s).<sup>1</sup></p>
</blockquote>
<p>Do not confuse trust with <em>confidence</em>. Trusting someone is not equivalent to having confidence in them. Trust requires a risk of vulnerability. A corollary: earning others’ complete trust almost always earns confidence in you, but earning others’ confidence (e.g., in your abilities) does not mean they also trust you (i.e., willingness to be vulnerable to your actions).</p>
<p>The trustor’s <em>propensity to trust</em> is the predisposition or general willingness to trust before any information about the trustee is considered. At one extreme, a very high propensity to trust can result in extending trust even when it is not warranted (“blind trust”). At the other extreme, a low propensity to trust can result in not extending trust even when it is warranted (“blind mistrust”).</p>
<p>“Distrust” and “mistrust” have roughly the same meaning. Both mean lack of trust. But <em>distrust</em> is lack of trust based on experience or reliable information, while <em>mistrust</em> is often a general sense of unease toward someone or something.</p>
</section>
<section id="courage-and-trust-involve-vulnerability" class="level2">
<h2 class="anchored" data-anchor-id="courage-and-trust-involve-vulnerability">Courage and trust involve vulnerability</h2>
<section id="celebrating-courage" class="level3">
<h3 class="anchored" data-anchor-id="celebrating-courage">Celebrating courage</h3>
<p>Humility and trust are based in human relationships and involve vulnerability. Brené Brown defines <strong>vulnerability</strong> “as uncertainty, risk, and emotional exposure.” “Vulnerability is the core of all emotions and feelings. To feel is to be vulnerable <span class="citation" data-cites="Brown2015_isbn978-1592408412">[5]</span>”. <em>Any time someone risks vulnerability to get better, build trust, protect others, or behave ethically they are courageous!</em> Therefore, <em>we are surrounded by daily acts of unrecognized courage!</em> Recognize and celebrate our courageous staff, clients, and communities!</p>
</section>
<section id="understanding-empathy-and-compassion" class="level3">
<h3 class="anchored" data-anchor-id="understanding-empathy-and-compassion">Understanding empathy and compassion</h3>
<p>With <strong>sympathy</strong> I <em>care</em> about your suffering. With <strong>empathy</strong> I <em>feel</em> your suffering. With <strong>compassion</strong> I <em>want to relieve</em> your suffering. Be aware and mindful: because of our implicit biases we are more likely to empathize with people “like us” (e.g., tribalism). Instead, we endeavor to have empathy for those unlike us, and to have compassion towards those who are vulnerable or suffering, and to act in the face of our vulnerabilities—this is courage.</p>



</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Covey2008_isbn978-1416549000" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Covey SMR. The SPEED of trust: The one thing that changes everything. Free Press; 2008. </div>
</div>
<div id="ref-Feltman2021-isbn978-0988953864" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Feltman C. The thin book of trust: An essential primer for building trust at work. Thin Book Publishing Co.; 2021. </div>
</div>
<div id="ref-Mayer2006_inbook-isbn978-0199288502" class="csl-entry">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Mayer RC, Davis JH, Schoorman FD. Organizational trust; a reader. In: Kramer RM, editor. Oxford University Press; 2007. p. 82–108. </div>
</div>
<div id="ref-Hurley2011_isbn978-1118072646" class="csl-entry">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Hurley RF. The decision to trust: How leaders create high-trust organizations. 1st ed. Jossey-Bass; 2011. </div>
</div>
<div id="ref-Brown2015_isbn978-1592408412" class="csl-entry">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Brown B. Daring greatly: How the courage to be vulnerable transforms the way we live, love, parent, and lead. Avery; 2015. </div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Don’t forget to develop a <em>communication plan</em> to communicate progress, problems, and to manage expectations.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>CDPH Way</category>
  <category>The CDPH Way</category>
  <category>Character</category>
  <category>Compassion</category>
  <category>Competence</category>
  <category>Humility</category>
  <category>Accountability</category>
  <category>Psychological safety</category>
  <category>Team skills</category>
  <category>Trust</category>
  <guid>https://drtomasaragon.github.io/posts/2021-05-01-seven-principles-for-building-trust/index.html</guid>
  <pubDate>Sat, 01 May 2021 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2021-05-01-seven-principles-for-building-trust/images/building-trust_525x350.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Decision intelligence: An Introduction</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/index.html</link>
  <description><![CDATA[ 




<div id="fig-decintell" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/images/tja_book_decision_intelligence_venn_V04.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Decision intelligence is using science and technology to support teams and individuals to improve decision making for finding and solving problems, and for improving performance in novel, challenging environments, including volatile, uncertain, complex, or ambiguous (VUCA) environments.</figcaption>
</figure>
</div>
<p>In February, 2021, Bay Area health officers published an article <a href="https://journals.lww.com/jphmp/fulltext/2021/01001/crisis_decision_making_at_the_speed_of_covid_19_.5.aspx">“Crisis Decision-Making at the Speed of COVID-19: Field Report on Issuing the First Regional Shelter-in-Place Orders in the United States”</a>. In this article we discussed the application of decision intelligence (DI) to a public health crisis.</p>
<p>In this blog entry, I briefly summarize key DI concepts. One of my goals is to clarify that “data-driven decision making” is an incomplete construct for DI.</p>
<section id="decision-making" class="level2">
<h2 class="anchored" data-anchor-id="decision-making">Decision making</h2>
<section id="causal-and-probabilistic-reasoning" class="level3">
<h3 class="anchored" data-anchor-id="causal-and-probabilistic-reasoning">Causal and probabilistic reasoning</h3>
<p><strong>Decision making</strong> is our most important daily activity. Decisions drive vision, strategy, execution, problem solving, performance, evaluation, and continuous improvement. Decisions can be rapid and guided by experience and intuition, or they can be the product of a slow, deliberative process, usually by teams. So, what is a decision?</p>
<p>“A decision is a choice between two or more alternatives that involves an irrevocable allocation of resources” <span class="citation" data-cites="Howard2015_isbn978-0132336246">[1]</span>. Every decision has <strong>causal</strong> assumptions, <strong>predictions</strong>, and opportunity costs. For example, we might choose option <img src="https://latex.codecogs.com/png.latex?A"> over option <img src="https://latex.codecogs.com/png.latex?B"> because we predict option <img src="https://latex.codecogs.com/png.latex?A"> will achieve outcome <img src="https://latex.codecogs.com/png.latex?Y"> with higher probability <img src="https://latex.codecogs.com/png.latex?P"> (often unstated). The <strong>opportunity cost</strong> is the lost benefit of the better option not chosen or not considered. Implicit (non-conscious) cognitive biases, individually and collectively, can drive the strength of our causal beliefs, predictions, and decisions. Therefore, to improve team decision making, we also need to strengthen our capabilities in causal and probabilistic reasoning, balancing trade-offs from competing objectives, and leading team deliberations in the face of volatility, uncertainty, complexity, and ambiguity (so-called VUCA).</p>
<p>What public health officials bring to the decision-making table are the principles of epidemiology and biostatistics that support causal and probabilistic reasoning, respectfully. Causal reasoning appears in questions such as: What are the key drivers? (root causes); Why and how is this happening? (root causes); Asking “why?” 5 times. (“The 5 Whys”); Does this countermeasure work? (efficacy); Will it work in the real world? (effectiveness); and Which intervention is more cost-effective? (efficiency).</p>
<p>Probabilistic reasoning appears in questions such as: What are the chances that this exposure leads to infection? (prediction); What are the chances this countermeasure will work? (prediction); What are the sensitivity and specificity of this test or classification? (proportion of false-negative and/or false-positive of any test result or conjecture). This type of reasoning,</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5CPr%20(%5Ctext%7Beffect%7D%20%5Cmid%20%5Ctext%7Bcause%7D)%0A"> <img src="https://latex.codecogs.com/png.latex?%0A%5CPr%20(%5Ctext%7Bevidence%7D%20%5Cmid%20%5Ctext%7Bhypothesis%7D)%0A"> <img src="https://latex.codecogs.com/png.latex?%0A%5CPr%20(%5Ctext%7Btest%20results%7D%20%5Cmid%20%5Ctext%7Bpresence%20of%20disease%7D)%0A"> is called <strong>causal reasoning</strong> (or predictive reasoning).<sup>1</sup></p>
<p>In contrast, What are the chances my hypothesis (conjecture, suspected diagnosis) is correct given the evidence? What is the chance of being infected given a test result? This type of reasoning,</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5CPr%20(%5Ctext%7Bcause%7D%20%5Cmid%20%5Ctext%7Beffect%7D)%0A"> <img src="https://latex.codecogs.com/png.latex?%0A%5CPr%20(%5Ctext%7Bhypothesis%7D%20%5Cmid%20%5Ctext%7Bevidence%7D)%0A"> <img src="https://latex.codecogs.com/png.latex?%0A%5CPr%20(%5Ctext%7Bpresence%20of%20disease%7D%20%5Cmid%20%5Ctext%7Btest%20results%7D)%0A"></p>
<p>is called <strong>evidential reasoning</strong> (or diagnostic reasoning) and is the inverse conditional probability of causal reasoning. Unfortunately, human beings are very poor at evidential reasoning because it requires Bayes theorem to calculate probabilities. Humans are unaware of this cognitive limitation; hence, we are overconfident in our assessments and, with confirmation bias, may develop certainty and rigid beliefs. For these reasons, <em>we must approach VUCA with genuine intellectual humility and embrace curiosity over certainty</em>. In fact, in the face of VUCA, <em>key decisions are better managed like hypotheses to be tested</em>.</p>
<p>Every decision involves intuition, emotions, and cognitive and social psychology. Because of VUCA, decision making is often more art than science, and the “art” depends on psychological safety and effective interpersonal skills for managing conflict and building consensus. Decisions in organizational environments evolve within a historical, political, and cultural context that may constrain or support good decision making.</p>
<p>The failure to understand basic causal and evidential reasoning leads to wrong inferences, rigid beliefs, and poor decisions. We have seen this time and time again in the SARS’CoV-2 pandemic. The only practical and effective approach is to embrace humility, curiosity, and learning.</p>
</section>
</section>
<section id="decision-intelligence" class="level2">
<h2 class="anchored" data-anchor-id="decision-intelligence">Decision intelligence</h2>
<p>For public health officials, <strong>decision intelligence</strong> is the practical integration of problem solving, decision quality, performance improvement, and behavioral, data, and information sciences.<sup>2</sup></p>
<section id="problem-solving" class="level3">
<h3 class="anchored" data-anchor-id="problem-solving">Problem solving</h3>
<p>Many public health officials use components of decision intelligence but are unaware of its integrated structure. Figure&nbsp;2 graphically depicts the problem-solving structure as a causal graph (also called directed acyclic graph or DAG).</p>
<div id="fig-psolve" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/images/FIG5_Problem-Solving_causal-graph.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Causal graph to guide problem solving</figcaption>
</figure>
</div>
<p>The easiest example to understand is clinical diagnosis and treatment. When a patient presents to an emergency room with chest pain (<strong>problem</strong>), the clinician considers and prioritizes <strong>consequences</strong> (death, discomfort, etc.) and <strong>causes</strong> (myocardial infarction, esophageal reflux, anxiety, etc.), tests hypotheses by collecting data (history, physical examination, and diagnostic tests), and then uses the results to select and implement a treatment plan (<strong>countermeasures</strong>). The patient’s response to treatment is more data for learning, and for adjusting hypotheses and treatments. This whole process is a series of problem solving decisions, learning, and continuous improvement. The seasoned clinical is an expert in clinician decision intelligence.</p>
</section>
<section id="decision-quality" class="level3">
<h3 class="anchored" data-anchor-id="decision-quality">Decision quality</h3>
<p>Similarly, complex problem-solving is a series of important, causally-linked decisions to (a) select and focus on the right problem, consequences, and root causes, and (b) design, evaluate, and improve countermeasures (prevention, control, mitigation) to achieve the primary objectives while minimizing harmful outcomes and unintended consequences.</p>
<p><strong>Decision quality</strong> is understanding and improving the requirements of making good decisions (Figure&nbsp;3) even when the decisions are intuitive, fast, or informal.</p>
<div id="fig-dqchain" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/images/decision_quality_decisioneducation_dot_org.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Decision quality (DQ) has six requirements. A good decision is only as strong as its weakest link.</figcaption>
</figure>
</div>
<p>At a minimum, a decision quality checklist (Table&nbsp;1) improves the quality of decisions at any stage of problem solving. A good decision is only as strong as its weakest link.</p>
<div id="tbl-dqchain" class="anchored">
<table class="table">
<caption>Table&nbsp;1: Checklist: key questions to answer for decision quality (DQ)</caption>
<colgroup>
<col style="width: 4%">
<col style="width: 11%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th>No.</th>
<th>Requirement</th>
<th>Key question to ask</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Frame</td>
<td>Are we clear on the problem we are solving?</td>
</tr>
<tr class="even">
<td>2</td>
<td>Values</td>
<td>Have we identified what we truly want?</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Alternatives</td>
<td>Do we have a good set of alternatives?</td>
</tr>
<tr class="even">
<td>4</td>
<td>Information</td>
<td>Have we gathered the relevant information?</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Reasoning</td>
<td>How will we evaluate alternatives to find the one that gets us the most of what what we truly want?</td>
</tr>
<tr class="even">
<td>6</td>
<td>Commitment</td>
<td>Are we committed to follow through on our choice.</td>
</tr>
</tbody>
</table>
</div>
<div id="fig-dqr" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/images/FIG4_Decision-Quality_diverg-converg2.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Decision quality requirements and work flow</figcaption>
</figure>
</div>
<p>Based on Figure&nbsp;4, Table&nbsp;2 summarizes specific areas of professional and systems developement to improve decision quality.</p>
<div id="tbl-dqr2" class="anchored">
<table class="table">
<caption>Table&nbsp;2: Decision quality requirements engages multiple disciplines and skillsets</caption>
<colgroup>
<col style="width: 4%">
<col style="width: 13%">
<col style="width: 81%">
</colgroup>
<thead>
<tr class="header">
<th>No.</th>
<th>Requirement</th>
<th>Priority areas for development, training, and improvement</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Frame</td>
<td><img src="https://latex.codecogs.com/png.latex?%5Cleftarrow"> <strong>decision competency</strong> in PDSA <strong>problem solving</strong></td>
</tr>
<tr class="even">
<td>2</td>
<td>Information</td>
<td><img src="https://latex.codecogs.com/png.latex?%5Cleftarrow"> <strong>data</strong>, <strong>information systems</strong>, and <strong>data science</strong></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Alternatives</td>
<td><img src="https://latex.codecogs.com/png.latex?%5Cleftarrow"> <strong>knowledge management</strong> (discovery, translation, and integration)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Reasoning</td>
<td><img src="https://latex.codecogs.com/png.latex?%5Cleftarrow"> <strong>causal and probabilistic reasoning</strong>, <strong>deliberation</strong>, and <strong>decision science</strong></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Commitment</td>
<td><img src="https://latex.codecogs.com/png.latex?%5Cleftarrow"> Engage and involve <strong>stakeholders</strong> to increase commitment to action</td>
</tr>
<tr class="even">
<td>6</td>
<td>Values</td>
<td><img src="https://latex.codecogs.com/png.latex?%5Cleftarrow"> Understand the <strong>consequences</strong>, trade-offs, and opportunity costs</td>
</tr>
</tbody>
</table>
</div>
<p>Team problem solving is a series of deliberative decision processes that are divergent (generating creative ideas and options) and convergent (selecting or prioritizing options for action). First, selecting the right problem to tackle is a decision problem, and it is the most important. Second, a root cause analysis identifies what causes the problem. Third, selecting countermeasures for root causes, problem, and consequences is, again, a decision problem. The key point is that problem-solving is a series of linked, interdependent decisions, each with quality requirements. The quality of a decision can only be as strong as its weakest link, and the quality of problem solving can only be as strong as the quality of those decisions.</p>
</section>
<section id="performance-improvement" class="level3">
<h3 class="anchored" data-anchor-id="performance-improvement">Performance improvement</h3>
<p>Put together, decision intelligence is the integration of problem solving and decision quality within a <strong>performance improvement framework</strong>, ensuring quality and continuous improvement in decision making. Table&nbsp;3 summarizes decision intelligence as Plan-Do-Study-Act (PDSA) problem solving.</p>
<div id="tbl-pdsa" class="anchored">
<table class="table">
<caption>Table&nbsp;3: Decision intelligence is the integration of problem solving and decision quality within a performance improvement framework</caption>
<colgroup>
<col style="width: 8%">
<col style="width: 46%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>PDSA</th>
<th>Components of Problem Solving</th>
<th>Key decision questions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Plan</td>
<td>Problem finding and definition</td>
<td>What is main problem to solve?</td>
</tr>
<tr class="even">
<td></td>
<td>Consequence (risk) analysis</td>
<td>What are the consequences?</td>
</tr>
<tr class="odd">
<td></td>
<td>Root cause (diagnostic) analysis</td>
<td>What causes the problem?</td>
</tr>
<tr class="even">
<td></td>
<td>Countermeasure design and testing</td>
<td>What strategies and actions work?</td>
</tr>
<tr class="odd">
<td>Do</td>
<td>Countermeasure implementation</td>
<td>How do we deploy countermeasures?</td>
</tr>
<tr class="even">
<td>Study</td>
<td>Countermeasure (causal) evaluation</td>
<td>How do we measure and test effectiveness?</td>
</tr>
<tr class="odd">
<td>Act</td>
<td>Act on what you learn to improve</td>
<td>How do we learn and improve?</td>
</tr>
</tbody>
</table>
</div>
<p>We can now appreciate that <strong>PDSA problem-solving</strong> is a series of decisions (Figure&nbsp;5): finding and selecting the most important problems to tackle; identifying and prioritizing the consequences caused by the unresolved problem(s); identifying (or discovering) and prioritizing the root causes of the problem(s); selecting effective countermeasures for each level (problem, root causes, and consequences); and deploying and evaluating the effectiveness of the countermeasures where evaluation is a type of causal analysis.</p>
<div id="fig-pdsa" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/images/decision-quality-divergence-convergence-triangles.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5: PDSA problem solving is a series of decisions</figcaption>
</figure>
</div>
</section>
<section id="behavioral-data-and-information-sciences" class="level3">
<h3 class="anchored" data-anchor-id="behavioral-data-and-information-sciences">Behavioral, data, and information sciences</h3>
<p>Decision intelligence starts with mastering the concepts above which can improve everyday important decisions. Without this foundation it is not possible to optimally use data and information. We often jump to building flashy data dashboards for making “data-driven” decisions without checking if we are solving the right problem or if we have good decision processes to begin with.</p>
<p>Finally, decisions involve people and actions. So we must understand basic behavioral sciences, especially behavioral economics.</p>
<p>I will cover these topics in future blog updates.</p>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>Decision intelligence is integration of</p>
<ul>
<li>problem solving,</li>
<li>decision quality,</li>
<li>continuous improvement, and</li>
<li>behavioral, data, and implementation sciences<sup>3</sup></li>
</ul>
<p>Decision intelligence<sup>4</sup> is often promoted through the lens of data science, machine learning, and artificial intelligence. The link is through human sensory input and processing of data and “information” in Table&nbsp;2. However, I believe decision intelligence concepts are applicable for everyday use, and therefore much more generalizable and powerful.</p>
<p>In future blog entries I will expand on these concepts with more emphasis on practical applications and data science.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Howard2015_isbn978-0132336246" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Howard RA, Abbas AE. Foundations of decision analysis. 1st ed. Pearson; 2015. </div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>I prefer causal reasoning: a causal link has statistical dependence but statistical dependence (an association) does not mean there is a causal link↩︎</p></li>
<li id="fn2"><p>Behavioral economics had made large contributions to our understanding of the influences of non-conscious biases on every day decisions.↩︎</p></li>
<li id="fn3"><p>Behavioral economics had made large contributions to our understanding of the influences of non-conscious biases on every day decisions.↩︎</p></li>
<li id="fn4"><p>See <a href="https://towardsdatascience.com/introduction-to-decision-intelligence-5d147ddab767" class="uri">https://towardsdatascience.com/introduction-to-decision-intelligence-5d147ddab767</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Decision intelligence</category>
  <category>Data science</category>
  <category>Behavioral economics</category>
  <category>Continuous improvement</category>
  <guid>https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/index.html</guid>
  <pubDate>Sat, 13 Mar 2021 08:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2021-03-13-decision-intelligence01/images/feature.png" medium="image" type="image/png" height="96" width="144"/>
</item>
<item>
  <title>Never say never: Why I moved from local to state public health</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2021-02-20-new-cdph-job/index.html</link>
  <description><![CDATA[ 




<p>Since 1996, I served the City and County of San Francisco in numerous deputy health officer roles, eventually becoming the health officer in December 2010. I was born in San Francisco and grew up in the Mission District—a low-income, predominantly Latino community. My family immigrated from Nicaragua in the 1950s and the Mission was home to a large concentration of Central American immigrants. I was honored and proud to be the health officer of my city of birth.</p>
<p>At the San Francisco Department of Public Health (SFDPH), local public health practice provided me with many unique challenges and opportunities. I was also the director of the Population Health Division that provided core public health services. I grew tremendously in my organizational and community leadership roles, and my partnerships with academic institutions such as UCSF and UC Berkeley School of Public Health fulfilled my nerdy inclinations. Over the years I worked with the California Department of Public Health on a variety of problems from communicable disease outbreaks to radiation concerns at the Hunter Points Naval Shipyard. However, I never—and I mean never!—imagined working for the state public health department—I wanted to stay close to the action; that is, local public health.</p>
<p>Before my health officer appointment, I had directed national CDC research and training centers on infectious disease emergency preparedness and response at the UC Berkeley School of Public Health. I had put that part of my career completely behind me and was more focused on broader public health challenges such as racial health inequities. I also developed a strong interest in leadership development, decision intelligence, and organizational performance improvement. The SFDPH became a laboratory for testing, learning, and teaching. I was professionally and intellectually fulfilled.</p>
<p>That all changed with the SARS-CoV-2 pandemic. In December 2019, we started receiving news about an outbreak of respiratory infections in Wuhan, Hubei Province, China. Because of my training and expertise in communicable diseases, and my experience with SARS in 2003 and H1N1 pandemic flu in 2009, I was especially attuned to the evolving events.</p>
<p>On January 13, 2020, I med with Dr.&nbsp;Julie Stoltey, our communicable disease controller, and on January 21st we activated our Departmental Operations Center (DOC). We have been working non-stop since with very few days off. The pandemic not only disrupted our society and economy, it revealed and amplified pre-existing racial inequities. It also revealed the longstanding neglect of the public health infrastructure at all levels of government. Finally, people started to understand what is public health.</p>
<p>March 15, 2020, a group of seven Bay Area health officers, led by Dr.Sara Cody, issued the <a href="https://journals.lww.com/jphmp/Fulltext/2021/01001/Crisis_Decision_Making_at_the_Speed_of_COVID_19_.5.aspx">first stay-at-home orders in the United States</a>. We successfully prevented many cases, hospitalization, and deaths. Unfortunately, this was just the beginning of a long haul of fighting this relentless and unforgiving pandemic. Fortunately, the rapid development of effective vaccines meant real hope was around the corner, and that we would be transitioning into a recovery and rebuilding phase. This also means rebuilding the public health infrastructure for the 21st century.</p>
<p>When the job announcement for the <a href="https://www.cdph.ca.gov/meet-the-director">CDPH director and state public health officer</a> was posted, I immediately applied. I could not pass up the opportunity to shape the future of public health services for a state of 40 million people, to advocate for the resources to rebuild our public health infrastructure, and to fight for social and racial equity and health on a larger stage. I was humbled and honored to be selected to serve in this position at this critical time in our history.</p>
<p>I just completed seven weeks! I am exhausted, and at times overwhelmed and over extended! (So, what else is new!) My strongest impression working at CDPH is the enormous level of staff dedication, kindness, ingenuity, and passion for public service and science. I am inspired every single day! The CDPH staff are working 24/7 to protect and promote health and safety for the diverse counties and communities across the state. It’s a huge privilege to work more closely with health officials of the County Health Executives Association of California (<a href="https://cheac.org/">CHEAC</a>) and the Health Officers Association of California (<a href="http://www.calhealthofficers.org/">HOAC</a>), and with stakeholder and advocacy groups representing the diverse interests of California residents. They too are working just as hard and long to protect all of us.</p>
<p>Rebuilding public health requires everyone. I hope you will reach out to me and provide input and feedback on our and my performance, and how we can “become the best at getting better” in service to you.</p>
<p>To learn more about CDPH visit <a href="https://www.cdph.ca.gov/Pages/About.aspx" class="uri">https://www.cdph.ca.gov/Pages/About.aspx</a>.</p>



 ]]></description>
  <category>CDPH</category>
  <category>Work</category>
  <guid>https://drtomasaragon.github.io/posts/2021-02-20-new-cdph-job/index.html</guid>
  <pubDate>Sun, 21 Feb 2021 08:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2021-02-20-new-cdph-job/images/combatimoscovid_1800x1200.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>The Book of Why: The new science of cause and effect</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2018-06-11-the-book-of-why/index.html</link>
  <description><![CDATA[ 




<p>Causal reasoning is at the core of everything we <em>see</em>, <em>do</em>, and <em>imagine</em>. Causal inference is the foundation of scientific thinking and reasoning. Every explicit decision we make is the realization of causal thinking. You will be surprised to learn that the rigorous study of causality as a science is relatively new in comparison to the disciplines of statistics and probability. The history of the Causal Revolution will surprise, inspire, entertain, and—at times—shock you! Below is my 5-star Amazon review of the Judea Pearl’s <a href="https://www.amazon.com/dp/1541698967/ref=cm_sw_em_r_mt_dp_9VZQCZSK32XKR9AKGCP6">The Book of Why: The New Science of Cause and Effect</a> (which became an Amazon “Best Seller” within the first week of its release!).</p>
<p>“Wow! I am a physician epidemiologist with a doctorate in epidemiology and I teach computational epidemiology (with R) at UC Berkeley. I had the opportunity to study biostatistics from the best professors at UC Berkeley School of Public Health (Steve Selvin, Nicolas Jewell, Richard Brand, and many more). The field of causal inference was just beginning to take off with biostatisticians piloting the plane (Mark van der Laan, Nicolas Jewell, etc.). I avoided a rigorous study of causal inference but eventually came around after studying Bayesian networks (pioneered by Judea Pearl) for decision analysis. Judea Pearl’s Bayesian networks and causal graphs connects the fields of statistics, epidemiology, decision and computer sciences in a profoundly elegant way. His work empowers and expands the potential of”big data.” This is the first book written for the general public on this topic. It will have a <em>huge impact</em>. Causality and causal reasoning is at the core of everything we see, do, and imagine. He provides a graphical tool (causal graphs) for encoding expert knowledge (including community wisdom and experience). Anyone—yes, anyone—can learn the basics. For additional rigor, there are structural causal models (functional equations). I now consider it “data scientific malpractice” to be designing studies, analyzing data, and adjusting for confounders without using causal models. Human brains are wired to resist new paradigms. Be intellectually wise and humble and read this book–you will not regret it!”</p>
<section id="the-ladder-of-causation" class="level2">
<h2 class="anchored" data-anchor-id="the-ladder-of-causation">The Ladder of Causation</h2>
<p>By the end of this book you will understand, appreciate, and value the “Ladder of Causation” (Figure&nbsp;1)<sup>1</sup> as a way of thinking about decision making, causal reasoning, and causal discovery. You will develop a different appreciation of the important roles of epidemiology and statistics which have embraced the Causal Revolution. Be sure to get the 2020 reprint edition.<sup>2</sup></p>
<div id="fig-ladder" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://drtomasaragon.github.io/posts/2018-06-11-the-book-of-why/images/Pearl2018_The-Book-of-Why_Ladder-of-Causation_680x950.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: “The Ladder of Causation”</figcaption>
</figure>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Illustrator: Maayan Harel <a href="http://www.maayanillustration.com/" class="uri">http://www.maayanillustration.com/</a>↩︎</p></li>
<li id="fn2"><p>Basic Books; Reprint edition (August 25, 2020), ISBN-10: 1541698967, ISBN-13: 978-1541698963↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Book review</category>
  <category>Causal inference</category>
  <category>Bayesian networks</category>
  <category>Data science</category>
  <guid>https://drtomasaragon.github.io/posts/2018-06-11-the-book-of-why/index.html</guid>
  <pubDate>Mon, 11 Jun 2018 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2018-06-11-the-book-of-why/images/Pearl2018_The-Book-of-Why_COVER_300x200.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>How emotions are made: The secret life of the brain</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2018-06-15-how-emotions-are-made/index.html</link>
  <description><![CDATA[ 




<p>Most of what we know about our emotions (and how our brains work) is just plain wrong—and sometimes harmful! <em>Myth:</em> our emotions are hard-wired by evolution in our “limbic” (“reptilian”) brain and emotions are “triggered.” <em>Myth:</em> across the globe humans have universal facial expressions for core emotions (e.g., joy causes smiling). <em>Myth:</em> we control our emotions with our “rational” (neocortex) brain. <em>Myth:</em> the amygdala is the “fear center” of the brain. <em>Myth:</em> we can learn to read others’ emotions with reliability. <em>Myth:</em> seeing is believing. <em>Myth:</em> we cannot go wrong trusting our “gut” feeling.</p>
<p>Reading Lisa Feldman Barrett’s <a href="http://a.co/2rjaHS5"><em>How Emotions are Made: The secret life of the brain</em></a> was transformative. Our emotions, brain, and body do not function as depicted by <a href="https://lisafeldmanbarrett.com/category/myths-about-the-brain/">brain science myths</a> that have been debunked, but persist because scientists, health professionals, and the “emotion,” “emotional-intelligence,” and “brain science” industries are not current with the latest neuroscience. This book will set you on the right course.</p>
<p>At birth, the brain is a blank slate awaiting “wiring instructions” from a caregiver. Every second we are alive the brain processes “big data” of sensory input from our body (through <a href="https://en.wikipedia.org/wiki/Interoception">interoception</a>) and from the external world (through our senses: sight, hearing, touch, smell, and taste). Through evolution, humans solved a neurobio-engineering problem: how do we efficiently procure and balance energy <em>and</em> accumulate learnings on how to survive and procreate. The brain evolved into a <strong>predictive learning machine</strong>. The memories we accumulate through experiences become the predictions (“hypotheses” or “priors”) that the brain compares to new sensory input (“evidence”). The gap between prediction and sensory input is <strong>prediction error</strong>. If the prediction error is small or negligible the brain accepts the prediction, thereby saving cognitive energy expenditure. If the prediction error is large (e.g., cognitive dissonance), the brain must choose either to accept the prediction (cognitively and energy efficient, so our brain <em>strongly</em> prefers this), or to learn (cognitively and energy inefficient, so our brain <em>strongly</em> resists this).</p>
<p>The brain must make meaning of this sensory input in order to prepare for what the body needs to do next (based on prior experiences) to survive, etc. The brain prepares the body to respond through our nervous, cardiovascular, immune, endrocrine, and musculoskeletal systems. <strong>Emotions are the on-the-spot meanings</strong> the brain gives to these external and internal sensory input (bodily sensations). “In other words, emotions are your brain’s best guess of how you should feel in the moment. Emotions aren’t wired into your brain like little circuits; they’re made on demand. As a result, you have more control over your emotions than you might think.”<sup>1</sup></p>
<p>All of this happens automatically at a nonconscious level: that is why it “feels” like our emotions are “triggered.” In fact, <em>our emotions are constructed in the moment</em> based on:</p>
<ol type="1">
<li><strong>sensory input</strong> (from body [interoception] and surroundings [exteroception], includes social environmental context),</li>
<li><strong>goal</strong> (survive, human drives, etc.),</li>
<li><strong>predictions</strong> (memories accumulated from prior experiences).<sup>2</sup></li>
</ol>
<p>The implications of understanding this evolution-designed engineering achievement are huge! How the brain processes the big data of sensory input also provides lessons on how we should process the new big data we are accumulating in the “cloud.” (Hint: read my <a href="https://taragonmd.github.io/tags/book-review/">book review</a> of Judea Pearl’s <em>The Book of Why: The New Science of Cause and Effect</em>.)</p>
<section id="designing-an-emotionally-fulfilling-life" class="level2">
<h2 class="anchored" data-anchor-id="designing-an-emotionally-fulfilling-life">Designing an emotionally fulfilling life</h2>
<p>Even today, we are taught, incorrectly, that emotions are hardwired by evolution and that we should “control” (i.e., suppress), accept (i.e., embrace), or release emotions. For example, someone or something “triggers” an emotion and a stress response (“fight-flight-freeze”) in us, and we can use mindfulness to notice, acknowledge, and “release” this emotion. Yes, mindfulness works; however, <em>mindfulness is much more powerful when we understand that emotions are acutually constructed rathered than “triggered.”</em></p>
<p>We have the power to design and build an emotionally fulfilling life by the experiences we choose to have and the cognitive and motor memories we encode in our brains. <em>This explains how “doing” rewires the brain!</em> Interestingly, <strong>Buddhism</strong><sup>3</sup> practices (e.g., mindfulness meditation) align nicely with this modern scientific understanding of brain and emotions. For example, Dr.&nbsp;Barrett studies and describes how Buddhism can strengthen interpersonal relationships and improve your brain and body health.<sup>4</sup></p>
<p>Mindfulness promotes stillness, awareness, and being in the moment without judgment or expectation. Then, we can exercise curiosity about what contributed or is contributing to our feelings (affect) and emotions (meaning). This is critical because <em>our brains are quick to draw false conclusions</em> to save cognitive energy rather than to “get it right.” Interestingly, the more vocabulary we have to describe feelings and emotions, the more ability we have to recognize these in ourselves and others. This is called <em>emotional granularity</em> and is the actual basis of emotional intelligence.<sup>5</sup></p>
<p>Dr.&nbsp;Barrett’s <a href="http://a.co/2rjaHS5">How Emotions are Made</a> covers many practical applications of this emerging science, including mitigating implicit racial bias.</p>
</section>
<section id="key-resources-from-dr.-lisa-feldman-barrett" class="level2">
<h2 class="anchored" data-anchor-id="key-resources-from-dr.-lisa-feldman-barrett">Key resources from Dr.&nbsp;Lisa Feldman Barrett</h2>
<p>Dr.&nbsp;Feldman Barrett’s book covers a lot of content. To get you oriented, I recommend first watching the three videos below. The first video is 5 minutes, followed by two TED talks by LFB.</p>
<section id="this-is-why-you-feel-the-way-you-feel" class="level3">
<h3 class="anchored" data-anchor-id="this-is-why-you-feel-the-way-you-feel">1: This is why you feel the way you feel</h3>
<p>This is an outstanding 5-minute summary of construction of emotions:</p>
<div style="text-align: center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/M1OdhdI_3eI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</div>
</section>
<section id="ted-you-arent-at-the-mercy-of-your-emotions-your-brain-creates-them" class="level3">
<h3 class="anchored" data-anchor-id="ted-you-arent-at-the-mercy-of-your-emotions-your-brain-creates-them">2 (TED): You aren’t at the mercy of your emotions: Your brain creates them</h3>
<p>“Can you look at someone’s face and know what they’re feeling? Does everyone experience happiness, sadness and anxiety the same way? What are emotions anyway? For the past 25 years, psychology professor Lisa Feldman Barrett has mapped facial expressions, scanned brains and analyzed hundreds of physiology studies to understand what emotions really are. She shares the results of her exhaustive research—and explains how we may have more control over our emotions than we think.”</p>
<div style="text-align: center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/0gks6ceq4eQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</div>
<p>See <a href="https://www.ted.com/talks/lisa_feldman_barrett_you_aren_t_at_the_mercy_of_your_emotions_your_brain_creates_them/reading-list">reading list</a> for above TED talk.</p>
</section>
<section id="ted-cultivating-wisdom-the-power-of-mood" class="level3">
<h3 class="anchored" data-anchor-id="ted-cultivating-wisdom-the-power-of-mood">3 (TED): Cultivating Wisdom: The Power of Mood</h3>
<p>“Do you believe that what you see influences how you feel? Actually, the opposite is true: What you feel—your <em>affect</em>—influences what you see, hear, smell, taste, and touch. Psychologist and neuroscientist Lisa Feldman Barrett shares the groundbreaking discovery that you experience the world through affect-colored glasses. She also reveals how affect can be a source of wisdom that helps you to make better, wiser choices”</p>
<div style="text-align: center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZYAEh3T5a80" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</div>
</section>
<section id="how-emotions-are-made-cinematic-lecture" class="level3">
<h3 class="anchored" data-anchor-id="how-emotions-are-made-cinematic-lecture">4 How Emotions are Made (Cinematic Lecture)</h3>
<p>Emotions don’t happen to you. They are made by your predictive brain, in specific situations: a brain that feels affect and makes concepts absorbed from your life experience while conversing with your body + the world around you.</p>
<p>This cinematic lecture by Professor Lisa Feldman Barrett is based off her book of the same name.</p>
<div style="text-align: center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/0rbyC5m557I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</div>
</section>
<section id="lfbs-website-includes-numerous-academic-lectures" class="level3">
<h3 class="anchored" data-anchor-id="lfbs-website-includes-numerous-academic-lectures">LFB’s website (includes numerous academic lectures)</h3>
<p>Here is her website with a wealth of material: <a href="https://lisafeldmanbarrett.com/" class="uri">https://lisafeldmanbarrett.com/</a>.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Barrett LF. <em>The science of making emotions: Three main ingredients contribute to how and why the brain creates feelings</em>. HealthyLivingMadeSimple.com. Available from <a href="http://healthylivingmadesimple.com/science-making-emotions/" class="uri">http://healthylivingmadesimple.com/science-making-emotions/</a>↩︎</p></li>
<li id="fn2"><p>For example, <strong>implicit bias</strong> is a biased prediction stereotype that operates at a nonconscious level.↩︎</p></li>
<li id="fn3"><p><em>Buddha’s Brain: The Practical Neuroscience of Happiness, Love, and Wisdom</em> by Rick Hanson et al.&nbsp;Link: <a href="http://a.co/7SwSlOm" class="uri">http://a.co/7SwSlOm</a>↩︎</p></li>
<li id="fn4"><p>Barrett LF. <em>Buddhists in love: Lovers crave intensity, Buddhists say craving causes suffering. Is it possible to be deeply in love yet truly detached?</em> Aeon (website). June, 4, 2018. Available from: <a href="https://aeon.co/essays/does-buddhist-detachment-allow-for-a-healthier-togetherness" class="uri">https://aeon.co/essays/does-buddhist-detachment-allow-for-a-healthier-togetherness</a>.↩︎</p></li>
<li id="fn5"><p>Barrett LF. <em>Emotional Intelligence Needs a Rewrite: Think you can read people’s emotions? Think again.</em> Nautilus (website). August 3, 2017. Available from: <a href="http://nautil.us/issue/51/limits/emotional-intelligence-needs-a-rewrite" class="uri">http://nautil.us/issue/51/limits/emotional-intelligence-needs-a-rewrite</a>.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Book review</category>
  <category>Emotions</category>
  <category>Neuroscience</category>
  <category>Psychology</category>
  <guid>https://drtomasaragon.github.io/posts/2018-06-15-how-emotions-are-made/index.html</guid>
  <pubDate>Mon, 11 Jun 2018 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2018-06-15-how-emotions-are-made/images/feature.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Humility is the New Smart! Rethinking human excellence</title>
  <dc:creator>Tomás Aragón</dc:creator>
  <link>https://drtomasaragon.github.io/posts/2017-10-22-humility-is-the-new-smart/index.html</link>
  <description><![CDATA[ 




<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is part of the series <em><a href="https://drtomasaragon.github.io/#category=The%20CDPH%20Way">The CDPH Way—Becoming the best at getting better</a></em>.</p>
<p>For background, here is an <a href="https://app.box.com/s/qdkfdg6up953gin7zwj7ojtcomvu3725">overview slide set</a> and <a href="https://app.box.com/s/dy09jpugvognm8x3oz56mt379o6vygbo">lean reporting templates</a>.</p>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Humility is the key</strong> to unleashing and supercharging personal and organizational performance improvement. However, not everyone feels comfortable introducing complex topics like cultural humility. I was fortunate to discover Professor Edward Hess’ book “Humility is the New Smart: Rethinking human excellence in the smart machine age” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>. I believe his book is a non-threatening, practical, and inspiring way to introduce humility to your staff. Based on Hess’ book, the article below is an excerpt from our population health lean reference document.<sup>1</sup> … Tomás J. Aragón</p>
</blockquote>
<section id="redefining-what-it-means-to-be-smart" class="level2">
<h2 class="anchored" data-anchor-id="redefining-what-it-means-to-be-smart">Redefining what it means to be “smart”</h2>
<p>Our world is changing fast! Automation, machine learning, and artificial intelligence—the Smart Machine Age (SMA)—are disrupting and displacing the workforce. Transdisciplinary teamwork is the new norm. People skills, creative and critical thinking, innovation, and improvement are more important now than ever!</p>
<p>Unfortunately, our native cognitive abilities have not evolved at the same pace <span class="citation" data-cites="Kahneman2011_isbn978-0374533557">[2]</span>. Our brain is wired to sense “dangers” and react based on perceived threats and emotions. Our brain is wired for efficiency: it defaults to personality traits, fast decisions via nonconscious schemas or learned mindsets. We resist new ideas that demand new cognitive effort. Our decisions are suboptimal due to <em>cognitive biases</em>: (a) protection of mindset, (b) personality and habits, (c) faulty reasoning, (d) automatic associations, (e) relative thinking, and (f) social influences <span class="citation" data-cites="Spetzler2016_isbn978-1119144670">[3]</span>.</p>
<p>Humans are prone to <strong>defensiveness</strong> from our innate drive to <strong>protect our ego</strong><sup>2</sup> and to <strong>avoid our fears</strong> (vulnerability, uncertainty, risk, intellectual or emotional exposure, uninvited scrutiny). Science shows these behaviors impede creativity, critical and innovative thinking, reflective listening, and emotionally engaging others <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>. We mitigate these biases using brain science. We start with a new definition of “being smart” (“NewSmart”). We must embrace intellectual humility, honesty, and courage and redesign organizations for this new age. Professor Edward Hess’ <strong>NewSmart Humility</strong> has four interdependent components:</p>
<ol type="1">
<li>NewSmart principles,</li>
<li>Humility mindset,</li>
<li>NewSmart behaviors, and</li>
<li>NewSmart organization <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>.</li>
</ol>
</section>
<section id="the-newsmart-principles" class="level2">
<h2 class="anchored" data-anchor-id="the-newsmart-principles">The “NewSmart” principles</h2>
<p>“To change our mental model for the SMA,” Hess writes, “we first need to accept a quality-based definition of ‘being smart’—a NewSmart—that we define as excelling at the highest level of thinking, learning, and emotionally engaging with others that one is capable of doing. NewSmart is a measure not of <em>what</em> you know or <em>how much</em> you know but of</p>
<ol type="1">
<li>the quality of your thinking, listening, collaborating, and learning;</li>
<li>how good you are at “not” knowing and decoupling your beliefs (not values) from your ego;</li>
<li>how good you are at being open to continually stress-testing your beliefs about how the world works;</li>
<li>how good you are at trying out new ideas and ways to accomplish your objectives and learning from those experiments” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>.</li>
</ol>
<p>“So what does the high-quality thinking, learning, and emotional engagement underlying NewSmart look like in practice?” The <strong>NewSmart principles</strong> are worth committing to memory:</p>
<ol type="1">
<li>“I’m defined not by what I know or how much I know, but by the quality of my thinking, listening, relating, and collaborating.”</li>
<li>“My mental models are not reality—they are only my generalized stories of how my world works.”</li>
<li>“I’m not my ideas, and I must decouple my beliefs (not values) from my ego.”</li>
<li>“I must be open-minded and treat my beliefs (not values) as hypotheses to be constantly tested and subject to modification by better data.”</li>
<li>“My mistakes and failures are opportunities to learn.”</li>
</ol>
<p>This Table compares the “old smart” to the NewSmart.</p>
<table class="table">
<colgroup>
<col style="width: 47%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Old smart</strong></th>
<th><strong>NewSmart</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>I know</td>
<td>I’m good at not knowing</td>
</tr>
<tr class="even">
<td>I tell</td>
<td>I ask</td>
</tr>
<tr class="odd">
<td>Defend my views</td>
<td>Improve my views</td>
</tr>
<tr class="even">
<td>Seek confirmation</td>
<td>Seek truth</td>
</tr>
<tr class="odd">
<td>Close mind</td>
<td>Open mind</td>
</tr>
<tr class="even">
<td>Insecure if beliefs are challenged</td>
<td>Insecure if beliefs are NOT challenged</td>
</tr>
<tr class="odd">
<td>Mistakes are bad</td>
<td>Mistakes are learning opportunities</td>
</tr>
<tr class="even">
<td>Perfectionism</td>
<td>Learning</td>
</tr>
</tbody>
</table>
</section>
<section id="the-humility-mindset" class="level2">
<h2 class="anchored" data-anchor-id="the-humility-mindset">The Humility mindset</h2>
<p>We embrace two definitions of humility:</p>
<ol type="1">
<li>Dickson defines humility as “the noble choice to forgo your status, [and to] use your influence for the good of others before yourself,” <span class="citation" data-cites="Dickson2011_isbn978-0310328629">[4]</span> and</li>
<li>Hess defines “Humility as a mindset about oneself that is open-minded, self-accurate, and ‘not all about me,’ and that enables one to embrace the world as it ‘is’ in the pursuit of human excellence” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>.</li>
</ol>
<p>“Humility is a mindset that results in not being so self-centered, ego defensive, self-enhancing, self-promotional, and closed-minded—all of which the science of learning and cognition shows inhibit excellence at higher-order thinking and emotionally engaging with others” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>.</p>
</section>
<section id="the-newsmart-behaviors" class="level2">
<h2 class="anchored" data-anchor-id="the-newsmart-behaviors">The NewSmart behaviors</h2>
<p>The NewSmart and Humility mindsets drive behaviors that are supported and improved with evidence-based skills. Hess clusters them into four behavioral categories:</p>
<ol type="a">
<li><strong>Quieting Ego</strong>,<br></li>
<li><strong>Managing Self</strong> (one’s thinking and emotions),<br></li>
<li><strong>Reflective Listening</strong>, and<br></li>
<li><strong>Otherness</strong> (emotionally connecting and relating).</li>
</ol>
<section id="a-quieting-ego" class="level3">
<h3 class="anchored" data-anchor-id="a-quieting-ego">(a) Quieting Ego</h3>
<p>“Quieting Ego is how we can deliberately work to reduce our reflexive emotional defensiveness; have empathy and open-mindedness; engage in Reflective Listening; and proactively seek other people’s feedback and perspectives to stress-test our own thinking. Quieting Ego is a way of practicing and operationalizing Humility. To quiet our ego is to perceive others and the world without filtering everything through a self-focused lens and to tamp down on negative or self-protective”inner talk” that is driven consciously or subconsciously by our fears and insecurities” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>. Quieting Ego starts with four evidence-based behaviors:</p>
<ol type="1">
<li><strong>mindfulness</strong>,</li>
<li><strong>mindfulness meditation</strong>,</li>
<li><strong>daily Quiet Ego reminders</strong>, and</li>
<li><strong>practicing gratitude</strong>.</li>
</ol>
</section>
<section id="b-managing-self-ones-thinking-and-emotions" class="level3">
<h3 class="anchored" data-anchor-id="b-managing-self-ones-thinking-and-emotions">(b) Managing Self (one’s thinking and emotions)</h3>
<p>“Managing Self—our emotions and thinking—aids us in engaging in the higher-level thinking and behavior required … . It’s necessary to remain open-minded and be willing to test our beliefs and modify our points of view if presented with better data. It’s also how we’re able to overcome our fear of mistakes in order to take ownership of them and learn from them, and helps us more effectively relate to and collaborate with others” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>.</p>
<p>“Managing Self comes from the science of ‘self-regulation’ and ‘self-control,’ which are broad psychological concepts that mean to monitor and manage one’s emotions, thoughts, and behaviors” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span> and start with these practices:</p>
<ol type="1">
<li><strong>slowing down</strong>,</li>
<li><strong>managing thoughts</strong>,</li>
<li><strong>managing emotions</strong>, and</li>
<li><strong>emotional intelligence</strong>.</li>
</ol>
<p>For managing thoughts, Hess’ “thinking toolbox” starts with familiar concepts from population health lean (PDSA problem-solving, root cause analysis, etc.). We also highly recommend reading Richard Nisbett’s <em>Mindware: Tools for Smart Thinking</em> <span class="citation" data-cites="Nisbett2016_isbn978-0374536244">[5]</span>.</p>
<p>For managing emotions, “We’ve discussed how ego and fear are the two big learning inhibitors and explored our reflexive tendency as humans to be emotionally defensive and self-protective. We’ve discussed how negative emotions can undermine our behavior and thinking and how positive emotions can improve them. Stress, anger, and anxiety can cause narrow-mindedness and the fight-flee-or-freeze syndrome. … Positive emotions, on the other hand, have been scientifically linked not just to higher health and well-being but also to broader attention, open-mindedness, deeper focus, and more flexible thinking, all of which underlie creativity and innovative thinking. Positive emotions also improve decision making and general cognitive processing.”</p>
<p>Hess’ <strong>“managing emotions toolbox”</strong> includes effective techniques such as</p>
<ol type="1">
<li>psychological distancing,</li>
<li>reframing,</li>
<li>positive memories,</li>
<li>positive self-talk, and</li>
<li>if-then implementation plans.</li>
</ol>
<p>See Hess book for illustrative examples <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>.</p>
<p><strong>Emotional intelligence</strong> (EI) is “the ability to monitor one’s own and others’ feelings and emotions, to discriminate among them and to use this information to guide one’s thinking and actions. … Sensitivity to other people’s emotions has been found to be a key to effective collaboration.” The EI model includes these abilities:</p>
<ol type="1">
<li><em>Perceive and differentiate emotions</em> in self and others.</li>
<li><em>Use emotions</em> to facilitate reasoning, aid judgment and memory processes, problem solve, communicate with others, and facilitate open-mindedness.</li>
<li><em>Understand emotions</em> by analyzing the emotions of yourself and others.</li>
<li><em>Manage emotions</em> in self and others.</li>
</ol>
</section>
<section id="c-reflective-listening" class="level3">
<h3 class="anchored" data-anchor-id="c-reflective-listening">(c) Reflective Listening</h3>
<p>“Reflective Listening is so important because it underlies all [other skills]. Why? Because your thinking and learning are limited by cognitive biases, emotional defensiveness, ego, and fear. You need, then, to truly listen to others to open your mind, push past your biases and mental models, and mitigate self-absorption in order to collaborate and build better relationships. [We know from] evidence that it’s hard for any of us to critique our own thinking and truly think critically. We’re just too wired to confirm what we already believe, and we feel too comfortable having a cohesive simple story of how our world works. We need to have thinking ‘partners’ who force us to confront those biases, and we need to listen to them” <span class="citation" data-cites="Hess2017_isbn978-1626568754">[1]</span>.</p>
<p><strong>Reflective Listening</strong> includes these practices:</p>
<ol type="1">
<li><strong>preparing</strong> to <em>listen reflectively</em>,</li>
<li><strong>listening</strong> with a <em>Quiet Ego and an open mind</em>, and</li>
<li><strong>inquiring</strong> with genuine curiosity, humility, and respect (humble inquiry).</li>
</ol>
<p>Here’s a <strong>preparation checklist</strong> for Reflective Listening:</p>
<ol type="1">
<li>Is my mind clear? If not, take several deep, slow breaths.</li>
<li>Am I calm emotionally? If not, take a few more deep breaths, focusing on breathing in for four seconds and very, very slowly breathing out for four seconds.</li>
<li>Say to yourself a couple of times:</li>
</ol>
<ul>
<li>“I am not my ideas.”</li>
<li>“It’s not all about me.”</li>
<li>“Don’t be defensive.”</li>
<li>“Ask questions before telling.”</li>
<li>“Don’t interrupt.”</li>
<li>“Stay focused.”</li>
<li>“Critique ideas, not people.”</li>
<li>“Listen to understand, not to confirm.”</li>
</ul>
</section>
<section id="d-otherness-emotionally-connecting-and-relating" class="level3">
<h3 class="anchored" data-anchor-id="d-otherness-emotionally-connecting-and-relating">(d) Otherness (emotionally connecting and relating)</h3>
<p>Hess writes “We need others because we can’t think, innovate, or relate at our best alone. To relate to other people you first have to make a connection with them. It is by building a relationship over time that you build trust, and when you have caring trust, you have set the stage for the highest level of human engagement. … So how do you get better at connecting and relating? It’s quite obvious that connecting and relating to people is inhibited by arrogance, self-absorption, self-centeredness, not listening, closed-mindedness, lack of empathy, emotional defensiveness, and the ego protection and fear that flow from the Old Smart mental model. Accepting NewSmart and Humility as well as practicing Quieting Ego, Managing Self, and Reflective Listening lays the groundwork for relationship building with others.”</p>
<p><strong>Otherness behaviors</strong> include:</p>
<ol type="1">
<li>using the fives keys to connecting,</li>
<li>building trust and conveying caring,</li>
<li>preparing for meetings,</li>
<li>choosing words wisely.</li>
</ol>
<p>The <strong>five keys to connecting</strong> are</p>
<ol type="1">
<li>be present,</li>
<li>be genuine,</li>
<li>communicate affirmation,</li>
<li>listen effectively, and</li>
<li>communicate support.</li>
</ol>
<p><strong>Prepare for meetings</strong> with this checklist:</p>
<ol type="1">
<li>be <em>really</em> present,</li>
<li>genuinely smile—a big smile,</li>
<li>make eye contact,</li>
<li>be positive,</li>
<li>listen reflectively,</li>
<li>stay <em>fully</em> present, and</li>
<li>do no harm.</li>
</ol>
<p>Choose your words wisely: use “Yes, and” instead of “Yes, but” to build on the ideas of others; use “I believe” instead of “I think” to acknowledge your ideas are hypotheses open to critique and testing; use “I want to” instead of “I have to” and “I won’t” instead of “I can’t” to emphasize the power of choice.</p>
</section>
</section>
<section id="newsmart-organization" class="level2">
<h2 class="anchored" data-anchor-id="newsmart-organization">NewSmart organization</h2>
<p>Finally, design your organizational culture and environment for learning, adaptation, innovation, and improvement leveraging established psychological concepts:</p>
<ol type="1">
<li><strong>positivity</strong> (promote positive emotions, minimize negative emotions);</li>
<li><strong>self-determination theory</strong> (promote intrinsic motivation by supporting innate human drives for autonomy, relatedness, and competence); and</li>
<li><strong>psychological safety</strong> (feeling safe to speak freely; to experiment, fail, and learn; to seek and give constructive feedback; to challenge others’ thinking, including the “boss”).</li>
</ol>
<p>The Table below summarizes the new cultural ways of a NewSmart organization.</p>
<table class="table">
<colgroup>
<col style="width: 47%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Old Cultural Ways</strong></th>
<th><strong>New Cultural Ways</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Individuals win</td>
<td>Teams win</td>
</tr>
<tr class="even">
<td>Play cards close to the chest</td>
<td>Transparency</td>
</tr>
<tr class="odd">
<td>Highest-ranking person can trump</td>
<td>Best idea or argument wins</td>
</tr>
<tr class="even">
<td>Listening to confirrm</td>
<td>Listening to learn</td>
</tr>
<tr class="odd">
<td>Telling</td>
<td>Asking questions (humble inquiry)</td>
</tr>
<tr class="even">
<td>Knowing</td>
<td>Being good at not knowing</td>
</tr>
<tr class="odd">
<td>IQ</td>
<td>IQ and EQ (emotional intelligence)</td>
</tr>
<tr class="even">
<td>Mistakes are always bad</td>
<td>Mistakes are learning opportunities</td>
</tr>
<tr class="odd">
<td>Compete</td>
<td>Collaborate</td>
</tr>
<tr class="even">
<td>Self-promote</td>
<td>Self-reflect</td>
</tr>
</tbody>
</table>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body">
<div id="ref-Hess2017_isbn978-1626568754" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Hess E. Humility is the new smart: Rethinking human excellence in the smart machine age. Oakland, CA: Berrett-Koehler Publishers, a BK Business Book; 2017. </div>
</div>
<div id="ref-Kahneman2011_isbn978-0374533557" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Kahneman D. Thinking, fast and slow. New York: Farrar, Straus; Giroux; 2011. </div>
</div>
<div id="ref-Spetzler2016_isbn978-1119144670" class="csl-entry">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Spetzler C, Winter H, Meyer J. Decision quality: Value creation from better business decisions. 1st ed. Wiley; 2016. </div>
</div>
<div id="ref-Dickson2011_isbn978-0310328629" class="csl-entry">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Dickson J. Humilitas: A lost key to life, love, and leadership. Zondervan; 2011. </div>
</div>
<div id="ref-Nisbett2016_isbn978-0374536244" class="csl-entry">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Nisbett R. Mindware: Tools for smart thinking. New York: Farrar, Straus; Giroux; 2016. </div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Aragón TJ, Garcia BA. We will be the best at getting better! An introduction to population health lean. eScholarship.org; 2017. Available from <a href="http://bit.ly/phleandoc2" class="uri">http://bit.ly/phleandoc2</a>↩︎</p></li>
<li id="fn2"><p><strong>Ego</strong> is best understood as “self-concept” which is a collection of beliefs about oneself, including our many identities (gender, racial, professional, etc.). “Self-concept is made up of one’s self-schemas, and interacts with self-esteem, self-knowledge, and the social self to form the self as whole. … The temporal self-appraisal theory argues that people have a tendency to maintain a positive self-evaluation by distancing themselves from their negative self and paying more attention to their positive one.” (source: Wikipedia. Self-concept; 2017. Online. Available from: <a href="https://en.wikipedia.org/wiki/Self-concept" class="uri">https://en.wikipedia.org/wiki/Self-concept</a>.)↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>CDPH Way</category>
  <category>The CDPH Way</category>
  <category>Book review</category>
  <category>Humility</category>
  <category>Mindfulness</category>
  <category>Psychological safety</category>
  <category>Team skills</category>
  <guid>https://drtomasaragon.github.io/posts/2017-10-22-humility-is-the-new-smart/index.html</guid>
  <pubDate>Sun, 22 Oct 2017 07:00:00 GMT</pubDate>
  <media:content url="https://drtomasaragon.github.io/posts/2017-10-22-humility-is-the-new-smart/images/humility-book_200x133.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
